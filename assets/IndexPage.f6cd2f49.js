import{Q as Ae}from"./QResizeObserver.05d75f74.js";import{Q as he,a as Z}from"./QFab.00852334.js";import{i as Be,N as j,O as $e,c as R,g as Xe,M as Pe,h as oe,s as Ee,aC as Ce,aD as Oe,aE as Ye,aF as I,aG as we,aH as re,aI as Ve,aJ as Fe,aK as J,aL as fe,aM as qe,aN as Ne,aO as de,aP as Ue,aQ as Ge,aR as Qe,aS as ze,aT as Ke,aU as He,_ as T,j as x,C as L,D as u,l as We,aV as G,r as y,am as m,d as l,aW as pe,aX as me,k as S,Q as ae,I as M,G as D,H as _,an as Ie,aY as Le,L as A,aZ as se,F as Q,B as le,a_ as Ze,a$ as W,b0 as ce,b1 as je,m as U,A as Je,b2 as ke,at as et,b3 as tt,b4 as nt,ar as ot,z as ue,b5 as Se,b6 as rt,ai as it,b7 as Re,J as at,E,b8 as O,K as st,al as lt}from"./index.424b4f7f.js";import{Q as ct,a as ut,b as ht,c as ft}from"./QPage.db46a2f3.js";import{C as dt}from"./CartoLayers.773c5494.js";import{u as be}from"./use-quasar.7517840a.js";import{Q as C,a as Y,b as k}from"./QItem.e089ab18.js";const pt={position:{type:String,default:"bottom-right",validator:o=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(o)},offset:{type:Array,validator:o=>o.length===2},expand:Boolean};function mt(){const{props:o,proxy:{$q:n}}=Xe(),t=Be($e,j);if(t===j)return console.error("QPageSticky needs to be child of QLayout"),j;const e=R(()=>{const d=o.position;return{top:d.indexOf("top")>-1,right:d.indexOf("right")>-1,bottom:d.indexOf("bottom")>-1,left:d.indexOf("left")>-1,vertical:d==="top"||d==="bottom",horizontal:d==="left"||d==="right"}}),r=R(()=>t.header.offset),i=R(()=>t.right.offset),a=R(()=>t.footer.offset),s=R(()=>t.left.offset),c=R(()=>{let d=0,p=0;const g=e.value,v=n.lang.rtl===!0?-1:1;g.top===!0&&r.value!==0?p=`${r.value}px`:g.bottom===!0&&a.value!==0&&(p=`${-a.value}px`),g.left===!0&&s.value!==0?d=`${v*s.value}px`:g.right===!0&&i.value!==0&&(d=`${-v*i.value}px`);const w={transform:`translate(${d}, ${p})`};return o.offset&&(w.margin=`${o.offset[1]}px ${o.offset[0]}px`),g.vertical===!0?(s.value!==0&&(w[n.lang.rtl===!0?"right":"left"]=`${s.value}px`),i.value!==0&&(w[n.lang.rtl===!0?"left":"right"]=`${i.value}px`)):g.horizontal===!0&&(r.value!==0&&(w.top=`${r.value}px`),a.value!==0&&(w.bottom=`${a.value}px`)),w}),h=R(()=>`q-page-sticky row flex-center fixed-${o.position} q-page-sticky--${o.expand===!0?"expand":"shrink"}`);function f(d){const p=Pe(d.default);return oe("div",{class:h.value,style:c.value},o.expand===!0?p:[oe("div",p)])}return{$layout:t,getStickyContent:f}}var ee=Ee({name:"QPageSticky",props:pt,setup(o,{slots:n}){const{getStickyContent:t}=mt();return()=>t(n)}}),P={ADD:"add",REMOVE:"remove"},De=globalThis&&globalThis.__extends||function(){var o=function(n,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},o(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");o(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_e={LENGTH:"length"},z=function(o){De(n,o);function n(t,e,r){var i=o.call(this,t)||this;return i.element=e,i.index=r,i}return n}(Ce),_t=function(o){De(n,o);function n(t,e){var r=o.call(this)||this;r.on,r.once,r.un;var i=e||{};if(r.unique_=!!i.unique,r.array_=t||[],r.unique_)for(var a=0,s=r.array_.length;a<s;++a)r.assertUnique_(r.array_[a],a);return r.updateLength_(),r}return n.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},n.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},n.prototype.forEach=function(t){for(var e=this.array_,r=0,i=e.length;r<i;++r)t(e[r],r,e)},n.prototype.getArray=function(){return this.array_},n.prototype.item=function(t){return this.array_[t]},n.prototype.getLength=function(){return this.get(_e.LENGTH)},n.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new z(P.ADD,e,t))},n.prototype.pop=function(){return this.removeAt(this.getLength()-1)},n.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},n.prototype.remove=function(t){for(var e=this.array_,r=0,i=e.length;r<i;++r)if(e[r]===t)return this.removeAt(r)},n.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new z(P.REMOVE,e,t)),e},n.prototype.setAt=function(t,e){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(e,t);var i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new z(P.REMOVE,i,t)),this.dispatchEvent(new z(P.ADD,e,t))}else{for(var a=r;a<t;++a)this.insertAt(a,void 0);this.insertAt(t,e)}},n.prototype.updateLength_=function(){this.set(_e.LENGTH,this.array_.length)},n.prototype.assertUnique_=function(t,e){for(var r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===t&&r!==e)throw new Oe(58)},n}(Ye),gt=_t;function vt(o,n,t,e,r){Te(o,n,t||0,e||o.length-1,r||yt)}function Te(o,n,t,e,r){for(;e>t;){if(e-t>600){var i=e-t+1,a=n-t+1,s=Math.log(i),c=.5*Math.exp(2*s/3),h=.5*Math.sqrt(s*c*(i-c)/i)*(a-i/2<0?-1:1),f=Math.max(t,Math.floor(n-a*c/i+h)),d=Math.min(e,Math.floor(n+(i-a)*c/i+h));Te(o,n,f,d,r)}var p=o[n],g=t,v=e;for(V(o,t,n),r(o[e],p)>0&&V(o,t,e);g<v;){for(V(o,g,v),g++,v--;r(o[g],p)<0;)g++;for(;r(o[v],p)>0;)v--}r(o[t],p)===0?V(o,t,v):(v++,V(o,v,e)),v<=n&&(t=v+1),n<=v&&(e=v-1)}}function V(o,n,t){var e=o[n];o[n]=o[t],o[t]=e}function yt(o,n){return o<n?-1:o>n?1:0}class xt{constructor(n=9){this._maxEntries=Math.max(4,n),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(n){let t=this.data;const e=[];if(!H(n,t))return e;const r=this.toBBox,i=[];for(;t;){for(let a=0;a<t.children.length;a++){const s=t.children[a],c=t.leaf?r(s):s;H(n,c)&&(t.leaf?e.push(s):ne(n,c)?this._all(s,e):i.push(s))}t=i.pop()}return e}collides(n){let t=this.data;if(!H(n,t))return!1;const e=[];for(;t;){for(let r=0;r<t.children.length;r++){const i=t.children[r],a=t.leaf?this.toBBox(i):i;if(H(n,a)){if(t.leaf||ne(n,a))return!0;e.push(i)}}t=e.pop()}return!1}load(n){if(!(n&&n.length))return this;if(n.length<this._minEntries){for(let e=0;e<n.length;e++)this.insert(n[e]);return this}let t=this._build(n.slice(),0,n.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const e=this.data;this.data=t,t=e}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(n){return n&&this._insert(n,this.data.height-1),this}clear(){return this.data=X([]),this}remove(n,t){if(!n)return this;let e=this.data;const r=this.toBBox(n),i=[],a=[];let s,c,h;for(;e||i.length;){if(e||(e=i.pop(),c=i[i.length-1],s=a.pop(),h=!0),e.leaf){const f=Et(n,e.children,t);if(f!==-1)return e.children.splice(f,1),i.push(e),this._condense(i),this}!h&&!e.leaf&&ne(e,r)?(i.push(e),a.push(s),s=0,c=e,e=e.children[0]):c?(s++,e=c.children[s],h=!1):e=null}return this}toBBox(n){return n}compareMinX(n,t){return n.minX-t.minX}compareMinY(n,t){return n.minY-t.minY}toJSON(){return this.data}fromJSON(n){return this.data=n,this}_all(n,t){const e=[];for(;n;)n.leaf?t.push(...n.children):e.push(...n.children),n=e.pop();return t}_build(n,t,e,r){const i=e-t+1;let a=this._maxEntries,s;if(i<=a)return s=X(n.slice(t,e+1)),$(s,this.toBBox),s;r||(r=Math.ceil(Math.log(i)/Math.log(a)),a=Math.ceil(i/Math.pow(a,r-1))),s=X([]),s.leaf=!1,s.height=r;const c=Math.ceil(i/a),h=c*Math.ceil(Math.sqrt(a));ge(n,t,e,h,this.compareMinX);for(let f=t;f<=e;f+=h){const d=Math.min(f+h-1,e);ge(n,f,d,c,this.compareMinY);for(let p=f;p<=d;p+=c){const g=Math.min(p+c-1,d);s.children.push(this._build(n,p,g,r-1))}}return $(s,this.toBBox),s}_chooseSubtree(n,t,e,r){for(;r.push(t),!(t.leaf||r.length-1===e);){let i=1/0,a=1/0,s;for(let c=0;c<t.children.length;c++){const h=t.children[c],f=te(h),d=Ft(n,h)-f;d<a?(a=d,i=f<i?f:i,s=h):d===a&&f<i&&(i=f,s=h)}t=s||t.children[0]}return t}_insert(n,t,e){const r=e?n:this.toBBox(n),i=[],a=this._chooseSubtree(r,this.data,t,i);for(a.children.push(n),N(a,r);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(r,i,t)}_split(n,t){const e=n[t],r=e.children.length,i=this._minEntries;this._chooseSplitAxis(e,i,r);const a=this._chooseSplitIndex(e,i,r),s=X(e.children.splice(a,e.children.length-a));s.height=e.height,s.leaf=e.leaf,$(e,this.toBBox),$(s,this.toBBox),t?n[t-1].children.push(s):this._splitRoot(e,s)}_splitRoot(n,t){this.data=X([n,t]),this.data.height=n.height+1,this.data.leaf=!1,$(this.data,this.toBBox)}_chooseSplitIndex(n,t,e){let r,i=1/0,a=1/0;for(let s=t;s<=e-t;s++){const c=q(n,0,s,this.toBBox),h=q(n,s,e,this.toBBox),f=It(c,h),d=te(c)+te(h);f<i?(i=f,r=s,a=d<a?d:a):f===i&&d<a&&(a=d,r=s)}return r||e-t}_chooseSplitAxis(n,t,e){const r=n.leaf?this.compareMinX:Ct,i=n.leaf?this.compareMinY:wt,a=this._allDistMargin(n,t,e,r),s=this._allDistMargin(n,t,e,i);a<s&&n.children.sort(r)}_allDistMargin(n,t,e,r){n.children.sort(r);const i=this.toBBox,a=q(n,0,t,i),s=q(n,e-t,e,i);let c=K(a)+K(s);for(let h=t;h<e-t;h++){const f=n.children[h];N(a,n.leaf?i(f):f),c+=K(a)}for(let h=e-t-1;h>=t;h--){const f=n.children[h];N(s,n.leaf?i(f):f),c+=K(s)}return c}_adjustParentBBoxes(n,t,e){for(let r=e;r>=0;r--)N(t[r],n)}_condense(n){for(let t=n.length-1,e;t>=0;t--)n[t].children.length===0?t>0?(e=n[t-1].children,e.splice(e.indexOf(n[t]),1)):this.clear():$(n[t],this.toBBox)}}function Et(o,n,t){if(!t)return n.indexOf(o);for(let e=0;e<n.length;e++)if(t(o,n[e]))return e;return-1}function $(o,n){q(o,0,o.children.length,n,o)}function q(o,n,t,e,r){r||(r=X(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let i=n;i<t;i++){const a=o.children[i];N(r,o.leaf?e(a):a)}return r}function N(o,n){return o.minX=Math.min(o.minX,n.minX),o.minY=Math.min(o.minY,n.minY),o.maxX=Math.max(o.maxX,n.maxX),o.maxY=Math.max(o.maxY,n.maxY),o}function Ct(o,n){return o.minX-n.minX}function wt(o,n){return o.minY-n.minY}function te(o){return(o.maxX-o.minX)*(o.maxY-o.minY)}function K(o){return o.maxX-o.minX+(o.maxY-o.minY)}function Ft(o,n){return(Math.max(n.maxX,o.maxX)-Math.min(n.minX,o.minX))*(Math.max(n.maxY,o.maxY)-Math.min(n.minY,o.minY))}function It(o,n){const t=Math.max(o.minX,n.minX),e=Math.max(o.minY,n.minY),r=Math.min(o.maxX,n.maxX),i=Math.min(o.maxY,n.maxY);return Math.max(0,r-t)*Math.max(0,i-e)}function ne(o,n){return o.minX<=n.minX&&o.minY<=n.minY&&n.maxX<=o.maxX&&n.maxY<=o.maxY}function H(o,n){return n.minX<=o.maxX&&n.minY<=o.maxY&&n.maxX>=o.minX&&n.maxY>=o.minY}function X(o){return{children:o,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ge(o,n,t,e,r){const i=[n,t];for(;i.length;){if(t=i.pop(),n=i.pop(),t-n<=e)continue;const a=n+Math.ceil((t-n)/e/2)*e;vt(o,a,n,t,r),i.push(n,a,a,t)}}var Lt=function(){function o(n){this.rbush_=new xt(n),this.items_={}}return o.prototype.insert=function(n,t){var e={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:t};this.rbush_.insert(e),this.items_[I(t)]=e},o.prototype.load=function(n,t){for(var e=new Array(t.length),r=0,i=t.length;r<i;r++){var a=n[r],s=t[r],c={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};e[r]=c,this.items_[I(s)]=c}this.rbush_.load(e)},o.prototype.remove=function(n){var t=I(n),e=this.items_[t];return delete this.items_[t],this.rbush_.remove(e)!==null},o.prototype.update=function(n,t){var e=this.items_[I(t)],r=[e.minX,e.minY,e.maxX,e.maxY];we(r,n)||(this.remove(t),this.insert(n,t))},o.prototype.getAll=function(){var n=this.rbush_.all();return n.map(function(t){return t.value})},o.prototype.getInExtent=function(n){var t={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]},e=this.rbush_.search(t);return e.map(function(r){return r.value})},o.prototype.forEach=function(n){return this.forEach_(this.getAll(),n)},o.prototype.forEachInExtent=function(n,t){return this.forEach_(this.getInExtent(n),t)},o.prototype.forEach_=function(n,t){for(var e,r=0,i=n.length;r<i;r++)if(e=t(n[r]),e)return e;return e},o.prototype.isEmpty=function(){return re(this.items_)},o.prototype.clear=function(){this.rbush_.clear(),this.items_={}},o.prototype.getExtent=function(n){var t=this.rbush_.toJSON();return Ve(t.minX,t.minY,t.maxX,t.maxY,n)},o.prototype.concat=function(n){this.rbush_.load(n.rbush_.all());for(var t in n.items_)this.items_[t]=n.items_[t]},o}(),ve=Lt,F={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function kt(o,n){return[[-1/0,-1/0,1/0,1/0]]}var St=!1;function Rt(o,n,t,e,r,i,a){var s=new XMLHttpRequest;s.open("GET",typeof o=="function"?o(t,e,r):o,!0),n.getType()=="arraybuffer"&&(s.responseType="arraybuffer"),s.withCredentials=St,s.onload=function(c){if(!s.status||s.status>=200&&s.status<300){var h=n.getType(),f=void 0;h=="json"||h=="text"?f=s.responseText:h=="xml"?(f=s.responseXML,f||(f=new DOMParser().parseFromString(s.responseText,"application/xml"))):h=="arraybuffer"&&(f=s.response),f?i(n.readFeatures(f,{extent:t,featureProjection:r}),n.readProjection(f)):a()}else a()},s.onerror=a,s.send()}function ye(o,n){return function(t,e,r,i,a){var s=this;Rt(o,n,t,e,r,function(c,h){s.addFeatures(c),i!==void 0&&i(c)},a||Fe)}}var Me=globalThis&&globalThis.__extends||function(){var o=function(n,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},o(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");o(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),b=function(o){Me(n,o);function n(t,e,r){var i=o.call(this,t)||this;return i.feature=e,i.features=r,i}return n}(Ce),bt=function(o){Me(n,o);function n(t){var e=this,r=t||{};e=o.call(this,{attributions:r.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:r.wrapX!==void 0?r.wrapX:!0})||this,e.on,e.once,e.un,e.loader_=Fe,e.format_=r.format,e.overlaps_=r.overlaps===void 0?!0:r.overlaps,e.url_=r.url,r.loader!==void 0?e.loader_=r.loader:e.url_!==void 0&&(J(e.format_,7),e.loader_=ye(e.url_,e.format_)),e.strategy_=r.strategy!==void 0?r.strategy:kt;var i=r.useSpatialIndex!==void 0?r.useSpatialIndex:!0;e.featuresRtree_=i?new ve:null,e.loadedExtentsRtree_=new ve,e.loadingExtentsCount_=0,e.nullGeometryFeatures_={},e.idIndex_={},e.uidIndex_={},e.featureChangeKeys_={},e.featuresCollection_=null;var a,s;return Array.isArray(r.features)?s=r.features:r.features&&(a=r.features,s=a.getArray()),!i&&a===void 0&&(a=new gt(s)),s!==void 0&&e.addFeaturesInternal(s),a!==void 0&&e.bindFeaturesCollection_(a),e}return n.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},n.prototype.addFeatureInternal=function(t){var e=I(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);var r=t.getGeometry();if(r){var i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new b(F.ADDFEATURE,t))},n.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[fe(e,qe.CHANGE,this.handleFeatureChange_,this),fe(e,Ne.PROPERTYCHANGE,this.handleFeatureChange_,this)]},n.prototype.addToIndex_=function(t,e){var r=!0,i=e.getId();return i!==void 0&&(i.toString()in this.idIndex_?r=!1:this.idIndex_[i.toString()]=e),r&&(J(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),r},n.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},n.prototype.addFeaturesInternal=function(t){for(var e=[],r=[],i=[],a=0,s=t.length;a<s;a++){var c=t[a],h=I(c);this.addToIndex_(h,c)&&r.push(c)}for(var a=0,f=r.length;a<f;a++){var c=r[a],h=I(c);this.setupChangeEvents_(h,c);var d=c.getGeometry();if(d){var p=d.getExtent();e.push(p),i.push(c)}else this.nullGeometryFeatures_[h]=c}if(this.featuresRtree_&&this.featuresRtree_.load(e,i),this.hasListener(F.ADDFEATURE))for(var a=0,g=r.length;a<g;a++)this.dispatchEvent(new b(F.ADDFEATURE,r[a]))},n.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(F.ADDFEATURE,function(r){e||(e=!0,t.push(r.feature),e=!1)}),this.addEventListener(F.REMOVEFEATURE,function(r){e||(e=!0,t.remove(r.feature),e=!1)}),t.addEventListener(P.ADD,function(r){e||(e=!0,this.addFeature(r.element),e=!1)}.bind(this)),t.addEventListener(P.REMOVE,function(r){e||(e=!0,this.removeFeature(r.element),e=!1)}.bind(this)),this.featuresCollection_=t},n.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){var r=this.featureChangeKeys_[e];r.forEach(de)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var i=function(c){this.removeFeatureInternal(c)}.bind(this);this.featuresRtree_.forEach(i);for(var a in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[a])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var s=new b(F.CLEAR);this.dispatchEvent(s),this.changed()},n.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},n.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,function(i){var a=i.getGeometry();if(a.intersectsCoordinate(t))return e(i)})},n.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},n.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(r){var i=r.getGeometry();if(i.intersectsExtent(t)){var a=e(r);if(a)return a}})},n.prototype.getFeaturesCollection=function(){return this.featuresCollection_},n.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),re(this.nullGeometryFeatures_)||Ue(t,Ge(this.nullGeometryFeatures_))),t},n.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(r){e.push(r)}),e},n.prototype.getFeaturesInExtent=function(t,e){var r=this;if(this.featuresRtree_){var i=e&&e.canWrapX()&&this.getWrapX();if(!i)return this.featuresRtree_.getInExtent(t);var a=Qe(t,e);return[].concat.apply([],a.map(function(s){return r.featuresRtree_.getInExtent(s)}))}else return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},n.prototype.getClosestFeatureToCoordinate=function(t,e){var r=t[0],i=t[1],a=null,s=[NaN,NaN],c=1/0,h=[-1/0,-1/0,1/0,1/0],f=e||Ke;return this.featuresRtree_.forEachInExtent(h,function(d){if(f(d)){var p=d.getGeometry(),g=c;if(c=p.closestPointXY(r,i,s,c),c<g){a=d;var v=Math.sqrt(c);h[0]=r-v,h[1]=i-v,h[2]=r+v,h[3]=i+v}}}),a},n.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},n.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return e!==void 0?e:null},n.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return e!==void 0?e:null},n.prototype.getFormat=function(){return this.format_},n.prototype.getOverlaps=function(){return this.overlaps_},n.prototype.getUrl=function(){return this.url_},n.prototype.handleFeatureChange_=function(t){var e=t.target,r=I(e),i=e.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[r]=e);else{var a=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,e)):this.featuresRtree_&&this.featuresRtree_.update(a,e)}var s=e.getId();if(s!==void 0){var c=s.toString();this.idIndex_[c]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[c]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[r]=e;this.changed(),this.dispatchEvent(new b(F.CHANGEFEATURE,e))},n.prototype.hasFeature=function(t){var e=t.getId();return e!==void 0?e in this.idIndex_:I(t)in this.uidIndex_},n.prototype.isEmpty=function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&re(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0},n.prototype.loadFeatures=function(t,e,r){for(var i=this.loadedExtentsRtree_,a=this.strategy_(t,e,r),s=function(d,p){var g=a[d],v=i.forEachInExtent(g,function(w){return He(w.extent,g)});v||(++c.loadingExtentsCount_,c.dispatchEvent(new b(F.FEATURESLOADSTART)),c.loader_.call(c,g,e,r,function(w){--this.loadingExtentsCount_,this.dispatchEvent(new b(F.FEATURESLOADEND,void 0,w))}.bind(c),function(){--this.loadingExtentsCount_,this.dispatchEvent(new b(F.FEATURESLOADERROR))}.bind(c)),i.insert(g,{extent:g.slice()}))},c=this,h=0,f=a.length;h<f;++h)s(h);this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0},n.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),o.prototype.refresh.call(this)},n.prototype.removeLoadedExtent=function(t){var e=this.loadedExtentsRtree_,r;e.forEachInExtent(t,function(i){if(we(i.extent,t))return r=i,!0}),r&&e.remove(r)},n.prototype.removeFeature=function(t){if(!!t){var e=I(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);var r=this.removeFeatureInternal(t);r&&this.changed()}},n.prototype.removeFeatureInternal=function(t){var e=I(t),r=this.featureChangeKeys_[e];if(!!r){r.forEach(de),delete this.featureChangeKeys_[e];var i=t.getId();return i!==void 0&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new b(F.REMOVEFEATURE,t)),t}},n.prototype.removeFromIdIndex_=function(t){var e=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===t){delete this.idIndex_[r],e=!0;break}return e},n.prototype.setLoader=function(t){this.loader_=t},n.prototype.setUrl=function(t){J(this.format_,7),this.url_=t,this.setLoader(ye(t,this.format_))},n}(ze),Dt=bt;const Tt={name:"PageFullScreen",methods:{tweak(){return{height:this.$q.screen.height-50+"px"}},myTweak(o){o||(o=0);const n=this.$q.platform.is.cordova?`calc(100vh - ${o}px)`:window.innerHeight-o+"px";return this.$store.state.windowSize=n,{minHeight:n}}}};function Mt(o,n,t,e,r,i){return x(),L(ct,{"style-fn":i.tweak,class:"scroll-y fhpadd"},{default:u(()=>[We(o.$slots,"default")]),_:3},8,["style-fn"])}var At=T(Tt,[["render",Mt]]);const Bt={setup(){const o=G(),n=y(5),t=y("red");return{store:o,strokeWidth:n,strokeColor:t}},computed:{myTrack(){return this.store.getMyTrack}}};function $t(o,n,t,e,r,i){const a=m("ol-geom-line-string"),s=m("ol-style-stroke"),c=m("ol-style"),h=m("ol-feature"),f=m("ol-source-vector"),d=m("ol-vector-layer");return x(),L(d,null,{default:u(()=>[l(f,null,{default:u(()=>[l(h,null,{default:u(()=>[l(a,{coordinates:i.myTrack},null,8,["coordinates"]),l(c,null,{default:u(()=>[l(s,{color:e.strokeColor,width:e.strokeWidth},null,8,["color","width"])]),_:1})]),_:1})]),_:1})]),_:1})}var Xt=T(Bt,[["render",$t]]);const Pt=oe("div",{class:"q-space"});var ie=Ee({name:"QSpace",setup(){return()=>Pt}});const Ot={setup(){const o=y(!0),n=y("top"),t=G(),e=y(3),r=y("green");return{dialog:o,position:n,store:t,strokeWidth:e,strokeColor:r}},data(){return{currentCenter:this.center,currentZoom:this.zoom,currentResolution:this.resolution,fixedCenter:!1,name:this.$route.query.name}},computed:{bearing(){return(([t,e],[r,i])=>{const a=r-t,s=i-e;return(Math.atan2(a,s)*180/Math.PI+360)%360})(this.store.getNavigateTo[1],this.store.getNavigateTo[0])-this.store.getRotation},navigateTo(){return this.store.getNavigateTo},navigationInProgress(){return this.store.getNavigateTo.length>0},distance(){const o=new pe(this.store.getNavigateTo),n=me(o);return n>1e3?(n/1e3).toFixed(2):parseInt(n)},distanceUnit(){const o=new pe(this.store.getNavigateTo);return me(o)>1e3?"km":"m"}},methods:{stopNavigation(){this.store.stopNavigation()}}},Yt={class:"text-weight-bold"},Vt={class:"text-grey"};function qt(o,n,t,e,r,i){const a=m("ol-geom-line-string"),s=m("ol-style-stroke"),c=m("ol-style"),h=m("ol-feature"),f=m("ol-source-vector"),d=m("ol-vector-layer");return x(),S(Q,null,[l(se,{modelValue:i.navigationInProgress,"onUpdate:modelValue":n[0]||(n[0]=p=>i.navigationInProgress=p),position:e.position,seamless:"",class:"q-dialog__top50"},{default:u(()=>[l(ae,{style:{width:"350px"}},{default:u(()=>[l(M,{class:"row items-center no-wrap"},{default:u(()=>[D("div",null,[D("div",Yt,_(o.$t("goTo"))+": "+_(r.name),1),D("div",Vt,_(o.$t("distance"))+": "+_(i.distance)+" "+_(i.distanceUnit),1)]),l(ie),l(Ie,{name:"navigation",style:Le({rotate:i.bearing+"deg"}),size:"lg"},null,8,["style"]),l(A,{flat:"",round:"",icon:"stop",onClick:i.stopNavigation},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue","position"]),l(d,null,{default:u(()=>[l(f,null,{default:u(()=>[l(h,null,{default:u(()=>[l(a,{coordinates:i.navigateTo},null,8,["coordinates"]),l(c,null,{default:u(()=>[l(s,{color:e.strokeColor,width:e.strokeWidth},null,8,["color","width"])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Nt=T(Ot,[["render",qt]]);const Ut={props:["view"],emits:["centerChanged"],components:{TrackingLayer:Xt,NavigationLayer:Nt},setup(){const o=G(),n=y([]),t=y([]),{myLocation:e}=le(o);return{store:o,myLocationCoordinates:n,myLocationFeatures:t,myLocation:e}},computed:{rotation(){return this.store.getRotation}},watch:{myLocation(o,n){const t=Ze([o.longitude,o.latitude],this.store.getMyLocationAccuracy);this.myLocationFeatures=[new W(t.transform("EPSG:4326",this.store.getProjection)),new W(new ce(this.store.getMyLocationCoordinates))],this.myLocationCoordinates=o.coordinates,this.$emit("centerChanged",this.store.getMyLocationCoordinates)}}};function Gt(o,n,t,e,r,i){const a=m("ol-source-vector"),s=m("ol-vector-layer"),c=m("ol-overlay"),h=m("TrackingLayer"),f=m("NavigationLayer");return x(),S(Q,null,[l(s,null,{default:u(()=>[l(a,{features:e.myLocationFeatures},null,8,["features"])]),_:1}),e.myLocationFeatures.length>0?(x(),L(c,{key:0,position:e.myLocationCoordinates,positioning:"center-center"},{default:u(d=>[l(Ie,{name:"navigation",class:je(d),style:Le({rotate:i.rotation+"deg"}),size:"lg"},null,8,["class","style"])]),_:1},8,["position"])):U("",!0),l(h),l(f)],64)}var Qt=T(Ut,[["render",Gt]]);const zt={setup(){const o=Je(),n=y([]),t=y(new Dt);return o.loadForMap().then(()=>{o.customLocationsForMap.map(e=>n.value.push(e))}),{vectorSource:t,store:o,customLocations:n}}};function Kt(o,n,t,e,r,i){const a=m("ol-geom-point"),s=m("ol-style-icon"),c=m("ol-style"),h=m("ol-feature"),f=m("ol-source-vector"),d=m("ol-vector-layer");return x(),L(d,null,{default:u(()=>[l(f,{ref:"vectorSource"},{default:u(()=>[(x(!0),S(Q,null,ke(e.customLocations,p=>(x(),L(h,{key:p.id,properties:{id:p.id,name:p.name,lat:p.lat.toFixed(5),lng:p.lng.toFixed(5),type:"poi"}},{default:u(()=>[l(a,{coordinates:p.latLng},null,8,["coordinates"]),l(c,null,{default:u(()=>[l(s,{src:p.icon,scale:1},null,8,["src"])]),_:2},1024)]),_:2},1032,["properties"]))),128))]),_:1},512)]),_:1})}var Ht=T(zt,[["render",Kt]]);function xe(o){if(o===!1)return 0;if(o===!0||o===void 0)return 1;const n=parseInt(o,10);return isNaN(n)?0:n}var Wt=et({name:"close-popup",beforeMount(o,{value:n}){const t={depth:xe(n),handler(e){t.depth!==0&&setTimeout(()=>{const r=tt(o);r!==void 0&&nt(r,e,t.depth)})},handlerKey(e){ot(e,13)===!0&&t.handler(e)}};o.__qclosepopup=t,o.addEventListener("click",t.handler),o.addEventListener("keyup",t.handlerKey)},updated(o,{value:n,oldValue:t}){n!==t&&(o.__qclosepopup.depth=xe(n))},beforeUnmount(o){const n=o.__qclosepopup;o.removeEventListener("click",n.handler),o.removeEventListener("keyup",n.handlerKey),delete o.__qclosepopup}});const Zt={setup(){const o=be(),n=ue(),t=G();n.hideDrawer();const e=y(!1),{showBottomDrawer:r}=le(n);return{dialog:e,confirmDialog:o.dialog,mapStore:n,locationStore:t,showBottomDrawer:r}},computed:{clickedFeature(){return this.mapStore.getClickedFeature},drawerLoading(){return this.mapStore.getDrawerLoading}},methods:{hideDrawer(){this.mapStore.hideDrawer()},goTo(){const o=`[${this.clickedFeature.id}] ${this.clickedFeature.name}`;this.confirmDialog({title:`${this.$t("confirm")}`,message:`${this.$t(this.clickedFeature.type==="cave"?"navigateToCave":"navigateToCustomLocation")}: ${o}`,cancel:!0,persistent:!0}).onOk(()=>{const n=Se([this.clickedFeature.lng,this.clickedFeature.lat]),t=new W(new ce(n));this.locationStore.startNavigation(t)})},info(o){this.$router.push({name:this.clickedFeature.type==="cave"?"caves-details":"custom-locations-details",params:{id:o}})}},watch:{showBottomDrawer(o,n){this.dialog=o}}},jt={class:"q-pa-md q-gutter-sm"},Jt={key:0,class:"text-weight-bold"},en={key:1,class:"text-weight-bold"},tn={key:0,class:"text-grey"},nn={class:"text-grey"};function on(o,n,t,e,r,i){return x(),S("div",jt,[l(se,{modelValue:e.dialog,"onUpdate:modelValue":n[2]||(n[2]=a=>e.dialog=a),position:"bottom",onHide:i.hideDrawer,seamless:""},{default:u(()=>[l(ae,{style:{width:"350px"}},{default:u(()=>[i.drawerLoading?(x(),L(M,{key:0,class:"row justify-center items-center"},{default:u(()=>[l(rt,{color:"primary",size:"3em",thickness:2})]),_:1})):(x(),S(Q,{key:1},[l(M,{class:"row items-center q-pb-none"},{default:u(()=>[i.clickedFeature.type!=="click"?(x(),S("div",Jt,"["+_(i.clickedFeature.id)+"] "+_(i.clickedFeature.name),1)):(x(),S("div",en,_(o.$t("clickInfo"))+":",1)),l(ie),it(l(A,{icon:"close",flat:"",round:"",dense:""},null,512),[[Wt]])]),_:1}),l(M,{class:"row items-center no-wrap"},{default:u(()=>[D("div",null,[i.clickedFeature.type==="cave"?(x(),S("div",tn,_(o.$t("length"))+": "+_(i.clickedFeature.length)+" m, "+_(o.$t("depth"))+": "+_(i.clickedFeature.depth)+" m",1)):U("",!0),D("div",nn,_(o.$t("lat"))+": "+_(i.clickedFeature.lat)+", "+_(o.$t("lng"))+": "+_(i.clickedFeature.lng),1)]),l(ie),i.clickedFeature.type!=="click"?(x(),L(A,{key:0,flat:"",round:"",icon:"info",onClick:n[0]||(n[0]=a=>i.info(i.clickedFeature.id))})):U("",!0),l(A,{flat:"",round:"",icon:"assist_walker",onClick:n[1]||(n[1]=a=>i.goTo())})]),_:1})],64))]),_:1})]),_:1},8,["modelValue","onHide"])])}var rn=T(Zt,[["render",on]]);const an={setup(){const{dialog:o,notify:n}=be(),t=Re(),e=ue(),{getShowDialog:r,progress:i,allContent:a,currentContent:s}=le(t),c=y(!1),h=y("");return{notify:n,offlineDataName:h,offlineStore:t,mapStore:e,getShowDialog:r,selectedItems:y([]),confirmDialog:y(!1),confirmDownloadDialog:o,progress:i,allContent:a,currentContent:s,progressLabel:R(()=>(i.value*100).toFixed(2)+"%"),allProgressLabel:R(()=>s.value+"/"+a.value),inProgress:c}},watch:{getShowDialog(o,n){this.confirmDialog=o}},methods:{async onSubmit(){if(this.offlineDataName.length===0){this.notify({message:this.$t("offlineNameMissing"),color:"red"});return}this.confirmDownloadDialog({title:`${this.$t("confirm")}`,message:`${this.$t("confirmDownloadOfArea")}`,cancel:!0,persistent:!0}).onOk(async()=>{this.inProgress=!0;try{await this.offlineStore.transferData([...this.selectedItems,"cavesLayer"],this.mapStore.getExtent,this.offlineDataName)}catch(o){console.log(o)}finally{this.onReset()}})},onReset(){this.inProgress=!1,this.confirmDialog=!1,this.offlineStore.hideDialog()}}},sn={class:"q-pa-md q-gutter-sm"},ln={class:"text-h6"},cn={class:"text-grey-6"},un={class:"absolute-full flex flex-center"};function hn(o,n,t,e,r,i){return x(),S("div",sn,[l(se,{modelValue:e.confirmDialog,"onUpdate:modelValue":n[6]||(n[6]=a=>e.confirmDialog=a),noBackdropDismiss:""},{default:u(()=>[l(ae,{style:{width:"300px"},class:"q-px-sm q-pb-md"},{default:u(()=>[l(ut,{onSubmit:i.onSubmit,onReset:i.onReset,class:"q-gutter-md"},{default:u(()=>[l(M,null,{default:u(()=>[D("div",ln,_(o.$t("dataForOffline")),1)]),_:1}),l(M,null,{default:u(()=>[l(at,{disable:e.inProgress,modelValue:e.offlineDataName,"onUpdate:modelValue":n[0]||(n[0]=a=>e.offlineDataName=a),label:o.$t("offlineDataName"),dense:"",rules:[a=>a&&a.length>0||"Please type something"]},null,8,["disable","modelValue","label","rules"])]),_:1}),l(C,{header:""},{default:u(()=>[E(_(o.$t("mapLayers")),1)]),_:1}),l(Y,{dense:""},{default:u(()=>[l(k,{avatar:""},{default:u(()=>[l(O,{disable:e.inProgress,modelValue:e.selectedItems,"onUpdate:modelValue":n[1]||(n[1]=a=>e.selectedItems=a),val:"osm",color:"teal"},null,8,["disable","modelValue"])]),_:1}),l(k,null,{default:u(()=>[l(C,null,{default:u(()=>[E(_(o.$t("osmMapLayer")),1)]),_:1}),l(C,{caption:""},{default:u(()=>[E(_(o.$t("osmMapLayerDescription")),1)]),_:1})]),_:1})]),_:1}),l(Y,{dense:""},{default:u(()=>[l(k,{avatar:""},{default:u(()=>[l(O,{disable:e.inProgress,modelValue:e.selectedItems,"onUpdate:modelValue":n[2]||(n[2]=a=>e.selectedItems=a),val:"lidar",color:"teal"},null,8,["disable","modelValue"])]),_:1}),l(k,null,{default:u(()=>[l(C,null,{default:u(()=>[E(_(o.$t("lidarMapLayer")),1)]),_:1}),l(C,{caption:""},{default:u(()=>[E(_(o.$t("lidarMapLayerDescription")),1)]),_:1})]),_:1})]),_:1}),l(Y,{dense:""},{default:u(()=>[l(k,{avatar:"",top:""},{default:u(()=>[l(O,{disable:e.inProgress,modelValue:e.selectedItems,"onUpdate:modelValue":n[3]||(n[3]=a=>e.selectedItems=a),val:"ortophoto",color:"teal"},null,8,["disable","modelValue"])]),_:1}),l(k,null,{default:u(()=>[l(C,null,{default:u(()=>[E(_(o.$t("orthoMapLayer")),1)]),_:1}),l(C,{caption:""},{default:u(()=>[E(_(o.$t("orthoMapLayerDescription")),1)]),_:1})]),_:1})]),_:1}),l(C,{header:""},{default:u(()=>[E(_(o.$t("caves")),1)]),_:1}),l(Y,{dense:""},{default:u(()=>[l(k,{avatar:"",top:""},{default:u(()=>[l(O,{disable:e.inProgress,modelValue:e.selectedItems,"onUpdate:modelValue":n[4]||(n[4]=a=>e.selectedItems=a),val:"caves",color:"teal"},null,8,["disable","modelValue"])]),_:1}),l(k,null,{default:u(()=>[l(C,null,{default:u(()=>[E(_(o.$t("caveData")),1)]),_:1}),l(C,{caption:""},{default:u(()=>[E(_(o.$t("caveDataDescription")),1)]),_:1})]),_:1})]),_:1}),l(C,{header:""},{default:u(()=>[E(_(o.$t("customLocations")),1)]),_:1}),l(Y,{dense:""},{default:u(()=>[l(k,{avatar:"",top:""},{default:u(()=>[l(O,{disable:e.inProgress,modelValue:e.selectedItems,"onUpdate:modelValue":n[5]||(n[5]=a=>e.selectedItems=a),val:"customLocations",color:"teal"},null,8,["disable","modelValue"])]),_:1}),l(k,null,{default:u(()=>[l(C,null,{default:u(()=>[E(_(o.$t("customLocationsData")),1)]),_:1}),l(C,{caption:""},{default:u(()=>[E(_(o.$t("customLocationsDataDescription")),1)]),_:1})]),_:1})]),_:1}),e.inProgress?(x(),L(M,{key:0,class:"text-center q-pa-none"},{default:u(()=>[D("p",cn,_(o.$t("fetchingData"))+": "+_(e.allProgressLabel),1),l(ht,{"instant-feedback":!0,size:"50px",value:e.progress,color:"accent",class:"q-mt-sm"},{default:u(()=>[D("div",un,[l(ft,{color:"white","text-color":"accent",label:e.progressLabel},null,8,["label"])])]),_:1},8,["value"])]),_:1})):U("",!0),l(st,{align:"center",class:"q-mt-md"},{default:u(()=>[l(A,{disable:e.inProgress,label:o.$t("download"),type:"submit",color:"primary"},null,8,["disable","label"]),l(A,{label:o.$t("cancel"),type:"reset",color:"primary",flat:"",class:"q-ml-sm"},null,8,["label"])]),_:1})]),_:1},8,["onSubmit","onReset"])]),_:1})]),_:1},8,["modelValue"])])}var fn=T(an,[["render",hn]]);const dn=lt({name:"IndexPage",components:{PageFullScreen:At,CartoLayers:dt,LocationLayers:Qt,CustomLocationLayers:Ht,DetailsDrawer:rn,OfflineConfirmDialog:fn},setup(){const o=G(),n=ue(),t=Re(),e=y([1637531,5766419]),r=y("EPSG:3857"),i=y(8),a=y(!1),s=y([]),c=y(null),h=y(""),f=y("");return n.saveMapRef(f),{locationStore:o,center:e,projection:r,zoom:i,view:h,mapRef:f,markLocations:s,goTo:c,customLocations:a,mapStore:n,offlineStore:t}},data(){if(this.$route.query.lat&&this.$route.query.lng){const o=Se([this.$route.query.lng,this.$route.query.lat]),n=new W(new ce(o));this.markLocations=[n],this.center=o,this.zoom=15,this.goTo=this.$route.query.navigate?n:null}return this.customLocations=this.$route.query.customLocation,{currentCenter:this.center,currentZoom:this.zoom,currentResolution:this.resolution,fixedCenter:!1}},computed:{trackLocationIcon(){return this.locationStore.getLocationTracking},navigationActive(){return this.locationStore.getNavigationActive},isCenterFixed(){return this.fixedCenter}},methods:{async onMapClick(o){if(o.coordinate){const n=this.mapRef.map.getFeaturesAtPixel(o.pixel);await this.mapStore.mapClick(o.coordinate,n)}},zoomChanged(o){this.currentZoom=o,this.mapStore.updateExtent(this.mapRef.map.getView().calculateExtent())},trackingClicked(o){this.locationStore.toggleLocationTracking()},myLocationClicked(o){this.center=this.locationStore.getMyLocationCoordinates,this.fixedCenter=!0,this.zoom=this.zoom<15?15:this.currentZoom},resolutionChanged(o){this.currentResolution=o},centerChanged(o){this.view!==""&&(this.currentCenter=o,this.view.getInteracting()?this.fixedCenter=!1:this.fixedCenter&&(this.center=o))},onScreenOrientationChange(){this.mapRef.updateSize()},storeDataForOffline(){this.offlineStore.showDialog()}},watch:{view(o,n){this.locationStore.initialize(o.getProjection()),this.goTo&&this.locationStore.startNavigation(this.goTo)}},mounted(){this.mapRef.map.on("click",async o=>{await this.onMapClick(o)})}});function pn(o,n,t,e,r,i){const a=m("ol-view"),s=m("CartoLayers"),c=m("LocationLayers"),h=m("CustomLocationLayers"),f=m("ol-source-vector"),d=m("ol-vector-layer"),p=m("ol-map"),g=m("DetailsDrawer"),v=m("OfflineConfirmDialog"),w=m("PageFullScreen");return x(),L(w,{style:{background:"#eee"}},{default:u(()=>[l(p,{loadTilesWhileAnimating:"",loadTilesWhileInteracting:"",style:{height:"100%"},moveTolerance:5,ref:"mapRef"},{default:u(()=>[l(a,{ref:"view",enableRotation:!1,center:o.center,zoom:o.zoom,projection:o.projection,onZoomChanged:o.zoomChanged,onCenterChanged:o.centerChanged,onResolutionChanged:o.resolutionChanged},null,8,["center","zoom","projection","onZoomChanged","onCenterChanged","onResolutionChanged"]),l(s),l(c,{view:o.view,onCenterChanged:o.centerChanged},null,8,["view","onCenterChanged"]),o.customLocations?(x(),L(h,{key:0})):U("",!0),l(d,null,{default:u(()=>[l(f,{features:o.markLocations},null,8,["features"])]),_:1}),l(Ae,{onResize:o.onScreenOrientationChange},null,8,["onResize"])]),_:1},512),l(ee,{position:"top-right",offset:[18,18]},{default:u(()=>[l(he,{size:"100px","external-label":"",color:"purple",icon:"layers",direction:"left"},{default:u(()=>[(x(!0),S(Q,null,ke(o.mapStore.getLayers,B=>(x(),L(Z,{key:B.name,padding:"3px","label-class":"bg-grey-3 text-grey-8","external-label":"","label-position":"bottom",color:B.active?"red":"primary",onClick:mn=>B.active=!B.active,icon:`img:${B.preview}`,label:B.label},null,8,["color","onClick","icon","label"]))),128))]),_:1})]),_:1}),l(ee,{position:"bottom-left",offset:[18,18]},{default:u(()=>[l(A,{fab:"",icon:o.isCenterFixed?"my_location":"location_searching",color:"accent",onClick:o.myLocationClicked},null,8,["icon","onClick"])]),_:1}),l(ee,{position:"bottom-right",offset:[18,18]},{default:u(()=>[l(he,{size:"100px","vertical-actions-align":"right",glossy:"",color:"purple",icon:"add",direction:"up"},{default:u(()=>[l(Z,{disable:o.currentZoom<14,"label-position":"right",color:"primary",onClick:o.storeDataForOffline,icon:"wifi_off",label:"Offline"},null,8,["disable","onClick"]),l(Z,{"label-position":"right",color:"secondary",icon:o.trackLocationIcon?"stop_circle":"play_arrow",label:"Start track",onClick:o.trackingClicked},null,8,["icon","onClick"])]),_:1})]),_:1}),l(g),l(v)]),_:1})}var wn=T(dn,[["render",pn]]);export{wn as default};
