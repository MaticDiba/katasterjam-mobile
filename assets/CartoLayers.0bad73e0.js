import{aC as Pt,aU as Ft,aV as w,aW as Gr,aX as Xr,aY as X,aZ as he,a_ as ct,a$ as qt,b0 as Be,b1 as fe,b2 as _t,b3 as Nr,b4 as qe,aF as b,b5 as ce,b6 as Dr,b7 as Tt,b8 as Je,b9 as jr,ba as Qe,aH as ve,bb as Yr,bc as Wr,bd as et,be as Jt,aI as Zr,bf as Me,M as Ur,bg as H,bh as pe,bi as $r,bj as br,bk as zr,bl as kr,bm as Qt,bn as Nt,bo as zt,bp as Kr,bq as Vr,br as Hr,bs as Ae,bt as tr,bu as kt,bv as te,aE as ee,bw as Lt,bx as It,by as Br,bz as qr,bA as Jr,_ as er,r as re,al as wt,j as Dt,P as rr,O as Qr,k as Le,d as Gt,Q as Ie,F as Ge,aO as tn}from"./index.18ea7970.js";var B=typeof Object.assign=="function"?Object.assign:function(n,e){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(n),r=1,i=arguments.length;r<i;++r){var o=arguments[r];if(o!=null)for(var a in o)o.hasOwnProperty(a)&&(t[a]=o[a])}return t};function nr(n){for(var e in n)delete n[e]}var ss=typeof Object.values=="function"?Object.values:function(n){var e=[];for(var t in n)e.push(n[t]);return e};function ir(n){var e;for(e in n)return!1;return!e}var en=function(){function n(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}return n.prototype.preventDefault=function(){this.defaultPrevented=!0},n.prototype.stopPropagation=function(){this.propagationStopped=!0},n}(),ge=en,rn={PROPERTYCHANGE:"propertychange"},nn=function(){function n(){this.disposed=!1}return n.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},n.prototype.disposeInternal=function(){},n}(),on=nn;function an(n,e,t){for(var r,i,o=t||de,a=0,s=n.length,u=!1;a<s;)r=a+(s-a>>1),i=+o(n[r],e),i<0?a=r+1:(s=r,u=!i);return u?a:~a}function de(n,e){return n>e?1:n<e?-1:0}function sn(n,e){return n.indexOf(e)>=0}function un(n,e,t){var r=n.length;if(n[0]<=e)return 0;if(e<=n[r-1])return r-1;var i=void 0;if(t>0){for(i=1;i<r;++i)if(n[i]<e)return i-1}else if(t<0){for(i=1;i<r;++i)if(n[i]<=e)return i}else for(i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return typeof t=="function"?t(e,n[i-1],n[i])>0?i-1:i:n[i-1]-e<e-n[i]?i-1:i}return r-1}function rt(n,e){for(var t=Array.isArray(e)?e:[e],r=t.length,i=0;i<r;i++)n[n.length]=t[i]}function yt(n,e){for(var t=n.length>>>0,r,i=0;i<t;i++)if(r=n[i],e(r,i,n))return r;return null}function ln(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function Kt(n,e){var t,r=!n.every(function(i,o){return t=o,!e(i,o,n)});return r?t:-1}function hn(n,e,t){var r=e||de;return n.every(function(i,o){if(o===0)return!0;var a=r(n[o-1],i);return!(a>0||t&&a===0)})}function us(){return!0}function Xe(){}function fn(n){var e=!1,t,r,i;return function(){var o=Array.prototype.slice.call(arguments);return(!e||this!==i||!ln(o,r))&&(e=!0,i=this,r=o,t=n.apply(this,arguments)),t}}var cn=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vn=function(n){cn(e,n);function e(t){var r=n.call(this)||this;return r.eventTarget_=t,r.pendingRemovals_=null,r.dispatching_=null,r.listeners_=null,r}return e.prototype.addEventListener=function(t,r){if(!(!t||!r)){var i=this.listeners_||(this.listeners_={}),o=i[t]||(i[t]=[]);o.indexOf(r)===-1&&o.push(r)}},e.prototype.dispatchEvent=function(t){var r=typeof t=="string",i=r?t:t.type,o=this.listeners_&&this.listeners_[i];if(!!o){var a=r?new ge(t):t;a.target||(a.target=this.eventTarget_||this);var s=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});i in s||(s[i]=0,u[i]=0),++s[i];for(var l,h=0,f=o.length;h<f;++h)if("handleEvent"in o[h]?l=o[h].handleEvent(a):l=o[h].call(this,a),l===!1||a.propagationStopped){l=!1;break}if(--s[i]===0){var c=u[i];for(delete u[i];c--;)this.removeEventListener(i,Xe);delete s[i]}return l}},e.prototype.disposeInternal=function(){this.listeners_&&nr(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1},e.prototype.removeEventListener=function(t,r){var i=this.listeners_&&this.listeners_[t];if(i){var o=i.indexOf(r);o!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[o]=Xe,++this.pendingRemovals_[t]):(i.splice(o,1),i.length===0&&delete this.listeners_[t]))}},e}(on),ye=vn,at={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Rt(n,e,t,r,i){if(r&&r!==n&&(t=t.bind(r)),i){var o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}var a={target:n,type:e,listener:t};return n.addEventListener(e,t),a}function jt(n,e,t,r){return Rt(n,e,t,r,!0)}function mt(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),nr(n))}var pn=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zt=function(n){pn(e,n);function e(){var t=n.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return e.prototype.changed=function(){++this.revision_,this.dispatchEvent(at.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,r){if(Array.isArray(t)){for(var i=t.length,o=new Array(i),a=0;a<i;++a)o[a]=Rt(this,t[a],r);return o}else return Rt(this,t,r)},e.prototype.onceInternal=function(t,r){var i;if(Array.isArray(t)){var o=t.length;i=new Array(o);for(var a=0;a<o;++a)i[a]=jt(this,t[a],r)}else i=jt(this,t,r);return r.ol_key=i,i},e.prototype.unInternal=function(t,r){var i=r.ol_key;if(i)gn(i);else if(Array.isArray(t))for(var o=0,a=t.length;o<a;++o)this.removeEventListener(t[o],r);else this.removeEventListener(t,r)},e}(ye);Zt.prototype.on;Zt.prototype.once;Zt.prototype.un;function gn(n){if(Array.isArray(n))for(var e=0,t=n.length;e<t;++e)mt(n[e]);else mt(n)}var dn=Zt,or=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ne=function(n){or(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.key=r,o.oldValue=i,o}return e}(ge),yn=function(n){or(e,n);function e(t){var r=n.call(this)||this;return r.on,r.once,r.un,Pt(r),r.values_=null,t!==void 0&&r.setProperties(t),r}return e.prototype.get=function(t){var r;return this.values_&&this.values_.hasOwnProperty(t)&&(r=this.values_[t]),r},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&B({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,r){var i;i="change:".concat(t),this.hasListener(i)&&this.dispatchEvent(new Ne(i,t,r)),i=rn.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Ne(i,t,r))},e.prototype.addChangeListener=function(t,r){this.addEventListener("change:".concat(t),r)},e.prototype.removeChangeListener=function(t,r){this.removeEventListener("change:".concat(t),r)},e.prototype.set=function(t,r,i){var o=this.values_||(this.values_={});if(i)o[t]=r;else{var a=o[t];o[t]=r,a!==r&&this.notify(t,a)}},e.prototype.setProperties=function(t,r){for(var i in t)this.set(i,t[i],r)},e.prototype.applyProperties=function(t){!t.values_||B(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,r){if(this.values_&&t in this.values_){var i=this.values_[t];delete this.values_[t],ir(this.values_)&&(this.values_=null),r||this.notify(t,i)}},e}(dn),_e=yn,st=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"";st.indexOf("firefox");var _n=st.indexOf("safari")!==-1&&st.indexOf("chrom")==-1;_n&&(st.indexOf("version/15.4")>=0||st.match(/cpu (os|iphone os) 15_4 like mac os x/));st.indexOf("webkit")!==-1&&st.indexOf("edge")==-1;st.indexOf("macintosh");var mn=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,Tn=typeof Image!="undefined"&&Image.prototype.decode;(function(){var n=!1;try{var e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})();new Array(6);function En(){return[1,0,0,1,0,0]}function xn(n,e,t,r,i,o,a,s){var u=Math.sin(o),l=Math.cos(o);return n[0]=r*l,n[1]=i*u,n[2]=-r*u,n[3]=i*l,n[4]=a*r*l-s*r*u+e,n[5]=a*i*u+s*i*l+t,n}function Cn(n,e,t,r,i,o){for(var a=o||[],s=0,u=e;u<t;u+=r){var l=n[u],h=n[u+1];a[s++]=i[0]*l+i[2]*h+i[4],a[s++]=i[1]*l+i[3]*h+i[5]}return o&&a.length!=s&&(a.length=s),a}function Sn(n,e,t,r,i,o,a){for(var s=a||[],u=Math.cos(i),l=Math.sin(i),h=o[0],f=o[1],c=0,p=e;p<t;p+=r){var v=n[p]-h,m=n[p+1]-f;s[c++]=h+v*u-m*l,s[c++]=f+v*l+m*u;for(var E=p+2;E<p+r;++E)s[c++]=n[E]}return a&&s.length!=c&&(s.length=c),s}function On(n,e,t,r,i,o,a,s){for(var u=s||[],l=a[0],h=a[1],f=0,c=e;c<t;c+=r){var p=n[c]-l,v=n[c+1]-h;u[f++]=l+i*p,u[f++]=h+o*v;for(var m=c+2;m<c+r;++m)u[f++]=n[m]}return s&&u.length!=f&&(u.length=f),u}function wn(n,e,t,r,i,o,a){for(var s=a||[],u=0,l=e;l<t;l+=r){s[u++]=n[l]+i,s[u++]=n[l+1]+o;for(var h=l+2;h<l+r;++h)s[u++]=n[h]}return a&&s.length!=u&&(s.length=u),s}var Pn=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),De=En(),Rn=function(n){Pn(e,n);function e(){var t=n.call(this)||this;return t.extent_=Ft(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=fn(function(r,i,o){if(!o)return this.getSimplifiedGeometry(i);var a=this.clone();return a.applyTransform(o),a.getSimplifiedGeometry(i)}),t}return e.prototype.simplifyTransformed=function(t,r){return this.simplifyTransformedInternal(this.getRevision(),t,r)},e.prototype.clone=function(){return w()},e.prototype.closestPointXY=function(t,r,i,o){return w()},e.prototype.containsXY=function(t,r){var i=this.getClosestPoint([t,r]);return i[0]===t&&i[1]===r},e.prototype.getClosestPoint=function(t,r){var i=r||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return w()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var r=this.computeExtent(this.extent_);(isNaN(r[0])||isNaN(r[1]))&&Gr(r),this.extentRevision_=this.getRevision()}return Xr(this.extent_,t)},e.prototype.rotate=function(t,r){w()},e.prototype.scale=function(t,r,i){w()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return w()},e.prototype.getType=function(){return w()},e.prototype.applyTransform=function(t){w()},e.prototype.intersectsExtent=function(t){return w()},e.prototype.translate=function(t,r){w()},e.prototype.transform=function(t,r){var i=X(t),o=i.getUnits()==he.TILE_PIXELS?function(a,s,u){var l=i.getExtent(),h=i.getWorldExtent(),f=ct(h)/ct(l);return xn(De,h[0],h[3],f,-f,0,0,0),Cn(a,0,a.length,u,De,s),qt(i,r)(a,s,u)}:qt(i,r);return this.applyTransform(o),this},e}(_e),Fn=Rn,C={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"},Mn=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),An=function(n){Mn(e,n);function e(){var t=n.call(this)||this;return t.layout=C.XY,t.stride=2,t.flatCoordinates=null,t}return e.prototype.computeExtent=function(t){return Be(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return w()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var r=this.getSimplifiedGeometryInternal(t),i=r.getFlatCoordinates();return i.length<this.flatCoordinates.length?r:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,r){this.stride=je(t),this.layout=t,this.flatCoordinates=r},e.prototype.setCoordinates=function(t,r){w()},e.prototype.setLayout=function(t,r,i){var o;if(t)o=je(t);else{for(var a=0;a<i;++a)if(r.length===0){this.layout=C.XY,this.stride=2;return}else r=r[0];o=r.length,t=Ln(o)}this.layout=t,this.stride=o},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,r){var i=this.getFlatCoordinates();if(i){var o=this.getStride();Sn(i,0,i.length,o,t,r,i),this.changed()}},e.prototype.scale=function(t,r,i){var o=r;o===void 0&&(o=t);var a=i;a||(a=fe(this.getExtent()));var s=this.getFlatCoordinates();if(s){var u=this.getStride();On(s,0,s.length,u,t,o,a,s),this.changed()}},e.prototype.translate=function(t,r){var i=this.getFlatCoordinates();if(i){var o=this.getStride();wn(i,0,i.length,o,t,r,i),this.changed()}},e}(Fn);function Ln(n){var e;return n==2?e=C.XY:n==3?e=C.XYZ:n==4&&(e=C.XYZM),e}function je(n){var e;return n==C.XY?e=2:n==C.XYZ||n==C.XYM?e=3:n==C.XYZM&&(e=4),e}var vt=An;function In(n,e,t,r){for(var i=0,o=t.length;i<o;++i)n[e++]=t[i];return e}function Mt(n,e,t,r){for(var i=0,o=t.length;i<o;++i)for(var a=t[i],s=0;s<r;++s)n[e++]=a[s];return e}function me(n,e,t,r,i){for(var o=i||[],a=0,s=0,u=t.length;s<u;++s){var l=Mt(n,e,t[s],r);o[a++]=l,e=l}return o.length=a,o}function Gn(n,e,t,r,i){for(var o=i||[],a=0,s=0,u=t.length;s<u;++s){var l=me(n,e,t[s],r,o[a]);o[a++]=l,e=l[l.length-1]}return o.length=a,o}var Xn=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Nn=function(n){Xn(e,n);function e(t,r){var i=n.call(this)||this;return i.setCoordinates(t,r),i}return e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,r,i,o){var a=this.flatCoordinates,s=_t(t,r,a[0],a[1]);if(s<o){for(var u=this.stride,l=0;l<u;++l)i[l]=a[l];return i.length=u,s}else return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Nr(this.flatCoordinates,t)},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(t){return qe(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=In(this.flatCoordinates,0,t,this.stride),this.changed()},e}(vt),ht=Nn,Dn=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jn=function(n){Dn(e,n);function e(t){var r=n.call(this)||this;if(r.on,r.once,r.un,r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addChangeListener(r.geometryName_,r.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){var i=t;r.setGeometry(i)}else{var o=t;r.setProperties(o)}return r}return e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&t.setGeometry(r.clone());var i=this.getStyle();return i&&t.setStyle(i),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(mt(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Rt(t,at.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?Yn(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(_e);function Yn(n){if(typeof n=="function")return n;var e;if(Array.isArray(n))e=n;else{b(typeof n.getZIndex=="function",41);var t=n;e=[t]}return function(){return e}}var Wn=jn;function Ye(n,e,t,r,i,o,a){var s=n[e],u=n[e+1],l=n[t]-s,h=n[t+1]-u,f;if(l===0&&h===0)f=e;else{var c=((i-s)*l+(o-u)*h)/(l*l+h*h);if(c>1)f=t;else if(c>0){for(var p=0;p<r;++p)a[p]=ce(n[e+p],n[t+p],c);a.length=r;return}else f=e}for(var p=0;p<r;++p)a[p]=n[f+p];a.length=r}function Te(n,e,t,r,i){var o=n[e],a=n[e+1];for(e+=r;e<t;e+=r){var s=n[e],u=n[e+1],l=_t(o,a,s,u);l>i&&(i=l),o=s,a=u}return i}function Ee(n,e,t,r,i){for(var o=0,a=t.length;o<a;++o){var s=t[o];i=Te(n,e,s,r,i),e=s}return i}function Zn(n,e,t,r,i){for(var o=0,a=t.length;o<a;++o){var s=t[o];i=Ee(n,e,s,r,i),e=s[s.length-1]}return i}function xe(n,e,t,r,i,o,a,s,u,l,h){if(e==t)return l;var f,c;if(i===0)if(c=_t(a,s,n[e],n[e+1]),c<l){for(f=0;f<r;++f)u[f]=n[e+f];return u.length=r,c}else return l;for(var p=h||[NaN,NaN],v=e+r;v<t;)if(Ye(n,v-r,v,r,a,s,p),c=_t(a,s,p[0],p[1]),c<l){for(l=c,f=0;f<r;++f)u[f]=p[f];u.length=r,v+=r}else v+=r*Math.max((Math.sqrt(c)-Math.sqrt(l))/i|0,1);if(o&&(Ye(n,t-r,e,r,a,s,p),c=_t(a,s,p[0],p[1]),c<l)){for(l=c,f=0;f<r;++f)u[f]=p[f];u.length=r}return l}function Ce(n,e,t,r,i,o,a,s,u,l,h){for(var f=h||[NaN,NaN],c=0,p=t.length;c<p;++c){var v=t[c];l=xe(n,e,v,r,i,o,a,s,u,l,f),e=v}return l}function Un(n,e,t,r,i,o,a,s,u,l,h){for(var f=h||[NaN,NaN],c=0,p=t.length;c<p;++c){var v=t[c];l=Ce(n,e,v,r,i,o,a,s,u,l,f),e=v[v.length-1]}return l}function Se(n,e,t,r,i,o,a){var s=(t-e)/r;if(s<3){for(;e<t;e+=r)o[a++]=n[e],o[a++]=n[e+1];return a}var u=new Array(s);u[0]=1,u[s-1]=1;for(var l=[e,t-r],h=0;l.length>0;){for(var f=l.pop(),c=l.pop(),p=0,v=n[c],m=n[c+1],E=n[f],T=n[f+1],_=c+r;_<f;_+=r){var d=n[_],g=n[_+1],R=Dr(d,g,v,m,E,T);R>p&&(h=_,p=R)}p>i&&(u[(h-e)/r]=1,c+r<h&&l.push(c,h),h+r<f&&l.push(h,f))}for(var _=0;_<s;++_)u[_]&&(o[a++]=n[e+_*r],o[a++]=n[e+_*r+1]);return a}function $n(n,e,t,r,i,o,a,s){for(var u=0,l=t.length;u<l;++u){var h=t[u];a=Se(n,e,h,r,i,o,a),s.push(a),e=h}return a}function gt(n,e){return e*Math.round(n/e)}function bn(n,e,t,r,i,o,a){if(e==t)return a;var s=gt(n[e],i),u=gt(n[e+1],i);e+=r,o[a++]=s,o[a++]=u;var l,h;do if(l=gt(n[e],i),h=gt(n[e+1],i),e+=r,e==t)return o[a++]=l,o[a++]=h,a;while(l==s&&h==u);for(;e<t;){var f=gt(n[e],i),c=gt(n[e+1],i);if(e+=r,!(f==l&&c==h)){var p=l-s,v=h-u,m=f-s,E=c-u;if(p*E==v*m&&(p<0&&m<p||p==m||p>0&&m>p)&&(v<0&&E<v||v==E||v>0&&E>v)){l=f,h=c;continue}o[a++]=l,o[a++]=h,s=l,u=h,l=f,h=c}}return o[a++]=l,o[a++]=h,a}function ar(n,e,t,r,i,o,a,s){for(var u=0,l=t.length;u<l;++u){var h=t[u];a=bn(n,e,h,r,i,o,a),s.push(a),e=h}return a}function zn(n,e,t,r,i,o,a,s){for(var u=0,l=t.length;u<l;++u){var h=t[u],f=[];a=ar(n,e,h,r,i,o,a,f),s.push(f),e=h[h.length-1]}return a}function Ut(n,e,t,r,i){for(var o=i!==void 0?i:[],a=0,s=e;s<t;s+=r)o[a++]=n.slice(s,s+r);return o.length=a,o}function Oe(n,e,t,r,i){for(var o=i!==void 0?i:[],a=0,s=0,u=t.length;s<u;++s){var l=t[s];o[a++]=Ut(n,e,l,r,o[a]),e=l}return o.length=a,o}function kn(n,e,t,r,i){for(var o=i!==void 0?i:[],a=0,s=0,u=t.length;s<u;++s){var l=t[s];o[a++]=Oe(n,e,l,r,o[a]),e=l[l.length-1]}return o.length=a,o}function sr(n,e,t,r){for(var i=0,o=n[t-r],a=n[t-r+1];e<t;e+=r){var s=n[e],u=n[e+1];i+=a*s-o*u,o=s,a=u}return i/2}function ur(n,e,t,r){for(var i=0,o=0,a=t.length;o<a;++o){var s=t[o];i+=sr(n,e,s,r),e=s}return i}function Kn(n,e,t,r){for(var i=0,o=0,a=t.length;o<a;++o){var s=t[o];i+=ur(n,e,s,r),e=s[s.length-1]}return i}var Vn=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Hn=function(n){Vn(e,n);function e(t,r){var i=n.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,r!==void 0&&!Array.isArray(t[0])?i.setFlatCoordinates(r,t):i.setCoordinates(t,r),i}return e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,r,i,o){return o<Tt(this.getExtent(),t,r)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Te(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,r,i,o))},e.prototype.getArea=function(){return sr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Ut(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=Se(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,C.XY)},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,r){this.setLayout(r,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Mt(this.flatCoordinates,0,t,this.stride),this.changed()},e}(vt),Yt=Hn;function Bn(n,e,t,r,i){var o=Je(i,function(a){return!ft(n,e,t,r,a[0],a[1])});return!o}function ft(n,e,t,r,i,o){for(var a=0,s=n[t-r],u=n[t-r+1];e<t;e+=r){var l=n[e],h=n[e+1];u<=o?h>o&&(l-s)*(o-u)-(i-s)*(h-u)>0&&a++:h<=o&&(l-s)*(o-u)-(i-s)*(h-u)<0&&a--,s=l,u=h}return a!==0}function we(n,e,t,r,i,o){if(t.length===0||!ft(n,e,t[0],r,i,o))return!1;for(var a=1,s=t.length;a<s;++a)if(ft(n,t[a-1],t[a],r,i,o))return!1;return!0}function qn(n,e,t,r,i,o){if(t.length===0)return!1;for(var a=0,s=t.length;a<s;++a){var u=t[a];if(we(n,e,u,r,i,o))return!0;e=u[u.length-1]}return!1}function lr(n,e,t,r,i,o,a){for(var s,u,l,h,f,c,p,v=i[o+1],m=[],E=0,T=t.length;E<T;++E){var _=t[E];for(h=n[_-r],c=n[_-r+1],s=e;s<_;s+=r)f=n[s],p=n[s+1],(v<=c&&p<=v||c<=v&&v<=p)&&(l=(v-c)/(p-c)*(f-h)+h,m.push(l)),h=f,c=p}var d=NaN,g=-1/0;for(m.sort(de),h=m[0],s=1,u=m.length;s<u;++s){f=m[s];var R=Math.abs(f-h);R>g&&(l=(h+f)/2,we(n,e,t,r,l,v)&&(d=l,g=R)),h=f}return isNaN(d)&&(d=i[o]),a?(a.push(d,v,g),a):[d,v,g]}function Jn(n,e,t,r,i){for(var o=[],a=0,s=t.length;a<s;++a){var u=t[a];o=lr(n,e,u,r,i,2*a,o),e=u[u.length-1]}return o}function hr(n,e,t,r,i){var o;for(e+=r;e<t;e+=r)if(o=i(n.slice(e-r,e),n.slice(e,e+r)),o)return o;return!1}function $t(n,e,t,r,i){var o=jr(Ft(),n,e,t,r);return Qe(i,o)?ve(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:hr(n,e,t,r,function(a,s){return Yr(i,a,s)}):!1}function Qn(n,e,t,r,i){for(var o=0,a=t.length;o<a;++o){if($t(n,e,t[o],r,i))return!0;e=t[o]}return!1}function fr(n,e,t,r,i){return!!($t(n,e,t,r,i)||ft(n,e,t,r,i[0],i[1])||ft(n,e,t,r,i[0],i[3])||ft(n,e,t,r,i[2],i[1])||ft(n,e,t,r,i[2],i[3]))}function cr(n,e,t,r,i){if(!fr(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(var o=1,a=t.length;o<a;++o)if(Bn(n,t[o-1],t[o],r,i)&&!$t(n,t[o-1],t[o],r,i))return!1;return!0}function ti(n,e,t,r,i){for(var o=0,a=t.length;o<a;++o){var s=t[o];if(cr(n,e,s,r,i))return!0;e=s[s.length-1]}return!1}function ei(n,e,t,r){for(;e<t-r;){for(var i=0;i<r;++i){var o=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=o}e+=r,t-=r}}function Pe(n,e,t,r){for(var i=0,o=n[t-r],a=n[t-r+1];e<t;e+=r){var s=n[e],u=n[e+1];i+=(s-o)*(u+a),o=s,a=u}return i===0?void 0:i>0}function vr(n,e,t,r,i){for(var o=i!==void 0?i:!1,a=0,s=t.length;a<s;++a){var u=t[a],l=Pe(n,e,u,r);if(a===0){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1;e=u}return!0}function ri(n,e,t,r,i){for(var o=0,a=t.length;o<a;++o){var s=t[o];if(!vr(n,e,s,r,i))return!1;s.length&&(e=s[s.length-1])}return!0}function ne(n,e,t,r,i){for(var o=i!==void 0?i:!1,a=0,s=t.length;a<s;++a){var u=t[a],l=Pe(n,e,u,r),h=a===0?o&&l||!o&&!l:o&&!l||!o&&l;h&&ei(n,e,u,r),e=u}return e}function We(n,e,t,r,i){for(var o=0,a=t.length;o<a;++o)e=ne(n,e,t[o],r,i);return e}var ni=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wt=function(n){ni(e,n);function e(t,r,i){var o=n.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,r!==void 0&&i?(o.setFlatCoordinates(r,t),o.ends_=i):o.setCoordinates(t,r),o}return e.prototype.appendLinearRing=function(t){this.flatCoordinates?rt(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,r,i,o){return o<Tt(this.getExtent(),t,r)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ee(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ce(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,r,i,o))},e.prototype.containsXY=function(t,r){return we(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,r)},e.prototype.getArea=function(){return ur(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var r;return t!==void 0?(r=this.getOrientedFlatCoordinates().slice(),ne(r,0,this.ends_,this.stride,t)):r=this.flatCoordinates,Oe(r,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=fe(this.getExtent());this.flatInteriorPoint_=lr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new ht(this.getFlatInteriorPoint(),C.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Yt(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,r=this.flatCoordinates,i=this.ends_,o=[],a=0,s=0,u=i.length;s<u;++s){var l=i[s],h=new Yt(r.slice(a,l),t);o.push(h),a=l}return o},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;vr(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ne(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],i=[];return r.length=ar(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),r,0,i),new e(r,C.XY,i)},e.prototype.getType=function(){return"Polygon"},e.prototype.intersectsExtent=function(t){return cr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,r){this.setLayout(r,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=me(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},e}(vt);function ls(n,e,t,r){for(var i=t||32,o=[],a=0;a<i;++a)rt(o,Wr(n,e,2*Math.PI*a/i,r));return o.push(o[0],o[1]),new Wt(o,C.XY,[o.length])}function pr(n,e,t,r,i,o,a){var s,u,l=(t-e)/r;if(l===1)s=e;else if(l===2)s=e,u=i;else if(l!==0){for(var h=n[e],f=n[e+1],c=0,p=[0],v=e+r;v<t;v+=r){var m=n[v],E=n[v+1];c+=Math.sqrt((m-h)*(m-h)+(E-f)*(E-f)),p.push(c),h=m,f=E}var T=i*c,_=an(p,T);_<0?(u=(T-p[-_-2])/(p[-_-1]-p[-_-2]),s=e+(-_-2)*r):s=e+_*r}for(var d=a>1?a:2,g=o||new Array(d),v=0;v<d;++v)g[v]=s===void 0?NaN:u===void 0?n[s+v]:ce(n[s+v],n[s+r+v],u);return g}function ie(n,e,t,r,i,o){if(t==e)return null;var a;if(i<n[e+r-1])return o?(a=n.slice(e,e+r),a[r-1]=i,a):null;if(n[t-1]<i)return o?(a=n.slice(t-r,t),a[r-1]=i,a):null;if(i==n[e+r-1])return n.slice(e,e+r);for(var s=e/r,u=t/r;s<u;){var l=s+u>>1;i<n[(l+1)*r-1]?u=l:s=l+1}var h=n[s*r-1];if(i==h)return n.slice((s-1)*r,(s-1)*r+r);var f=n[(s+1)*r-1],c=(i-h)/(f-h);a=[];for(var p=0;p<r-1;++p)a.push(ce(n[(s-1)*r+p],n[s*r+p],c));return a.push(i),a}function ii(n,e,t,r,i,o,a){if(a)return ie(n,e,t[t.length-1],r,i,o);var s;if(i<n[r-1])return o?(s=n.slice(0,r),s[r-1]=i,s):null;if(n[n.length-1]<i)return o?(s=n.slice(n.length-r),s[r-1]=i,s):null;for(var u=0,l=t.length;u<l;++u){var h=t[u];if(e!=h){if(i<n[e+r-1])return null;if(i<=n[h-1])return ie(n,e,h,r,i,!1);e=h}}return null}function oi(n,e,t,r){for(var i=n[e],o=n[e+1],a=0,s=e+r;s<t;s+=r){var u=n[s],l=n[s+1];a+=Math.sqrt((u-i)*(u-i)+(l-o)*(l-o)),i=u,o=l}return a}var ai=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),si=function(n){ai(e,n);function e(t,r){var i=n.call(this)||this;return i.flatMidpoint_=null,i.flatMidpointRevision_=-1,i.maxDelta_=-1,i.maxDeltaRevision_=-1,r!==void 0&&!Array.isArray(t[0])?i.setFlatCoordinates(r,t):i.setCoordinates(t,r),i}return e.prototype.appendCoordinate=function(t){this.flatCoordinates?rt(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,r,i,o){return o<Tt(this.getExtent(),t,r)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Te(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,r,i,o))},e.prototype.forEachSegment=function(t){return hr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,r){if(this.layout!=C.XYM&&this.layout!=C.XYZM)return null;var i=r!==void 0?r:!1;return ie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return Ut(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,r){return pr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,this.stride)},e.prototype.getLength=function(){return oi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=Se(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,C.XY)},e.prototype.getType=function(){return"LineString"},e.prototype.intersectsExtent=function(t){return $t(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,r){this.setLayout(r,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Mt(this.flatCoordinates,0,t,this.stride),this.changed()},e}(vt),oe=si,lt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function ui(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function it(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}function ae(n,e,t,r){var i;return t&&t.length?i=t.shift():mn?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}function li(n){var e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}var hi=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fi=function(n){hi(e,n);function e(t,r,i,o){var a=n.call(this)||this;return a.extent=t,a.pixelRatio_=i,a.resolution=r,a.state=o,a}return e.prototype.changed=function(){this.dispatchEvent(at.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return w()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){w()},e}(ye),ci=fi,vi=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){vi(e,n);function e(t,r,i,o,a,s){var u=n.call(this,t,r,i,lt.IDLE)||this;return u.src_=o,u.image_=new Image,a!==null&&(u.image_.crossOrigin=a),u.unlisten_=null,u.state=lt.IDLE,u.imageLoadFunction_=s,u}return e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=lt.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=ct(this.extent)/this.image_.height),this.state=lt.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){(this.state==lt.IDLE||this.state==lt.ERROR)&&(this.state=lt.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=gr(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=ct(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e})(ci);function gr(n,e,t){var r=n,i=!0,o=!1,a=!1,s=[jt(r,at.LOAD,function(){a=!0,o||e()})];return r.src&&Tn?(o=!0,r.decode().then(function(){i&&e()}).catch(function(u){i&&(a?e():t())})):s.push(jt(r,at.ERROR,t)),function(){i=!1,s.forEach(mt)}}var pi=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gi=function(n){pi(e,n);function e(t){var r=n.call(this)||this;r.projection=X(t.projection),r.attributions_=Ze(t.attributions),r.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,r.loading=!1,r.state_=t.state!==void 0?t.state:"ready",r.wrapX_=t.wrapX!==void 0?t.wrapX:!1,r.interpolate_=!!t.interpolate,r.viewResolver=null,r.viewRejector=null;var i=r;return r.viewPromise_=new Promise(function(o,a){i.viewResolver=o,i.viewRejector=a}),r}return e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return w()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getInterpolate=function(){return this.interpolate_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Ze(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(_e);function Ze(n){return n?Array.isArray(n)?function(e){return n}:typeof n=="function"?n:function(e){return[n]}:null}var di=gi,x={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function yi(n){return Math.pow(n,3)}var _i=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mi=function(n){_i(e,n);function e(t,r,i){var o=n.call(this)||this,a=i||{};return o.tileCoord=t,o.state=r,o.interimTile=null,o.key="",o.transition_=a.transition===void 0?250:a.transition,o.transitionStarts_={},o.interpolate=!!a.interpolate,o}return e.prototype.changed=function(){this.dispatchEvent(at.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==x.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(!!this.interimTile){var t=this.interimTile,r=this;do{if(t.getState()==x.LOADED){t.interimTile=null;break}else t.getState()==x.LOADING?r=t:t.getState()==x.IDLE?r.interimTile=t.interimTile:r=t;t=r.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==x.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){w()},e.prototype.getAlpha=function(t,r){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(!i)i=r,this.transitionStarts_[t]=i;else if(i===-1)return 1;var o=r-i+1e3/60;return o>=this.transition_?1:yi(o/this.transition_)},e.prototype.inTransition=function(t){return this.transition_?this.transitionStarts_[t]!==-1:!1},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(ye),dr=mi,Ti=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ei=function(n){Ti(e,n);function e(t,r,i,o,a,s){var u=n.call(this,t,r,s)||this;return u.crossOrigin_=o,u.src_=i,u.key=i,u.image_=new Image,o!==null&&(u.image_.crossOrigin=o),u.unlisten_=null,u.tileLoadFunction_=a,u}return e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=x.LOADED,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){this.state=x.ERROR,this.unlistenImage_(),this.image_=xi(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=x.LOADED:this.state=x.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==x.ERROR&&(this.state=x.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==x.IDLE&&(this.state=x.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=gr(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(dr);function xi(){var n=ae(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}var Ci=Ei,Si=42,yr=256,Oi=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wi=function(n){Oi(e,n);function e(t,r,i){var o=n.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(t[0]))o.setCoordinates(t,r);else if(r!==void 0&&i)o.setFlatCoordinates(r,t),o.ends_=i;else{for(var a=o.getLayout(),s=t,u=[],l=[],h=0,f=s.length;h<f;++h){var c=s[h];h===0&&(a=c.getLayout()),rt(u,c.getFlatCoordinates()),l.push(u.length)}o.setFlatCoordinates(a,u),o.ends_=l}return o}return e.prototype.appendLineString=function(t){this.flatCoordinates?rt(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,r,i,o){return o<Tt(this.getExtent(),t,r)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ee(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ce(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,r,i,o))},e.prototype.getCoordinateAtM=function(t,r,i){if(this.layout!=C.XYM&&this.layout!=C.XYZM||this.flatCoordinates.length===0)return null;var o=r!==void 0?r:!1,a=i!==void 0?i:!1;return ii(this.flatCoordinates,0,this.ends_,this.stride,t,o,a)},e.prototype.getCoordinates=function(){return Oe(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new oe(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,r=this.ends_,i=this.layout,o=[],a=0,s=0,u=r.length;s<u;++s){var l=r[s],h=new oe(t.slice(a,l),i);o.push(h),a=l}return o},e.prototype.getFlatMidpoints=function(){for(var t=[],r=this.flatCoordinates,i=0,o=this.ends_,a=this.stride,s=0,u=o.length;s<u;++s){var l=o[s],h=pr(r,i,l,a,.5);rt(t,h),i=l}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],i=[];return r.length=$n(this.flatCoordinates,0,this.ends_,this.stride,t,r,0,i),new e(r,C.XY,i)},e.prototype.getType=function(){return"MultiLineString"},e.prototype.intersectsExtent=function(t){return Qn(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,r){this.setLayout(r,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=me(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},e}(vt),Pi=wi,Ri=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fi=function(n){Ri(e,n);function e(t,r){var i=n.call(this)||this;return r&&!Array.isArray(t[0])?i.setFlatCoordinates(r,t):i.setCoordinates(t,r),i}return e.prototype.appendPoint=function(t){this.flatCoordinates?rt(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,r,i,o){if(o<Tt(this.getExtent(),t,r))return o;for(var a=this.flatCoordinates,s=this.stride,u=0,l=a.length;u<l;u+=s){var h=_t(t,r,a[u],a[u+1]);if(h<o){o=h;for(var f=0;f<s;++f)i[f]=a[u+f];i.length=s}}return o},e.prototype.getCoordinates=function(){return Ut(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var r=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||r<=t?null:new ht(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,r=this.layout,i=this.stride,o=[],a=0,s=t.length;a<s;a+=i){var u=new ht(t.slice(a,a+i),r);o.push(u)}return o},e.prototype.getType=function(){return"MultiPoint"},e.prototype.intersectsExtent=function(t){for(var r=this.flatCoordinates,i=this.stride,o=0,a=r.length;o<a;o+=i){var s=r[o],u=r[o+1];if(qe(t,s,u))return!0}return!1},e.prototype.setCoordinates=function(t,r){this.setLayout(r,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Mt(this.flatCoordinates,0,t,this.stride),this.changed()},e}(vt),_r=Fi;function Mi(n,e,t,r){for(var i=[],o=Ft(),a=0,s=t.length;a<s;++a){var u=t[a];o=Be(n,e,u[0],r),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=u[u.length-1]}return i}var Ai=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Li=function(n){Ai(e,n);function e(t,r,i){var o=n.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){for(var a=o.getLayout(),s=t,u=[],l=[],h=0,f=s.length;h<f;++h){var c=s[h];h===0&&(a=c.getLayout());for(var p=u.length,v=c.getEnds(),m=0,E=v.length;m<E;++m)v[m]+=p;rt(u,c.getFlatCoordinates()),l.push(v)}r=a,t=u,i=l}return r!==void 0&&i?(o.setFlatCoordinates(r,t),o.endss_=i):o.setCoordinates(t,r),o}return e.prototype.appendPolygon=function(t){var r;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),r=t.getEnds().slice(),this.endss_.push();else{var i=this.flatCoordinates.length;rt(this.flatCoordinates,t.getFlatCoordinates()),r=t.getEnds().slice();for(var o=0,a=r.length;o<a;++o)r[o]+=i}this.endss_.push(r),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,r=new Array(t),i=0;i<t;++i)r[i]=this.endss_[i].slice();var o=new e(this.flatCoordinates.slice(),this.layout,r);return o.applyProperties(this),o},e.prototype.closestPointXY=function(t,r,i,o){return o<Tt(this.getExtent(),t,r)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Zn(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Un(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,r,i,o))},e.prototype.containsXY=function(t,r){return qn(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,r)},e.prototype.getArea=function(){return Kn(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var r;return t!==void 0?(r=this.getOrientedFlatCoordinates().slice(),We(r,0,this.endss_,this.stride,t)):r=this.flatCoordinates,kn(r,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Mi(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Jn(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new _r(this.getFlatInteriorPoints().slice(),C.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;ri(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=We(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],i=[];return r.length=zn(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),r,0,i),new e(r,C.XY,i)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var r;if(t===0)r=0;else{var i=this.endss_[t-1];r=i[i.length-1]}var o=this.endss_[t].slice(),a=o[o.length-1];if(r!==0)for(var s=0,u=o.length;s<u;++s)o[s]-=r;return new Wt(this.flatCoordinates.slice(r,a),this.layout,o)},e.prototype.getPolygons=function(){for(var t=this.layout,r=this.flatCoordinates,i=this.endss_,o=[],a=0,s=0,u=i.length;s<u;++s){var l=i[s].slice(),h=l[l.length-1];if(a!==0)for(var f=0,c=l.length;f<c;++f)l[f]-=a;var p=new Wt(r.slice(a,h),t,l);o.push(p),a=h}return o},e.prototype.getType=function(){return"MultiPolygon"},e.prototype.intersectsExtent=function(t){return ti(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,r){this.setLayout(r,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=Gn(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{var o=i[i.length-1];this.flatCoordinates.length=o.length===0?0:o[o.length-1]}this.changed()},e}(vt),Ii=Li,Gi=function(){function n(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return n.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},n.prototype.expireCache=function(e){for(;this.canExpireCache();)this.pop()},n.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},n.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},n.prototype.forEach=function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer},n.prototype.get=function(e,t){var r=this.entries_[e];return b(r!==void 0,15),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_},n.prototype.remove=function(e){var t=this.entries_[e];return b(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_},n.prototype.getCount=function(){return this.count_},n.prototype.getKeys=function(){var e=new Array(this.count_),t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e},n.prototype.getValues=function(){var e=new Array(this.count_),t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e},n.prototype.peekLast=function(){return this.oldest_.value_},n.prototype.peekLastKey=function(){return this.oldest_.key_},n.prototype.peekFirstKey=function(){return this.newest_.key_},n.prototype.peek=function(e){if(!!this.containsKey(e))return this.entries_[e].value_},n.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},n.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},n.prototype.set=function(e,t){b(!(e in this.entries_),16);var r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_},n.prototype.setSize=function(e){this.highWaterMark=e},n}(),Xi=Gi;function Ue(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function bt(n,e,t){return n+"/"+e+"/"+t}function mr(n){return bt(n[0],n[1],n[2])}function Ni(n){return n.split("/").map(Number)}function Di(n){return(n[1]<<n[0])+n[2]}function ji(n,e){var t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;var o=e.getFullTileRange(t);return o?o.containsXY(r,i):!0}var Yi=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wi=function(n){Yi(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.expireCache=function(t){for(;this.canExpireCache();){var r=this.peekLast();if(r.getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var t=this.peekFirstKey(),r=Ni(t),i=r[0];this.forEach(function(o){o.tileCoord[0]!==i&&(this.remove(mr(o.tileCoord)),o.release())}.bind(this))}},e}(Xi),Tr=Wi,Er=function(){function n(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}return n.prototype.contains=function(e){return this.containsXY(e[1],e[2])},n.prototype.containsTileRange=function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY},n.prototype.containsXY=function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY},n.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY},n.prototype.extend=function(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)},n.prototype.getHeight=function(){return this.maxY-this.minY+1},n.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},n.prototype.getWidth=function(){return this.maxX-this.minX+1},n.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY},n}();function dt(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new Er(n,e,t,r)}var Zi=function(){function n(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return n.prototype.getReadOptions=function(e,t){var r;if(t){var i=t.dataProjection?X(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()===he.TILE_PIXELS&&(i=X(i),i.setWorldExtent(t.extent)),r={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(r)},n.prototype.adaptOptions=function(e){return B({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)},n.prototype.getType=function(){return w()},n.prototype.readFeature=function(e,t){return w()},n.prototype.readFeatures=function(e,t){return w()},n.prototype.readGeometry=function(e,t){return w()},n.prototype.readProjection=function(e){return w()},n.prototype.writeFeature=function(e,t){return w()},n.prototype.writeFeatures=function(e,t){return w()},n.prototype.writeGeometry=function(e,t){return w()},n}();function xr(n,e,t){var r=t?X(t.featureProjection):null,i=t?X(t.dataProjection):null,o;if(r&&i&&!et(r,i)?o=(e?n.clone():n).transform(e?r:i,e?i:r):o=n,e&&t&&t.decimals!==void 0){var a=Math.pow(10,t.decimals),s=function(u){for(var l=0,h=u.length;l<h;++l)u[l]=Math.round(u[l]*a)/a;return u};o===n&&(o=n.clone()),o.applyTransform(s)}return o}var Ui=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$i=function(n){Ui(e,n);function e(){return n.call(this)||this}return e.prototype.getType=function(){return"json"},e.prototype.readFeature=function(t,r){return this.readFeatureFromObject(Xt(t),this.getReadOptions(t,r))},e.prototype.readFeatures=function(t,r){return this.readFeaturesFromObject(Xt(t),this.getReadOptions(t,r))},e.prototype.readFeatureFromObject=function(t,r){return w()},e.prototype.readFeaturesFromObject=function(t,r){return w()},e.prototype.readGeometry=function(t,r){return this.readGeometryFromObject(Xt(t),this.getReadOptions(t,r))},e.prototype.readGeometryFromObject=function(t,r){return w()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(Xt(t))},e.prototype.readProjectionFromObject=function(t){return w()},e.prototype.writeFeature=function(t,r){return JSON.stringify(this.writeFeatureObject(t,r))},e.prototype.writeFeatureObject=function(t,r){return w()},e.prototype.writeFeatures=function(t,r){return JSON.stringify(this.writeFeaturesObject(t,r))},e.prototype.writeFeaturesObject=function(t,r){return w()},e.prototype.writeGeometry=function(t,r){return JSON.stringify(this.writeGeometryObject(t,r))},e.prototype.writeGeometryObject=function(t,r){return w()},e}(Zi);function Xt(n){if(typeof n=="string"){var e=JSON.parse(n);return e||null}else return n!==null?n:null}var bi=$i,zi=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ki={Point:Bi,LineString:qi,Polygon:eo,MultiPoint:Qi,MultiLineString:Ji,MultiPolygon:to},Ki={Point:ro,LineString:no,Polygon:io,MultiPoint:ao,MultiLineString:oo,MultiPolygon:so},Vi=function(n){zi(e,n);function e(t){var r=this,i=t||{};return r=n.call(this)||this,r.geometryName_=i.geometryName,r}return e.prototype.readFeatureFromObject=function(t,r,i){var o=t,a=$e(o.geometry,r),s=new Wn;if(this.geometryName_&&s.setGeometryName(this.geometryName_),s.setGeometry(a),o.attributes){s.setProperties(o.attributes,!0);var u=o.attributes[i];u!==void 0&&s.setId(u)}return s},e.prototype.readFeaturesFromObject=function(t,r){var i=r||{};if(t.features){for(var o=t,a=[],s=o.features,u=0,l=s.length;u<l;++u)a.push(this.readFeatureFromObject(s[u],i,t.objectIdFieldName));return a}else return[this.readFeatureFromObject(t,i)]},e.prototype.readGeometryFromObject=function(t,r){return $e(t,r)},e.prototype.readProjectionFromObject=function(t){if(t.spatialReference&&t.spatialReference.wkid!==void 0){var r=t.spatialReference,i=r.wkid;return X("EPSG:"+i)}else return null},e.prototype.writeGeometryObject=function(t,r){return be(t,this.adaptOptions(r))},e.prototype.writeFeatureObject=function(t,r){r=this.adaptOptions(r);var i={};if(!t.hasProperties())return i.attributes={},i;var o=t.getProperties(),a=t.getGeometry();if(a){i.geometry=be(a,r);var s=r&&(r.dataProjection||r.featureProjection);s&&(i.geometry.spatialReference={wkid:Number(X(s).getCode().split(":").pop())}),delete o[t.getGeometryName()]}return ir(o)?i.attributes={}:i.attributes=o,i},e.prototype.writeFeaturesObject=function(t,r){r=this.adaptOptions(r);for(var i=[],o=0,a=t.length;o<a;++o)i.push(this.writeFeatureObject(t[o],r));return{features:i}},e}(bi);function $e(n,e){var t,r;if(!n)return null;var i;if(typeof n.x=="number"&&typeof n.y=="number")i="Point";else if(n.points)i="MultiPoint";else if(n.paths){var o=n;o.paths.length===1?i="LineString":i="MultiLineString"}else if(n.rings){var a=n,s=Et(a),u=Hi(a.rings,s);u.length===1?(i="Polygon",n=B({},n,(t={},t.rings=u[0],t))):(i="MultiPolygon",n=B({},n,(r={},r.rings=u,r)))}var l=ki[i];return xr(l(n),!1,e)}function Hi(n,e){var t=[],r=[],i=[],o,a;for(o=0,a=n.length;o<a;++o){t.length=0,Mt(t,0,n[o],e.length);var s=Pe(t,0,t.length,e.length);s?r.push([n[o]]):i.push(n[o])}for(;i.length;){var u=i.shift(),l=!1;for(o=r.length-1;o>=0;o--){var h=r[o][0],f=ve(new Yt(h).getExtent(),new Yt(u).getExtent());if(f){r[o].push(u),l=!0;break}}l||r.push([u.reverse()])}return r}function Bi(n){var e;return n.m!==void 0&&n.z!==void 0?e=new ht([n.x,n.y,n.z,n.m],C.XYZM):n.z!==void 0?e=new ht([n.x,n.y,n.z],C.XYZ):n.m!==void 0?e=new ht([n.x,n.y,n.m],C.XYM):e=new ht([n.x,n.y]),e}function qi(n){var e=Et(n);return new oe(n.paths[0],e)}function Ji(n){var e=Et(n);return new Pi(n.paths,e)}function Et(n){var e=C.XY;return n.hasZ===!0&&n.hasM===!0?e=C.XYZM:n.hasZ===!0?e=C.XYZ:n.hasM===!0&&(e=C.XYM),e}function Qi(n){var e=Et(n);return new _r(n.points,e)}function to(n){var e=Et(n);return new Ii(n.rings,e)}function eo(n){var e=Et(n);return new Wt(n.rings,e)}function ro(n,e){var t=n.getCoordinates(),r,i=n.getLayout();return i===C.XYZ?r={x:t[0],y:t[1],z:t[2]}:i===C.XYM?r={x:t[0],y:t[1],m:t[2]}:i===C.XYZM?r={x:t[0],y:t[1],z:t[2],m:t[3]}:i===C.XY?r={x:t[0],y:t[1]}:b(!1,34),r}function At(n){var e=n.getLayout();return{hasZ:e===C.XYZ||e===C.XYZM,hasM:e===C.XYM||e===C.XYZM}}function no(n,e){var t=At(n);return{hasZ:t.hasZ,hasM:t.hasM,paths:[n.getCoordinates()]}}function io(n,e){var t=At(n);return{hasZ:t.hasZ,hasM:t.hasM,rings:n.getCoordinates(!1)}}function oo(n,e){var t=At(n);return{hasZ:t.hasZ,hasM:t.hasM,paths:n.getCoordinates()}}function ao(n,e){var t=At(n);return{hasZ:t.hasZ,hasM:t.hasM,points:n.getCoordinates()}}function so(n,e){for(var t=At(n),r=n.getCoordinates(!1),i=[],o=0;o<r.length;o++)for(var a=r[o].length-1;a>=0;a--)i.push(r[o][a]);return{hasZ:t.hasZ,hasM:t.hasM,rings:i}}function be(n,e){var t=Ki[n.getType()];return t(xr(n,!0,e),e)}var uo=Vi;function Re(n,e){return Cr(n,e,[]).join("")}function Cr(n,e,t){if(n.nodeType==Node.CDATA_SECTION_NODE||n.nodeType==Node.TEXT_NODE)e?t.push(String(n.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(n.nodeValue);else{var r=void 0;for(r=n.firstChild;r;r=r.nextSibling)Cr(r,e,t)}return t}function lo(n){return"documentElement"in n}function ho(n){return new DOMParser().parseFromString(n,"application/xml")}function se(n,e){return function(t,r){var i=n.call(e!==void 0?e:this,t,r);if(i!==void 0){var o=r[r.length-1];o.push(i)}}}function $(n,e,t){return function(r,i){var o=n.call(t!==void 0?t:this,r,i);if(o!==void 0){var a=i[i.length-1],s=e!==void 0?e:r.localName,u=void 0;s in a?u=a[s]:(u=[],a[s]=u),u.push(o)}}}function y(n,e,t){return function(r,i){var o=n.call(t!==void 0?t:this,r,i);if(o!==void 0){var a=i[i.length-1],s=e!==void 0?e:r.localName;a[s]=o}}}function P(n,e,t){var r=t!==void 0?t:{},i,o;for(i=0,o=n.length;i<o;++i)r[n[i]]=e;return r}function fo(n,e,t,r){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling){var o=n[i.namespaceURI];if(o!==void 0){var a=o[i.localName];a!==void 0&&a.call(r,i,t)}}}function L(n,e,t,r,i){return r.push(n),fo(e,t,r,i),r.pop()}function co(n){var e=Re(n,!1);return vo(e)}function vo(n){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(n);if(e)return parseFloat(e[1])}function ot(n){var e=Re(n,!1);return po(e)}function po(n){var e=/^\s*(\d+)\s*$/.exec(n);if(e)return parseInt(e[1],10)}function S(n){return Re(n,!1).trim()}var go=function(){function n(){}return n.prototype.read=function(e){if(e)if(typeof e=="string"){var t=ho(e);return this.readFromDocument(t)}else return lo(e)?this.readFromDocument(e):this.readFromNode(e);else return null},n.prototype.readFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null},n.prototype.readFromNode=function(e){},n}(),Sr=go,yo="http://www.w3.org/1999/xlink";function Fe(n){return n.getAttributeNS(yo,"href")}var _o=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Z=[null,"http://www.opengis.net/ows/1.1"],mo=P(Z,{ServiceIdentification:y(bo),ServiceProvider:y(ko),OperationsMetadata:y(Uo)}),To=function(n){_o(e,n);function e(){return n.call(this)||this}return e.prototype.readFromNode=function(t){var r=L({},mo,t,[]);return r||null},e}(Sr),Eo=P(Z,{DeliveryPoint:y(S),City:y(S),AdministrativeArea:y(S),PostalCode:y(S),Country:y(S),ElectronicMailAddress:y(S)}),xo=P(Z,{Value:$(Ko)}),Co=P(Z,{AllowedValues:y(Xo)}),So=P(Z,{Phone:y($o),Address:y(Go)}),Oo=P(Z,{HTTP:y(Wo)}),wo=P(Z,{Get:$(Yo),Post:void 0}),Po=P(Z,{DCP:y(jo)}),Ro=P(Z,{Operation:Zo}),Fo=P(Z,{Voice:y(S),Facsimile:y(S)}),Mo=P(Z,{Constraint:$(No)}),Ao=P(Z,{IndividualName:y(S),PositionName:y(S),ContactInfo:y(Do)}),Lo=P(Z,{Abstract:y(S),AccessConstraints:y(S),Fees:y(S),Title:y(S),ServiceTypeVersion:y(S),ServiceType:y(S)}),Io=P(Z,{ProviderName:y(S),ProviderSite:y(Fe),ServiceContact:y(zo)});function Go(n,e){return L({},Eo,n,e)}function Xo(n,e){return L({},xo,n,e)}function No(n,e){var t=n.getAttribute("name");if(!!t)return L({name:t},Co,n,e)}function Do(n,e){return L({},So,n,e)}function jo(n,e){return L({},Oo,n,e)}function Yo(n,e){var t=Fe(n);if(!!t)return L({href:t},Mo,n,e)}function Wo(n,e){return L({},wo,n,e)}function Zo(n,e){var t=n.getAttribute("name"),r=L({},Po,n,e);if(!!r){var i=e[e.length-1];i[t]=r}}function Uo(n,e){return L({},Ro,n,e)}function $o(n,e){return L({},Fo,n,e)}function bo(n,e){return L({},Lo,n,e)}function zo(n,e){return L({},Ao,n,e)}function ko(n,e){return L({},Io,n,e)}function Ko(n,e){return S(n)}var Vo=To,Ho=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),q=[null,"http://www.opengis.net/wmts/1.0"],xt=[null,"http://www.opengis.net/ows/1.1"],Bo=P(q,{Contents:y(ua)}),qo=function(n){Ho(e,n);function e(){var t=n.call(this)||this;return t.owsParser_=new Vo,t}return e.prototype.readFromNode=function(t){var r=t.getAttribute("version");r&&(r=r.trim());var i=this.owsParser_.readFromNode(t);return i?(i.version=r,i=L(i,Bo,t,[]),i||null):null},e}(Sr),Jo=P(q,{Layer:$(la),TileMatrixSet:$(ha)}),Qo=P(q,{Style:$(fa),Format:$(S),TileMatrixSetLink:$(ca),Dimension:$(va),ResourceURL:$(pa)},P(xt,{Title:y(S),Abstract:y(S),WGS84BoundingBox:y(Or),Identifier:y(S)})),ta=P(q,{LegendURL:$(ga)},P(xt,{Title:y(S),Identifier:y(S)})),ea=P(q,{TileMatrixSet:y(S),TileMatrixSetLimits:y(ya)}),ra=P(q,{TileMatrixLimits:se(_a)}),na=P(q,{TileMatrix:y(S),MinTileRow:y(ot),MaxTileRow:y(ot),MinTileCol:y(ot),MaxTileCol:y(ot)}),ia=P(q,{Default:y(S),Value:$(S)},P(xt,{Identifier:y(S)})),oa=P(xt,{LowerCorner:se(ue),UpperCorner:se(ue)}),aa=P(q,{WellKnownScaleSet:y(S),TileMatrix:$(da)},P(xt,{SupportedCRS:y(S),Identifier:y(S),BoundingBox:y(Or)})),sa=P(q,{TopLeftCorner:y(ue),ScaleDenominator:y(co),TileWidth:y(ot),TileHeight:y(ot),MatrixWidth:y(ot),MatrixHeight:y(ot)},P(xt,{Identifier:y(S)}));function ua(n,e){return L({},Jo,n,e)}function la(n,e){return L({},Qo,n,e)}function ha(n,e){return L({},aa,n,e)}function fa(n,e){var t=L({},ta,n,e);if(!!t){var r=n.getAttribute("isDefault")==="true";return t.isDefault=r,t}}function ca(n,e){return L({},ea,n,e)}function va(n,e){return L({},ia,n,e)}function pa(n,e){var t=n.getAttribute("format"),r=n.getAttribute("template"),i=n.getAttribute("resourceType"),o={};return t&&(o.format=t),r&&(o.template=r),i&&(o.resourceType=i),o}function Or(n,e){var t=L([],oa,n,e);if(t.length==2)return Jt(t)}function ga(n,e){var t={};return t.format=n.getAttribute("format"),t.href=Fe(n),t}function ue(n,e){var t=S(n).split(/\s+/);if(!(!t||t.length!=2)){var r=+t[0],i=+t[1];if(!(isNaN(r)||isNaN(i)))return[r,i]}}function da(n,e){return L({},sa,n,e)}function ya(n,e){return L([],ra,n,e)}function _a(n,e){return L({},na,n,e)}var ma=qo;const wr=Zr("map",{state:()=>({mapRef:null,layers:[{active:!1,label:"Lidar",url:"https://gisserver.gov.si/arcgis/rest/services/TEMELJNE_KARTE/LidarTlaZgradbe_D96/MapServer/WMTS",layerName:"TEMELJNE_KARTE_LidarTlaZgradbe_D96",projection:"EPSG:3794",attributes:"Ministrstvo za kulturo, Ministrstvo za okolje in prostor",preview:"map/skyview.png"},{active:!1,label:"Ortho",url:"https://gisserver.gov.si/arcgis/rest/services/TEMELJNE_KARTE/DOF2021/MapServer/WMTS",layerName:"TEMELJNE_KARTE_DOF2021",projection:"EPSG:3912",attributes:"Ortophoto podlaga, GURS",preview:"map/ortophoto.png"}],bottomDrawer:!1,drawerLoading:!1,clickedFeature:{}}),getters:{getLayers(n){return n.layers},getClickedFeature(n){return n.clickedFeature},getDrawerLoading(n){return n.drawerLoading},showBottomDrawer(n){return n.bottomDrawer},getMap(n){return n.mapRef.map}},actions:{async mapClick(n,e){this.bottomDrawer=!0,this.drawerLoading=!0;try{const t=Me(n);this.clickedFeature={lat:t[1].toFixed(5),lng:t[0].toFixed(5),type:"click"};const r=e.filter(i=>i.values_.type==="poi");if(r.length>0)this.clickedFeature={...r[0].values_};else{const i=await this.getCavesFromLocalStorage(n);if(i){const o=i;this.clickedFeature={id:o.caveNumber,name:o.name,lat:o.lat,lng:o.lon,length:o.length,depth:o.depth,type:"cave"}}}}catch(t){console.log("error while fetching data: ",t)}finally{this.drawerLoading=!1}},hideDrawer(){this.bottomDrawer=!1},saveMapRef(n){this.mapRef=n},async getCavesFromLocalStorage(n){const e=Me(n),t=Ur();let r=4e3/Math.pow(2,this.getMap.getView().getZoom()-9);r=r<5?5:r;const i=await t.getClosestCavesFor({longitude:e[0],latitude:e[1]});return i.length>0&&i[0].distance<=r?i[0]:null},async getRemoteFeatures(n){let e=4e3/Math.pow(2,this.getMap.getView().getZoom()-9);e=e<5?5:e;const t="https://services7.arcgis.com/V2VriwTjJDabpGg6/arcgis/rest/services/2023_marec_export_ekataster_a/FeatureServer/0/query/?f=json&returnGeometry=true&geometry="+encodeURIComponent('{"x":'+n[0]+',"y":'+n[1]+',"spatialReference":{"wkid":102100}}')+`&distance=${e}&geometryType=esriGeometryPoint&inSR=102100&outFields=*&outSR=102100`,i=await(await fetch(t)).text();return new uo().readFeatures(i,{featureProjection:this.getMap.getView().getProjection()})}}});var Ta=.5,tt=!0,Ea=10,ze=.25,xa=function(){function n(e,t,r,i,o,a){this.sourceProj_=e,this.targetProj_=t;var s={},u=qt(this.targetProj_,this.sourceProj_);this.transformInv_=function(d){var g=d[0]+"/"+d[1];return s[g]||(s[g]=u(d)),s[g]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&H(i)==H(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?H(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?H(this.targetProj_.getExtent()):null;var l=pe(r),h=$r(r),f=br(r),c=zr(r),p=this.transformInv_(l),v=this.transformInv_(h),m=this.transformInv_(f),E=this.transformInv_(c),T=Ea+(a?Math.max(0,Math.ceil(kr(Qt(r)/(a*a*256*256)))):0);if(this.addQuad_(l,h,f,c,p,v,m,E,T),this.wrapsXInSource_){var _=1/0;this.triangles_.forEach(function(d,g,R){_=Math.min(_,d.source[0][0],d.source[1][0],d.source[2][0])}),this.triangles_.forEach(function(d){if(Math.max(d.source[0][0],d.source[1][0],d.source[2][0])-_>this.sourceWorldWidth_/2){var g=[[d.source[0][0],d.source[0][1]],[d.source[1][0],d.source[1][1]],[d.source[2][0],d.source[2][1]]];g[0][0]-_>this.sourceWorldWidth_/2&&(g[0][0]-=this.sourceWorldWidth_),g[1][0]-_>this.sourceWorldWidth_/2&&(g[1][0]-=this.sourceWorldWidth_),g[2][0]-_>this.sourceWorldWidth_/2&&(g[2][0]-=this.sourceWorldWidth_);var R=Math.min(g[0][0],g[1][0],g[2][0]),G=Math.max(g[0][0],g[1][0],g[2][0]);G-R<this.sourceWorldWidth_/2&&(d.source=g)}}.bind(this))}s={}}return n.prototype.addTriangle_=function(e,t,r,i,o,a){this.triangles_.push({source:[i,o,a],target:[e,t,r]})},n.prototype.addQuad_=function(e,t,r,i,o,a,s,u,l){var h=Jt([o,a,s,u]),f=this.sourceWorldWidth_?H(h)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&f>.5&&f<1,v=!1;if(l>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var m=Jt([e,t,r,i]),E=H(m)/this.targetWorldWidth_;v=E>ze||v}!p&&this.sourceProj_.isGlobal()&&f&&(v=f>ze||v)}if(!(!v&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Qe(h,this.maxSourceExtent_))){var T=0;if(!v&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(u[0])||!isFinite(u[1]))){if(l>0)v=!0;else if(T=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(s[0])||!isFinite(s[1])?2:0)+(!isFinite(u[0])||!isFinite(u[1])?1:0),T!=1&&T!=2&&T!=4&&T!=8)return}if(l>0){if(!v){var _=[(e[0]+r[0])/2,(e[1]+r[1])/2],d=this.transformInv_(_),g=void 0;if(p){var R=(Nt(o[0],c)+Nt(s[0],c))/2;g=R-Nt(d[0],c)}else g=(o[0]+s[0])/2-d[0];var G=(o[1]+s[1])/2-d[1],O=g*g+G*G;v=O>this.errorThresholdSquared_}if(v){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){var A=[(t[0]+r[0])/2,(t[1]+r[1])/2],F=this.transformInv_(A),I=[(i[0]+e[0])/2,(i[1]+e[1])/2],N=this.transformInv_(I);this.addQuad_(e,t,A,I,o,a,F,N,l-1),this.addQuad_(I,A,r,i,N,F,s,u,l-1)}else{var j=[(e[0]+t[0])/2,(e[1]+t[1])/2],z=this.transformInv_(j),J=[(r[0]+i[0])/2,(r[1]+i[1])/2],Y=this.transformInv_(J);this.addQuad_(e,j,J,i,o,z,Y,u,l-1),this.addQuad_(j,t,r,J,z,a,s,Y,l-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(T&11)==0&&this.addTriangle_(e,r,i,o,s,u),(T&14)==0&&this.addTriangle_(e,r,t,o,s,a),T&&((T&13)==0&&this.addTriangle_(t,i,e,a,u,o),(T&7)==0&&this.addTriangle_(t,i,r,a,u,s))}},n.prototype.calculateSourceExtent=function(){var e=Ft();return this.triangles_.forEach(function(t,r,i){var o=t.source;zt(e,o[0]),zt(e,o[1]),zt(e,o[2])}),e},n.prototype.getTriangles=function(){return this.triangles_},n}(),Ca=xa,ke={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},Vt,Pr=[];function Ke(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function Ht(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function Sa(){if(Vt===void 0){var n=document.createElement("canvas").getContext("2d");n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Ke(n,4,5,4,0),Ke(n,4,5,0,5);var e=n.getImageData(0,0,3,3).data;Vt=Ht(e,0)||Ht(e,4)||Ht(e,8)}return Vt}function Ve(n,e,t,r){var i=Hr(t,e,n),o=Ae(e,r,t),a=e.getMetersPerUnit();a!==void 0&&(o*=a);var s=n.getMetersPerUnit();s!==void 0&&(o/=s);var u=n.getExtent();if(!u||tr(u,i)){var l=Ae(n,o,i)/o;isFinite(l)&&l>0&&(o/=l)}return o}function Oa(n,e,t,r){var i=fe(t),o=Ve(n,e,i,r);return(!isFinite(o)||o<=0)&&Je(t,function(a){return o=Ve(n,e,a,r),isFinite(o)&&o>0}),o}function wa(n,e,t,r,i,o,a,s,u,l,h,f){var c=ae(Math.round(t*n),Math.round(t*e),Pr);if(f||B(c,ke),u.length===0)return c.canvas;c.scale(t,t);function p(g){return Math.round(g*t)/t}c.globalCompositeOperation="lighter";var v=Ft();u.forEach(function(g,R,G){Kr(v,g.extent)});var m=H(v),E=ct(v),T=ae(Math.round(t*m/r),Math.round(t*E/r));f||B(T,ke);var _=t/r;u.forEach(function(g,R,G){var O=g.extent[0]-v[0],A=-(g.extent[3]-v[3]),F=H(g.extent),I=ct(g.extent);g.image.width>0&&g.image.height>0&&T.drawImage(g.image,l,l,g.image.width-2*l,g.image.height-2*l,O*_,A*_,F*_,I*_)});var d=pe(a);return s.getTriangles().forEach(function(g,R,G){var O=g.source,A=g.target,F=O[0][0],I=O[0][1],N=O[1][0],j=O[1][1],z=O[2][0],J=O[2][1],Y=p((A[0][0]-d[0])/o),D=p(-(A[0][1]-d[1])/o),U=p((A[1][0]-d[0])/o),W=p(-(A[1][1]-d[1])/o),Ct=p((A[2][0]-d[0])/o),St=p(-(A[2][1]-d[1])/o),pt=F,M=I;F=0,I=0,N-=pt,j-=M,z-=pt,J-=M;var ut=[[N,j,0,0,U-Y],[z,J,0,0,Ct-Y],[0,0,N,j,W-D],[0,0,z,J,St-D]],k=Vr(ut);if(!!k){if(c.save(),c.beginPath(),Sa()||!f){c.moveTo(U,W);for(var K=4,Q=Y-U,Ot=D-W,V=0;V<K;V++)c.lineTo(U+p((V+1)*Q/K),W+p(V*Ot/(K-1))),V!=K-1&&c.lineTo(U+p((V+1)*Q/K),W+p((V+1)*Ot/(K-1)));c.lineTo(Ct,St)}else c.moveTo(U,W),c.lineTo(Y,D),c.lineTo(Ct,St);c.clip(),c.transform(k[0],k[2],k[1],k[3],Y,D),c.translate(v[0]-pt,v[3]-M),c.scale(r/t,-r/t),c.drawImage(T.canvas,0,0),c.restore()}}),h&&(c.save(),c.globalCompositeOperation="source-over",c.strokeStyle="black",c.lineWidth=1,s.getTriangles().forEach(function(g,R,G){var O=g.target,A=(O[0][0]-d[0])/o,F=-(O[0][1]-d[1])/o,I=(O[1][0]-d[0])/o,N=-(O[1][1]-d[1])/o,j=(O[2][0]-d[0])/o,z=-(O[2][1]-d[1])/o;c.beginPath(),c.moveTo(I,N),c.lineTo(A,F),c.lineTo(j,z),c.closePath(),c.stroke()}),c.restore()),c.canvas}var Pa=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ra=function(n){Pa(e,n);function e(t,r,i,o,a,s,u,l,h,f,c,p){var v=n.call(this,a,x.IDLE,{interpolate:!!p})||this;v.renderEdges_=c!==void 0?c:!1,v.pixelRatio_=u,v.gutter_=l,v.canvas_=null,v.sourceTileGrid_=r,v.targetTileGrid_=o,v.wrappedTileCoord_=s||a,v.sourceTiles_=[],v.sourcesListenerKeys_=null,v.sourceZ_=0;var m=o.getTileCoordExtent(v.wrappedTileCoord_),E=v.targetTileGrid_.getExtent(),T=v.sourceTileGrid_.getExtent(),_=E?kt(m,E):m;if(Qt(_)===0)return v.state=x.EMPTY,v;var d=t.getExtent();d&&(T?T=kt(T,d):T=d);var g=o.getResolution(v.wrappedTileCoord_[0]),R=Oa(t,i,_,g);if(!isFinite(R)||R<=0)return v.state=x.EMPTY,v;var G=f!==void 0?f:Ta;if(v.triangulation_=new Ca(t,i,_,T,R*G,g),v.triangulation_.getTriangles().length===0)return v.state=x.EMPTY,v;v.sourceZ_=r.getZForResolution(R);var O=v.triangulation_.calculateSourceExtent();if(T&&(t.canWrapX()?(O[1]=te(O[1],T[1],T[3]),O[3]=te(O[3],T[1],T[3])):O=kt(O,T)),!Qt(O))v.state=x.EMPTY;else{for(var A=r.getTileRangeForExtentAndZ(O,v.sourceZ_),F=A.minX;F<=A.maxX;F++)for(var I=A.minY;I<=A.maxY;I++){var N=h(v.sourceZ_,F,I,u);N&&v.sourceTiles_.push(N)}v.sourceTiles_.length===0&&(v.state=x.EMPTY)}return v}return e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(h,f,c){h&&h.getState()==x.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(h.tileCoord),image:h.getImage()})}.bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=x.ERROR;else{var r=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(r),o=typeof i=="number"?i:i[0],a=typeof i=="number"?i:i[1],s=this.targetTileGrid_.getResolution(r),u=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=wa(o,a,this.pixelRatio_,u,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=x.LOADED}this.changed()},e.prototype.load=function(){if(this.state==x.IDLE){this.state=x.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(r,i,o){var a=r.getState();if(a==x.IDLE||a==x.LOADING){t++;var s=Rt(r,at.CHANGE,function(u){var l=r.getState();(l==x.LOADED||l==x.ERROR||l==x.EMPTY)&&(mt(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}.bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(r,i,o){var a=r.getState();a==x.IDLE&&r.load()})}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(mt),this.sourcesListenerKeys_=null},e.prototype.release=function(){this.canvas_&&(li(this.canvas_.getContext("2d")),Pr.push(this.canvas_),this.canvas_=null),n.prototype.release.call(this)},e}(dr),Fa=Ra,Bt={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Ma=[0,0,0],nt=5,Aa=function(){function n(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,b(hn(this.resolutions_,function(a,s){return s-a},!0),17);var t;if(!e.origins){for(var r=0,i=this.resolutions_.length-1;r<i;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,b(this.origins_.length==this.resolutions_.length,20));var o=e.extent;o!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=pe(o)),b(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,b(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:yr,b(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=o!==void 0?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(a,s){var u=new Er(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(o){var l=this.getTileRangeForExtentAndZ(o,s);u.minX=Math.max(l.minX,u.minX),u.maxX=Math.min(l.maxX,u.maxX),u.minY=Math.max(l.minY,u.minY),u.maxY=Math.min(l.maxY,u.maxY)}return u},this):o&&this.calculateTileRanges_(o)}return n.prototype.forEachTileCoord=function(e,t,r){for(var i=this.getTileRangeForExtentAndZ(e,t),o=i.minX,a=i.maxX;o<=a;++o)for(var s=i.minY,u=i.maxY;s<=u;++s)r([t,o,s])},n.prototype.forEachTileCoordParentTileRange=function(e,t,r,i){var o,a,s,u=null,l=e[0]-1;for(this.zoomFactor_===2?(a=e[1],s=e[2]):u=this.getTileCoordExtent(e,i);l>=this.minZoom;){if(this.zoomFactor_===2?(a=Math.floor(a/2),s=Math.floor(s/2),o=dt(a,a,s,s,r)):o=this.getTileRangeForExtentAndZ(u,l,r),t(l,o))return!0;--l}return!1},n.prototype.getExtent=function(){return this.extent_},n.prototype.getMaxZoom=function(){return this.maxZoom},n.prototype.getMinZoom=function(){return this.minZoom},n.prototype.getOrigin=function(e){return this.origin_?this.origin_:this.origins_[e]},n.prototype.getResolution=function(e){return this.resolutions_[e]},n.prototype.getResolutions=function(){return this.resolutions_},n.prototype.getTileCoordChildTileRange=function(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){var i=e[1]*2,o=e[2]*2;return dt(i,i+1,o,o+1,t)}var a=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e[0]+1,t)}return null},n.prototype.getTileRangeForTileCoordAndZ=function(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;var i=e[0],o=e[1],a=e[2];if(t===i)return dt(o,a,o,a,r);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,t-i),u=Math.floor(o*s),l=Math.floor(a*s);if(t<i)return dt(u,u,l,l,r);var h=Math.floor(s*(o+1))-1,f=Math.floor(s*(a+1))-1;return dt(u,h,l,f,r)}var c=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(c,t,r)},n.prototype.getTileRangeExtent=function(e,t,r){var i=this.getOrigin(e),o=this.getResolution(e),a=it(this.getTileSize(e),this.tmpSize_),s=i[0]+t.minX*a[0]*o,u=i[0]+(t.maxX+1)*a[0]*o,l=i[1]+t.minY*a[1]*o,h=i[1]+(t.maxY+1)*a[1]*o;return ee(s,l,u,h,r)},n.prototype.getTileRangeForExtentAndZ=function(e,t,r){var i=Ma;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,i);var o=i[1],a=i[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,i),dt(o,i[1],a,i[2],r)},n.prototype.getTileCoordCenter=function(e){var t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=it(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]},n.prototype.getTileCoordExtent=function(e,t){var r=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=it(this.getTileSize(e[0]),this.tmpSize_),a=r[0]+e[1]*o[0]*i,s=r[1]-(e[2]+1)*o[1]*i,u=a+o[0]*i,l=s+o[1]*i;return ee(a,s,u,l,t)},n.prototype.getTileCoordForCoordAndResolution=function(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)},n.prototype.getTileCoordForXYAndResolution_=function(e,t,r,i,o){var a=this.getZForResolution(r),s=r/this.getResolution(a),u=this.getOrigin(a),l=it(this.getTileSize(a),this.tmpSize_),h=s*(e-u[0])/r/l[0],f=s*(u[1]-t)/r/l[1];return i?(h=Lt(h,nt)-1,f=Lt(f,nt)-1):(h=It(h,nt),f=It(f,nt)),Ue(a,h,f,o)},n.prototype.getTileCoordForXYAndZ_=function(e,t,r,i,o){var a=this.getOrigin(r),s=this.getResolution(r),u=it(this.getTileSize(r),this.tmpSize_),l=(e-a[0])/s/u[0],h=(a[1]-t)/s/u[1];return i?(l=Lt(l,nt)-1,h=Lt(h,nt)-1):(l=It(l,nt),h=It(h,nt)),Ue(r,l,h,o)},n.prototype.getTileCoordForCoordAndZ=function(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)},n.prototype.getTileCoordResolution=function(e){return this.resolutions_[e[0]]},n.prototype.getTileSize=function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]},n.prototype.getFullTileRange=function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null},n.prototype.getZForResolution=function(e,t){var r=un(this.resolutions_,e,t||0);return te(r,this.minZoom,this.maxZoom)},n.prototype.tileCoordIntersectsViewport=function(e,t){return fr(t,0,t.length,2,this.getTileCoordExtent(e))},n.prototype.calculateTileRanges_=function(e){for(var t=this.resolutions_.length,r=new Array(t),i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r},n}(),Rr=Aa;function Fr(n){var e=n.getDefaultTileGrid();return e||(e=Xa(n),n.setDefaultTileGrid(e)),e}function La(n,e,t){var r=e[0],i=n.getTileCoordCenter(e),o=Mr(t);if(tr(o,i))return e;var a=H(o),s=Math.ceil((o[0]-i[0])/a);return i[0]+=a*s,n.getTileCoordForCoordAndZ(i,r)}function Ia(n,e,t,r){var i=r!==void 0?r:"top-left",o=Ga(n,e,t);return new Rr({extent:n,origin:qr(n,i),resolutions:o,tileSize:t})}function Ga(n,e,t,r){for(var i=e!==void 0?e:Si,o=ct(n),a=H(n),s=it(t!==void 0?t:yr),u=r>0?r:Math.max(a/s[0],o/s[1]),l=i+1,h=new Array(l),f=0;f<l;++f)h[f]=u/Math.pow(2,f);return h}function Xa(n,e,t,r){var i=Mr(n);return Ia(i,e,t,r)}function Mr(n){n=X(n);var e=n.getExtent();if(!e){var t=180*Br[he.DEGREES]/n.getMetersPerUnit();e=ee(-t,-t,t,t)}return e}var Ar=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Na=function(n){Ar(e,n);function e(t){var r=n.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate})||this;r.on,r.once,r.un,r.opaque_=t.opaque!==void 0?t.opaque:!1,r.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,r.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;var i=[256,256];return r.tileGrid&&it(r.tileGrid.getTileSize(r.tileGrid.getMinZoom()),i),r.tileCache=new Tr(t.cacheSize||0),r.tmpSize=[0,0],r.key_=t.key||"",r.tileOptions={transition:t.transition,interpolate:t.interpolate},r.zDirection=t.zDirection?t.zDirection:0,r}return e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,r){var i=this.getTileCacheForProjection(t);i&&i.expireCache(r)},e.prototype.forEachLoadedTile=function(t,r,i,o){var a=this.getTileCacheForProjection(t);if(!a)return!1;for(var s=!0,u,l,h,f=i.minX;f<=i.maxX;++f)for(var c=i.minY;c<=i.maxY;++c)l=bt(r,f,c),h=!1,a.containsKey(l)&&(u=a.get(l),h=u.getState()===x.LOADED,h&&(h=o(u)!==!1)),h||(s=!1);return s},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},e.prototype.getTile=function(t,r,i,o,a){return w()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Fr(t)},e.prototype.getTileCacheForProjection=function(t){var r=this.getProjection();return b(r===null||et(r,t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,r,i){var o=this.getTileGridForProjection(i),a=this.getTilePixelRatio(r),s=it(o.getTileSize(t),this.tmpSize);return a==1?s:ui(s,a,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,r){var i=r!==void 0?r:this.getProjection(),o=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=La(o,t,i)),ji(t,o)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),n.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,r){var i=this.getTileCacheForProjection(r);t>i.highWaterMark&&(i.highWaterMark=t)},e.prototype.useTile=function(t,r,i,o){},e}(di),Da=function(n){Ar(e,n);function e(t,r){var i=n.call(this,t)||this;return i.tile=r,i}return e}(ge),ja=Na;function Ya(n,e){var t=/\{z\}/g,r=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(a,s,u){if(a)return n.replace(t,a[0].toString()).replace(r,a[1].toString()).replace(i,a[2].toString()).replace(o,function(){var l=a[0],h=e.getFullTileRange(l);b(h,55);var f=h.getHeight()-a[2]-1;return f.toString()})}}function Wa(n,e){for(var t=n.length,r=new Array(t),i=0;i<t;++i)r[i]=Ya(n[i],e);return le(r)}function le(n){return n.length===1?n[0]:function(e,t,r){if(e){var i=Di(e),o=Nt(i,n.length);return n[o](e,t,r)}else return}}function Lr(n){var e=[],t=/\{([a-z])-([a-z])\}/.exec(n);if(t){var r=t[1].charCodeAt(0),i=t[2].charCodeAt(0),o=void 0;for(o=r;o<=i;++o)e.push(n.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){for(var a=parseInt(t[2],10),s=parseInt(t[1],10);s<=a;s++)e.push(n.replace(t[0],s.toString()));return e}return e.push(n),e}var Za=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ua=function(n){Za(e,n);function e(t){var r=n.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return r.generateTileUrlFunction_=r.tileUrlFunction===e.prototype.tileUrlFunction,r.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(r.tileUrlFunction=t.tileUrlFunction),r.urls=null,t.urls?r.setUrls(t.urls):t.url&&r.setUrl(t.url),r.tileLoadingKeys_={},r}return e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var r=t.target,i=Pt(r),o=r.getState(),a;o==x.LOADING?(this.tileLoadingKeys_[i]=!0,a=Bt.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],a=o==x.ERROR?Bt.TILELOADERROR:o==x.LOADED?Bt.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new Da(a,r))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,r){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof r!="undefined"?this.setKey(r):this.changed()},e.prototype.setUrl=function(t){var r=Lr(t);this.urls=r,this.setUrls(r)},e.prototype.setUrls=function(t){this.urls=t;var r=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Wa(t,this.tileGrid),r):this.setKey(r)},e.prototype.tileUrlFunction=function(t,r,i){},e.prototype.useTile=function(t,r,i){var o=bt(t,r,i);this.tileCache.containsKey(o)&&this.tileCache.get(o)},e}(ja),$a=Ua,ba=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),za=function(n){ba(e,n);function e(t){var r=this,i=t.imageSmoothing!==void 0?t.imageSmoothing:!0;return t.interpolate!==void 0&&(i=t.interpolate),r=n.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:ka,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:i,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this,r.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,r.tileClass=t.tileClass!==void 0?t.tileClass:Ci,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,r.renderReprojectionEdges_=!1,r}return e.prototype.canExpireCache=function(){if(!tt)return n.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,r){if(!tt){n.prototype.expireCache.call(this,t,r);return}var i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?r:{});for(var o in this.tileCacheForProjection){var a=this.tileCacheForProjection[o];a.expireCache(a==i?r:{})}},e.prototype.getGutterForProjection=function(t){return tt&&this.getProjection()&&t&&!et(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){var t=n.prototype.getKey.call(this);return this.getInterpolate()||(t+=":disable-interpolation"),t},e.prototype.getOpaque=function(t){return tt&&this.getProjection()&&t&&!et(this.getProjection(),t)?!1:n.prototype.getOpaque.call(this,t)},e.prototype.getTileGridForProjection=function(t){if(!tt)return n.prototype.getTileGridForProjection.call(this,t);var r=this.getProjection();if(this.tileGrid&&(!r||et(r,t)))return this.tileGrid;var i=Pt(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Fr(t)),this.tileGridForProjection[i]},e.prototype.getTileCacheForProjection=function(t){if(!tt)return n.prototype.getTileCacheForProjection.call(this,t);var r=this.getProjection();if(!r||et(r,t))return this.tileCache;var i=Pt(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Tr(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},e.prototype.createTile_=function(t,r,i,o,a,s){var u=[t,r,i],l=this.getTileCoordForTileUrlFunction(u,a),h=l?this.tileUrlFunction(l,o,a):void 0,f=new this.tileClass(u,h!==void 0?x.IDLE:x.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=s,f.addEventListener(at.CHANGE,this.handleTileChange.bind(this)),f},e.prototype.getTile=function(t,r,i,o,a){var s=this.getProjection();if(!tt||!s||!a||et(s,a))return this.getTileInternal(t,r,i,o,s||a);var u=this.getTileCacheForProjection(a),l=[t,r,i],h=void 0,f=mr(l);u.containsKey(f)&&(h=u.get(f));var c=this.getKey();if(h&&h.key==c)return h;var p=this.getTileGridForProjection(s),v=this.getTileGridForProjection(a),m=this.getTileCoordForTileUrlFunction(l,a),E=new Fa(s,p,a,v,l,m,this.getTilePixelRatio(o),this.getGutter(),function(T,_,d,g){return this.getTileInternal(T,_,d,g,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return E.key=c,h?(E.interimTile=h,E.refreshInterimChain(),u.replace(f,E)):u.set(f,E),E},e.prototype.getTileInternal=function(t,r,i,o,a){var s=null,u=bt(t,r,i),l=this.getKey();if(!this.tileCache.containsKey(u))s=this.createTile_(t,r,i,o,a,l),this.tileCache.set(u,s);else if(s=this.tileCache.get(u),s.key!=l){var h=s;s=this.createTile_(t,r,i,o,a,l),h.getState()==x.IDLE?s.interimTile=h.interimTile:s.interimTile=h,s.refreshInterimChain(),this.tileCache.replace(u,s)}return s},e.prototype.setRenderReprojectionEdges=function(t){if(!(!tt||this.renderReprojectionEdges_==t)){this.renderReprojectionEdges_=t;for(var r in this.tileCacheForProjection)this.tileCacheForProjection[r].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,r){if(tt){var i=X(t);if(i){var o=Pt(i);o in this.tileGridForProjection||(this.tileGridForProjection[o]=r)}}},e}($a);function ka(n,e){n.getImage().src=e}var Ka=za;function He(n,e){var t=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&t.push(i+"="+encodeURIComponent(e[i]))});var r=t.join("&");return n=n.replace(/[?&]$/,""),n=n.indexOf("?")===-1?n+"?":n+"&",n+r}var Va=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ha=function(n){Va(e,n);function e(t){var r=n.call(this,{extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes})||this;return r.matrixIds_=t.matrixIds,r}return e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(Rr);function Ba(n,e,t){var r=[],i=[],o=[],a=[],s=[],u=t!==void 0?t:[],l="SupportedCRS",h="TileMatrix",f="Identifier",c="ScaleDenominator",p="TopLeftCorner",v="TileWidth",m="TileHeight",E=n[l],T=X(E),_=T.getMetersPerUnit(),d=T.getAxisOrientation().substr(0,2)=="ne";return n[h].sort(function(g,R){return R[c]-g[c]}),n[h].forEach(function(g){var R;if(u.length>0?R=yt(u,function(F){return g[f]==F[h]?!0:g[f].indexOf(":")===-1?n[f]+":"+g[f]===F[h]:!1}):R=!0,R){i.push(g[f]);var G=g[c]*28e-5/_,O=g[v],A=g[m];d?o.push([g[p][1],g[p][0]]):o.push(g[p]),r.push(G),a.push(O==A?O:[O,A]),s.push([g.MatrixWidth,g.MatrixHeight])}}),new Ha({extent:e,origins:o,resolutions:r,matrixIds:i,tileSizes:a,sizes:s})}var qa=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ja=function(n){qa(e,n);function e(t){var r=this,i=t.imageSmoothing!==void 0?t.imageSmoothing:!0;t.interpolate!==void 0&&(i=t.interpolate);var o=t.requestEncoding!==void 0?t.requestEncoding:"KVP",a=t.tileGrid,s=t.urls;return s===void 0&&t.url!==void 0&&(s=Lr(t.url)),r=n.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:i,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:a,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:s,wrapX:t.wrapX!==void 0?t.wrapX:!1,transition:t.transition,zDirection:t.zDirection})||this,r.version_=t.version!==void 0?t.version:"1.0.0",r.format_=t.format!==void 0?t.format:"image/jpeg",r.dimensions_=t.dimensions!==void 0?t.dimensions:{},r.layer_=t.layer,r.matrixSet_=t.matrixSet,r.style_=t.style,r.requestEncoding_=o,r.setKey(r.getKeyForDimensions_()),s&&s.length>0&&(r.tileUrlFunction=le(s.map(r.createFromWMTSTemplate.bind(r)))),r}return e.prototype.setUrls=function(t){this.urls=t;var r=t.join(`
`);this.setTileUrlFunction(le(t.map(this.createFromWMTSTemplate.bind(this))),r)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,r=[];for(var i in this.dimensions_)r[t++]=i+"-"+this.dimensions_[i];return r.join("/")},e.prototype.updateDimensions=function(t){B(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e.prototype.createFromWMTSTemplate=function(t){var r=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};r=="KVP"&&B(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=r=="KVP"?He(t,i):t.replace(/\{(\w+?)\}/g,function(s,u){return u.toLowerCase()in i?i[u.toLowerCase()]:s});var o=this.tileGrid,a=this.dimensions_;return function(s,u,l){if(s){var h={TileMatrix:o.getMatrixId(s[0]),TileCol:s[1],TileRow:s[2]};B(h,a);var f=t;return r=="KVP"?f=He(f,h):f=f.replace(/\{(\w+?)\}/g,function(c,p){return h[p]}),f}else return}},e}(Ka),Qa=Ja;function ts(n,e){var t=n.Contents.Layer,r=yt(t,function(M,ut,k){return M.Identifier==e.layer});if(r===null)return null;var i=n.Contents.TileMatrixSet,o;r.TileMatrixSetLink.length>1?"projection"in e?o=Kt(r.TileMatrixSetLink,function(M,ut,k){var K=yt(i,function(Ir){return Ir.Identifier==M.TileMatrixSet}),Q=K.SupportedCRS,Ot=X(Q),V=X(e.projection);return Ot&&V?et(Ot,V):Q==e.projection}):o=Kt(r.TileMatrixSetLink,function(M,ut,k){return M.TileMatrixSet==e.matrixSet}):o=0,o<0&&(o=0);var a=r.TileMatrixSetLink[o].TileMatrixSet,s=r.TileMatrixSetLink[o].TileMatrixSetLimits,u=r.Format[0];"format"in e&&(u=e.format),o=Kt(r.Style,function(M,ut,k){return"style"in e?M.Title==e.style:M.isDefault}),o<0&&(o=0);var l=r.Style[o].Identifier,h={};"Dimension"in r&&r.Dimension.forEach(function(M,ut,k){var K=M.Identifier,Q=M.Default;Q===void 0&&(Q=M.Value[0]),h[K]=Q});var f=n.Contents.TileMatrixSet,c=yt(f,function(M,ut,k){return M.Identifier==a}),p,v=c.SupportedCRS;if(v&&(p=X(v)),"projection"in e){var m=X(e.projection);m&&(!p||et(m,p))&&(p=m)}var E=!1,T=p.getAxisOrientation().substr(0,2)=="ne",_=c.TileMatrix[0],d={MinTileCol:0,MinTileRow:0,MaxTileCol:_.MatrixWidth-1,MaxTileRow:_.MatrixHeight-1};if(s){d=s[s.length-1];var g=yt(c.TileMatrix,function(M){return M.Identifier===d.TileMatrix||c.Identifier+":"+M.Identifier===d.TileMatrix});g&&(_=g)}var R=_.ScaleDenominator*28e-5/p.getMetersPerUnit(),G=T?[_.TopLeftCorner[1],_.TopLeftCorner[0]]:_.TopLeftCorner,O=_.TileWidth*R,A=_.TileHeight*R,F=c.BoundingBox;F&&T&&(F=[F[1],F[0],F[3],F[2]]);var I=[G[0]+O*d.MinTileCol,G[1]-A*(1+d.MaxTileRow),G[0]+O*(1+d.MaxTileCol),G[1]-A*d.MinTileRow];if(F!==void 0&&!ve(F,I)){var N=r.WGS84BoundingBox,j=X("EPSG:4326").getExtent();if(I=F,N)E=N[0]===j[0]&&N[2]===j[2];else{var z=Jr(F,c.SupportedCRS,"EPSG:4326");E=z[0]-1e-10<=j[0]&&z[2]+1e-10>=j[2]}}var J=Ba(c,I,s),Y=[],D=e.requestEncoding;if(D=D!==void 0?D:"","OperationsMetadata"in n&&"GetTile"in n.OperationsMetadata)for(var U=n.OperationsMetadata.GetTile.DCP.HTTP.Get,W=0,Ct=U.length;W<Ct;++W)if(U[W].Constraint){var St=yt(U[W].Constraint,function(M){return M.name=="GetEncoding"}),pt=St.AllowedValues.Value;if(D===""&&(D=pt[0]),D==="KVP")sn(pt,"KVP")&&Y.push(U[W].href);else break}else U[W].href&&(D="KVP",Y.push(U[W].href));return Y.length===0&&(D="REST",r.ResourceURL.forEach(function(M){M.resourceType==="tile"&&(u=M.format,Y.push(M.template))})),{urls:Y,layer:e.layer,matrixSet:a,format:u,projection:p,requestEncoding:D,tileGrid:J,style:l,dimensions:h,wrapX:E,crossOrigin:e.crossOrigin}}const es={props:{layer:Object},setup(){const n=wr();return{layerRef:re(null),mapStore:n}},async mounted(){await(async(e,t)=>{const r=new ma,o=await(await fetch(e.url)).text(),a=r.read(o),s=ts(a,{layer:e.layerName}),u={projection:e.projection,...s,attributions:[e.attributes],crossOrigin:"anonymous"};this.wmtsSource=new Qa(u),t.tileLayer.setVisible(this.layer.active),t.tileLayer.setSource(this.wmtsSource)})(this.layer,this.layerRef)},watch:{layer:{deep:!0,handler:function(n,e){this.layerRef.tileLayer.setVisible(n.active)}}}};function rs(n,e,t,r,i,o){const a=wt("ol-tile-layer");return Dt(),rr(a,{ref:"layerRef"},null,512)}var ns=er(es,[["render",rs]]);const is={components:{CustomWMTSLayer:ns},setup(){const n=wr(),e=re(null),t=re(null),{isSkyViewActive:r,isOrthoPhotoActive:i,getOrthoPhoto:o}=Qr(n);return{skyViewLayer:e,orthoPhotoLayer:t,isSkyViewActive:r,isOrthoPhotoActive:i,mapStore:n,getOrthoPhoto:o}},watch:{isSkyViewActive(n,e){this.skyViewLayer.tileLayer.setVisible(n)}}};function os(n,e,t,r,i,o){const a=wt("ol-source-osm"),s=wt("ol-tile-layer"),u=wt("CustomWMTSLayer"),l=wt("ol-source-xyz");return Dt(),Le(Ge,null,[Gt(s,null,{default:Ie(()=>[Gt(a)]),_:1}),(Dt(!0),Le(Ge,null,tn(r.mapStore.getLayers,h=>(Dt(),rr(u,{key:h.name,layer:h},null,8,["layer"]))),128)),Gt(s,null,{default:Ie(()=>[Gt(l,{url:"https://services7.arcgis.com/V2VriwTjJDabpGg6/ArcGIS/rest/services/2022_marec_export_ekataster_tile_layer/MapServer/WMTS/tile/1.0.0/2022_marec_export_ekataster_tile_layer/default/default028mm/{z}/{y}/{x}.png"})]),_:1})],64)}var hs=er(is,[["render",os]]);export{_e as B,hs as C,ge as E,Wn as F,oe as L,rn as O,ht as P,di as S,us as T,Xe as V,at as a,wr as b,ls as c,rt as e,ss as g,ir as i,Rt as l,mt as u};
