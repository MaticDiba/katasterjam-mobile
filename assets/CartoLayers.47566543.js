import{aD as Tt,aT as wt,aU as L,aV as Ze,aW as Ke,aX as V,aY as ve,aZ as ft,a_ as Xt,a$ as ze,aB as de,ax as ke,b0 as Ve,b1 as qe,aG as Z,b2 as _e,b3 as He,b4 as ge,aI as ye,b5 as Be,aJ as Qe,b6 as k,b7 as kt,b8 as Je,b9 as tr,ba as er,bb as rr,bc as Nt,bd as Yt,be as Ot,bf as It,bg as ir,bh as nr,bi as or,bj as Jt,bk as me,bl as Mt,bm as Wt,aF as bt,bn as xt,bo as St,bp as ar,bq as sr,br as et,bs as ur,_ as Te,r as Ut,ag as mt,j as Pt,H as Ee,aO as lr,k as te,d as Ct,I as ee,F as re,aQ as fr}from"./index.f9934e58.js";var lt=typeof Object.assign=="function"?Object.assign:function(i,e){if(i==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(i),r=1,n=arguments.length;r<n;++r){var o=arguments[r];if(o!=null)for(var a in o)o.hasOwnProperty(a)&&(t[a]=o[a])}return t};function xe(i){for(var e in i)delete i[e]}var Eo=typeof Object.values=="function"?Object.values:function(i){var e=[];for(var t in i)e.push(i[t]);return e};function cr(i){var e;for(e in i)return!1;return!e}var hr=function(){function i(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}return i.prototype.preventDefault=function(){this.defaultPrevented=!0},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i}(),Vt=hr,pr={PROPERTYCHANGE:"propertychange"},vr=function(){function i(){this.disposed=!1}return i.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},i.prototype.disposeInternal=function(){},i}(),dr=vr;function xo(i,e,t){for(var r,n,o=t||Se,a=0,s=i.length,u=!1;a<s;)r=a+(s-a>>1),n=+o(i[r],e),n<0?a=r+1:(s=r,u=!n);return u?a:~a}function Se(i,e){return i>e?1:i<e?-1:0}function _r(i,e){return i.indexOf(e)>=0}function gr(i,e,t){var r=i.length;if(i[0]<=e)return 0;if(e<=i[r-1])return r-1;var n=void 0;if(t>0){for(n=1;n<r;++n)if(i[n]<e)return n-1}else if(t<0){for(n=1;n<r;++n)if(i[n]<=e)return n}else for(n=1;n<r;++n){if(i[n]==e)return n;if(i[n]<e)return typeof t=="function"?t(e,i[n-1],i[n])>0?n-1:n:i[n-1]-e<e-i[n]?n-1:n}return r-1}function So(i,e){for(var t=Array.isArray(e)?e:[e],r=t.length,n=0;n<r;n++)i[i.length]=t[n]}function pt(i,e){for(var t=i.length>>>0,r,n=0;n<t;n++)if(r=i[n],e(r,n,i))return r;return null}function yr(i,e){var t=i.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(i[r]!==e[r])return!1;return!0}function Lt(i,e){var t,r=!i.every(function(n,o){return t=o,!e(n,o,i)});return r?t:-1}function mr(i,e,t){var r=e||Se;return i.every(function(n,o){if(o===0)return!0;var a=r(i[o-1],n);return!(a>0||t&&a===0)})}function Co(){return!0}function ie(){}function Tr(i){var e=!1,t,r,n;return function(){var o=Array.prototype.slice.call(arguments);return(!e||this!==n||!yr(o,r))&&(e=!0,n=this,r=o,t=i.apply(this,arguments)),t}}var Er=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xr=function(i){Er(e,i);function e(t){var r=i.call(this)||this;return r.eventTarget_=t,r.pendingRemovals_=null,r.dispatching_=null,r.listeners_=null,r}return e.prototype.addEventListener=function(t,r){if(!(!t||!r)){var n=this.listeners_||(this.listeners_={}),o=n[t]||(n[t]=[]);o.indexOf(r)===-1&&o.push(r)}},e.prototype.dispatchEvent=function(t){var r=typeof t=="string",n=r?t:t.type,o=this.listeners_&&this.listeners_[n];if(!!o){var a=r?new Vt(t):t;a.target||(a.target=this.eventTarget_||this);var s=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});n in s||(s[n]=0,u[n]=0),++s[n];for(var l,f=0,h=o.length;f<h;++f)if("handleEvent"in o[f]?l=o[f].handleEvent(a):l=o[f].call(this,a),l===!1||a.propagationStopped){l=!1;break}if(--s[n]===0){var c=u[n];for(delete u[n];c--;)this.removeEventListener(n,ie);delete s[n]}return l}},e.prototype.disposeInternal=function(){this.listeners_&&xe(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1},e.prototype.removeEventListener=function(t,r){var n=this.listeners_&&this.listeners_[t];if(n){var o=n.indexOf(r);o!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[o]=ie,++this.pendingRemovals_[t]):(n.splice(o,1),n.length===0&&delete this.listeners_[t]))}},e}(dr),qt=xr,nt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Et(i,e,t,r,n){if(r&&r!==i&&(t=t.bind(r)),n){var o=t;t=function(){i.removeEventListener(e,t),o.apply(this,arguments)}}var a={target:i,type:e,listener:t};return i.addEventListener(e,t),a}function Rt(i,e,t,r){return Et(i,e,t,r,!0)}function vt(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),xe(i))}var Sr=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),At=function(i){Sr(e,i);function e(){var t=i.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return e.prototype.changed=function(){++this.revision_,this.dispatchEvent(nt.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,r){if(Array.isArray(t)){for(var n=t.length,o=new Array(n),a=0;a<n;++a)o[a]=Et(this,t[a],r);return o}else return Et(this,t,r)},e.prototype.onceInternal=function(t,r){var n;if(Array.isArray(t)){var o=t.length;n=new Array(o);for(var a=0;a<o;++a)n[a]=Rt(this,t[a],r)}else n=Rt(this,t,r);return r.ol_key=n,n},e.prototype.unInternal=function(t,r){var n=r.ol_key;if(n)Cr(n);else if(Array.isArray(t))for(var o=0,a=t.length;o<a;++o)this.removeEventListener(t[o],r);else this.removeEventListener(t,r)},e}(qt);At.prototype.on;At.prototype.once;At.prototype.un;function Cr(i){if(Array.isArray(i))for(var e=0,t=i.length;e<t;++e)vt(i[e]);else vt(i)}var Or=At,Ce=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ne=function(i){Ce(e,i);function e(t,r,n){var o=i.call(this,t)||this;return o.key=r,o.oldValue=n,o}return e}(Vt),Pr=function(i){Ce(e,i);function e(t){var r=i.call(this)||this;return r.on,r.once,r.un,Tt(r),r.values_=null,t!==void 0&&r.setProperties(t),r}return e.prototype.get=function(t){var r;return this.values_&&this.values_.hasOwnProperty(t)&&(r=this.values_[t]),r},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&lt({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,r){var n;n="change:".concat(t),this.hasListener(n)&&this.dispatchEvent(new ne(n,t,r)),n=pr.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new ne(n,t,r))},e.prototype.addChangeListener=function(t,r){this.addEventListener("change:".concat(t),r)},e.prototype.removeChangeListener=function(t,r){this.removeEventListener("change:".concat(t),r)},e.prototype.set=function(t,r,n){var o=this.values_||(this.values_={});if(n)o[t]=r;else{var a=o[t];o[t]=r,a!==r&&this.notify(t,a)}},e.prototype.setProperties=function(t,r){for(var n in t)this.set(n,t[n],r)},e.prototype.applyProperties=function(t){!t.values_||lt(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,r){if(this.values_&&t in this.values_){var n=this.values_[t];delete this.values_[t],cr(this.values_)&&(this.values_=null),r||this.notify(t,n)}},e}(Or),Ht=Pr,ot=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"";ot.indexOf("firefox");var Rr=ot.indexOf("safari")!==-1&&ot.indexOf("chrom")==-1;Rr&&(ot.indexOf("version/15.4")>=0||ot.match(/cpu (os|iphone os) 15_4 like mac os x/));ot.indexOf("webkit")!==-1&&ot.indexOf("edge")==-1;ot.indexOf("macintosh");var wr=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,Ar=typeof Image!="undefined"&&Image.prototype.decode;(function(){var i=!1;try{var e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i})();new Array(6);function Fr(){return[1,0,0,1,0,0]}function Ir(i,e,t,r,n,o,a,s){var u=Math.sin(o),l=Math.cos(o);return i[0]=r*l,i[1]=n*u,i[2]=-r*u,i[3]=n*l,i[4]=a*r*l-s*r*u+e,i[5]=a*n*u+s*n*l+t,i}function Mr(i,e,t,r,n,o){for(var a=o||[],s=0,u=e;u<t;u+=r){var l=i[u],f=i[u+1];a[s++]=n[0]*l+n[2]*f+n[4],a[s++]=n[1]*l+n[3]*f+n[5]}return o&&a.length!=s&&(a.length=s),a}function Lr(i,e,t,r,n,o,a){for(var s=a||[],u=Math.cos(n),l=Math.sin(n),f=o[0],h=o[1],c=0,g=e;g<t;g+=r){var v=i[g]-f,A=i[g+1]-h;s[c++]=f+v*u-A*l,s[c++]=h+v*l+A*u;for(var P=g+2;P<g+r;++P)s[c++]=i[P]}return a&&s.length!=c&&(s.length=c),s}function Gr(i,e,t,r,n,o,a,s){for(var u=s||[],l=a[0],f=a[1],h=0,c=e;c<t;c+=r){var g=i[c]-l,v=i[c+1]-f;u[h++]=l+n*g,u[h++]=f+o*v;for(var A=c+2;A<c+r;++A)u[h++]=i[A]}return s&&u.length!=h&&(u.length=h),u}function Dr(i,e,t,r,n,o,a){for(var s=a||[],u=0,l=e;l<t;l+=r){s[u++]=i[l]+n,s[u++]=i[l+1]+o;for(var f=l+2;f<l+r;++f)s[u++]=i[f]}return a&&s.length!=u&&(s.length=u),s}var jr=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oe=Fr(),Xr=function(i){jr(e,i);function e(){var t=i.call(this)||this;return t.extent_=wt(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=Tr(function(r,n,o){if(!o)return this.getSimplifiedGeometry(n);var a=this.clone();return a.applyTransform(o),a.getSimplifiedGeometry(n)}),t}return e.prototype.simplifyTransformed=function(t,r){return this.simplifyTransformedInternal(this.getRevision(),t,r)},e.prototype.clone=function(){return L()},e.prototype.closestPointXY=function(t,r,n,o){return L()},e.prototype.containsXY=function(t,r){var n=this.getClosestPoint([t,r]);return n[0]===t&&n[1]===r},e.prototype.getClosestPoint=function(t,r){var n=r||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return L()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var r=this.computeExtent(this.extent_);(isNaN(r[0])||isNaN(r[1]))&&Ze(r),this.extentRevision_=this.getRevision()}return Ke(this.extent_,t)},e.prototype.rotate=function(t,r){L()},e.prototype.scale=function(t,r,n){L()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return L()},e.prototype.getType=function(){return L()},e.prototype.applyTransform=function(t){L()},e.prototype.intersectsExtent=function(t){return L()},e.prototype.translate=function(t,r){L()},e.prototype.transform=function(t,r){var n=V(t),o=n.getUnits()==ve.TILE_PIXELS?function(a,s,u){var l=n.getExtent(),f=n.getWorldExtent(),h=ft(f)/ft(l);return Ir(oe,f[0],f[3],h,-h,0,0,0),Mr(a,0,a.length,u,oe,s),Xt(n,r)(a,s,u)}:Xt(n,r);return this.applyTransform(o),this},e}(Ht),Nr=Xr,J={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"},Yr=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wr=function(i){Yr(e,i);function e(){var t=i.call(this)||this;return t.layout=J.XY,t.stride=2,t.flatCoordinates=null,t}return e.prototype.computeExtent=function(t){return ze(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return L()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var r=this.getSimplifiedGeometryInternal(t),n=r.getFlatCoordinates();return n.length<this.flatCoordinates.length?r:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,r){this.stride=ae(t),this.layout=t,this.flatCoordinates=r},e.prototype.setCoordinates=function(t,r){L()},e.prototype.setLayout=function(t,r,n){var o;if(t)o=ae(t);else{for(var a=0;a<n;++a)if(r.length===0){this.layout=J.XY,this.stride=2;return}else r=r[0];o=r.length,t=br(o)}this.layout=t,this.stride=o},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,r){var n=this.getFlatCoordinates();if(n){var o=this.getStride();Lr(n,0,n.length,o,t,r,n),this.changed()}},e.prototype.scale=function(t,r,n){var o=r;o===void 0&&(o=t);var a=n;a||(a=de(this.getExtent()));var s=this.getFlatCoordinates();if(s){var u=this.getStride();Gr(s,0,s.length,u,t,o,a,s),this.changed()}},e.prototype.translate=function(t,r){var n=this.getFlatCoordinates();if(n){var o=this.getStride();Dr(n,0,n.length,o,t,r,n),this.changed()}},e}(Nr);function br(i){var e;return i==2?e=J.XY:i==3?e=J.XYZ:i==4&&(e=J.XYZM),e}function ae(i){var e;return i==J.XY?e=2:i==J.XYZ||i==J.XYM?e=3:i==J.XYZM&&(e=4),e}var Ur=Wr;function $r(i,e,t,r){for(var n=0,o=t.length;n<o;++n)i[e++]=t[n];return e}function Zr(i,e,t,r){for(var n=0,o=t.length;n<o;++n)for(var a=t[n],s=0;s<r;++s)i[e++]=a[s];return e}function Oo(i,e,t,r,n){for(var o=n||[],a=0,s=0,u=t.length;s<u;++s){var l=Zr(i,e,t[s],r);o[a++]=l,e=l}return o.length=a,o}var Kr=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zr=function(i){Kr(e,i);function e(t,r){var n=i.call(this)||this;return n.setCoordinates(t,r),n}return e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,r,n,o){var a=this.flatCoordinates,s=ke(t,r,a[0],a[1]);if(s<o){for(var u=this.stride,l=0;l<u;++l)n[l]=a[l];return n.length=u,s}else return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Ve(this.flatCoordinates,t)},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(t){return qe(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=$r(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Ur),Po=zr,kr=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vr=function(i){kr(e,i);function e(t){var r=i.call(this)||this;if(r.on,r.once,r.un,r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addChangeListener(r.geometryName_,r.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){var n=t;r.setGeometry(n)}else{var o=t;r.setProperties(o)}return r}return e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&t.setGeometry(r.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(vt(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Et(t,nt.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?qr(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(Ht);function qr(i){if(typeof i=="function")return i;var e;if(Array.isArray(i))e=i;else{Z(typeof i.getZIndex=="function",41);var t=i;e=[t]}return function(){return e}}var Ro=Vr;function Hr(i,e,t,r,n){var o=_e(n,function(a){return!ut(i,e,t,r,a[0],a[1])});return!o}function ut(i,e,t,r,n,o){for(var a=0,s=i[t-r],u=i[t-r+1];e<t;e+=r){var l=i[e],f=i[e+1];u<=o?f>o&&(l-s)*(o-u)-(n-s)*(f-u)>0&&a++:f<=o&&(l-s)*(o-u)-(n-s)*(f-u)<0&&a--,s=l,u=f}return a!==0}function wo(i,e,t,r,n,o){if(t.length===0||!ut(i,e,t[0],r,n,o))return!1;for(var a=1,s=t.length;a<s;++a)if(ut(i,t[a-1],t[a],r,n,o))return!1;return!0}function Br(i,e,t,r,n){var o;for(e+=r;e<t;e+=r)if(o=n(i.slice(e-r,e),i.slice(e,e+r)),o)return o;return!1}function Oe(i,e,t,r,n){var o=He(wt(),i,e,t,r);return ge(n,o)?ye(n,o)||o[0]>=n[0]&&o[2]<=n[2]||o[1]>=n[1]&&o[3]<=n[3]?!0:Br(i,e,t,r,function(a,s){return Be(n,a,s)}):!1}function Pe(i,e,t,r,n){return!!(Oe(i,e,t,r,n)||ut(i,e,t,r,n[0],n[1])||ut(i,e,t,r,n[0],n[3])||ut(i,e,t,r,n[2],n[1])||ut(i,e,t,r,n[2],n[3]))}function Ao(i,e,t,r,n){if(!Pe(i,e,t[0],r,n))return!1;if(t.length===1)return!0;for(var o=1,a=t.length;o<a;++o)if(Hr(i,t[o-1],t[o],r,n)&&!Oe(i,t[o-1],t[o],r,n))return!1;return!0}var st={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Qr(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}function rt(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}function $t(i,e,t,r){var n;return t&&t.length?n=t.shift():wr?n=new OffscreenCanvas(i||300,e||300):n=document.createElement("canvas"),i&&(n.width=i),e&&(n.height=e),n.getContext("2d",r)}function Jr(i){var e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}var ti=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ei=function(i){ti(e,i);function e(t,r,n,o){var a=i.call(this)||this;return a.extent=t,a.pixelRatio_=n,a.resolution=r,a.state=o,a}return e.prototype.changed=function(){this.dispatchEvent(nt.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return L()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){L()},e}(qt),ri=ei,ii=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(i){ii(e,i);function e(t,r,n,o,a,s){var u=i.call(this,t,r,n,st.IDLE)||this;return u.src_=o,u.image_=new Image,a!==null&&(u.image_.crossOrigin=a),u.unlisten_=null,u.state=st.IDLE,u.imageLoadFunction_=s,u}return e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=st.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=ft(this.extent)/this.image_.height),this.state=st.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){(this.state==st.IDLE||this.state==st.ERROR)&&(this.state=st.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Re(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=ft(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e})(ri);function Re(i,e,t){var r=i,n=!0,o=!1,a=!1,s=[Rt(r,nt.LOAD,function(){a=!0,o||e()})];return r.src&&Ar?(o=!0,r.decode().then(function(){n&&e()}).catch(function(u){n&&(a?e():t())})):s.push(Rt(r,nt.ERROR,t)),function(){n=!1,s.forEach(vt)}}var ni=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oi=function(i){ni(e,i);function e(t){var r=i.call(this)||this;r.projection=V(t.projection),r.attributions_=se(t.attributions),r.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,r.loading=!1,r.state_=t.state!==void 0?t.state:"ready",r.wrapX_=t.wrapX!==void 0?t.wrapX:!1,r.interpolate_=!!t.interpolate,r.viewResolver=null,r.viewRejector=null;var n=r;return r.viewPromise_=new Promise(function(o,a){n.viewResolver=o,n.viewRejector=a}),r}return e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return L()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getInterpolate=function(){return this.interpolate_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=se(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(Ht);function se(i){return i?Array.isArray(i)?function(e){return i}:typeof i=="function"?i:function(e){return[i]}:null}var ai=oi,y={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function si(i){return Math.pow(i,3)}var ui=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),li=function(i){ui(e,i);function e(t,r,n){var o=i.call(this)||this,a=n||{};return o.tileCoord=t,o.state=r,o.interimTile=null,o.key="",o.transition_=a.transition===void 0?250:a.transition,o.transitionStarts_={},o.interpolate=!!a.interpolate,o}return e.prototype.changed=function(){this.dispatchEvent(nt.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==y.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(!!this.interimTile){var t=this.interimTile,r=this;do{if(t.getState()==y.LOADED){t.interimTile=null;break}else t.getState()==y.LOADING?r=t:t.getState()==y.IDLE?r.interimTile=t.interimTile:r=t;t=r.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==y.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){L()},e.prototype.getAlpha=function(t,r){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(!n)n=r,this.transitionStarts_[t]=n;else if(n===-1)return 1;var o=r-n+1e3/60;return o>=this.transition_?1:si(o/this.transition_)},e.prototype.inTransition=function(t){return this.transition_?this.transitionStarts_[t]!==-1:!1},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(qt),we=li,fi=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ci=function(i){fi(e,i);function e(t,r,n,o,a,s){var u=i.call(this,t,r,s)||this;return u.crossOrigin_=o,u.src_=n,u.key=n,u.image_=new Image,o!==null&&(u.image_.crossOrigin=o),u.unlisten_=null,u.tileLoadFunction_=a,u}return e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=y.LOADED,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){this.state=y.ERROR,this.unlistenImage_(),this.image_=hi(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=y.LOADED:this.state=y.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==y.ERROR&&(this.state=y.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==y.IDLE&&(this.state=y.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Re(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(we);function hi(){var i=$t(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}var pi=ci,vi=42,Ae=256,di=function(){function i(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return i.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},i.prototype.expireCache=function(e){for(;this.canExpireCache();)this.pop()},i.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},i.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},i.prototype.forEach=function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer},i.prototype.get=function(e,t){var r=this.entries_[e];return Z(r!==void 0,15),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_},i.prototype.remove=function(e){var t=this.entries_[e];return Z(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_},i.prototype.getCount=function(){return this.count_},i.prototype.getKeys=function(){var e=new Array(this.count_),t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e},i.prototype.getValues=function(){var e=new Array(this.count_),t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e},i.prototype.peekLast=function(){return this.oldest_.value_},i.prototype.peekLastKey=function(){return this.oldest_.key_},i.prototype.peekFirstKey=function(){return this.newest_.key_},i.prototype.peek=function(e){if(!!this.containsKey(e))return this.entries_[e].value_},i.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},i.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},i.prototype.set=function(e,t){Z(!(e in this.entries_),16);var r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_},i.prototype.setSize=function(e){this.highWaterMark=e},i}(),_i=di;function ue(i,e,t,r){return r!==void 0?(r[0]=i,r[1]=e,r[2]=t,r):[i,e,t]}function Ft(i,e,t){return i+"/"+e+"/"+t}function Fe(i){return Ft(i[0],i[1],i[2])}function gi(i){return i.split("/").map(Number)}function yi(i){return(i[1]<<i[0])+i[2]}function mi(i,e){var t=i[0],r=i[1],n=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;var o=e.getFullTileRange(t);return o?o.containsXY(r,n):!0}var Ti=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ei=function(i){Ti(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.expireCache=function(t){for(;this.canExpireCache();){var r=this.peekLast();if(r.getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var t=this.peekFirstKey(),r=gi(t),n=r[0];this.forEach(function(o){o.tileCoord[0]!==n&&(this.remove(Fe(o.tileCoord)),o.release())}.bind(this))}},e}(_i),Ie=Ei,Me=function(){function i(e,t,r,n){this.minX=e,this.maxX=t,this.minY=r,this.maxY=n}return i.prototype.contains=function(e){return this.containsXY(e[1],e[2])},i.prototype.containsTileRange=function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY},i.prototype.containsXY=function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY},i.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY},i.prototype.extend=function(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)},i.prototype.getHeight=function(){return this.maxY-this.minY+1},i.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},i.prototype.getWidth=function(){return this.maxX-this.minX+1},i.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY},i}();function ht(i,e,t,r,n){return n!==void 0?(n.minX=i,n.maxX=e,n.minY=t,n.maxY=r,n):new Me(i,e,t,r)}const Le=Qe("map",{state:()=>({layers:[{active:!1,label:"Lidar",url:"https://gisserver.gov.si/arcgis/rest/services/TEMELJNE_KARTE/LidarTlaZgradbe_D96/MapServer/WMTS",layerName:"TEMELJNE_KARTE_LidarTlaZgradbe_D96",projection:"EPSG:3794",attributes:"Ministrstvo za kulturo, Ministrstvo za okolje in prostor",preview:"map/skyview.png"},{active:!1,label:"Ortho",url:"https://gisserver.gov.si/arcgis/rest/services/TEMELJNE_KARTE/DOF2021/MapServer/WMTS",layerName:"TEMELJNE_KARTE_DOF2021",projection:"EPSG:3912",attributes:"Ortophoto podlaga, GURS",preview:"map/ortophoto.png"}]}),getters:{getLayers(i){return i.layers}}});var xi=.5,Q=!0,Si=10,le=.25,Ci=function(){function i(e,t,r,n,o,a){this.sourceProj_=e,this.targetProj_=t;var s={},u=Xt(this.targetProj_,this.sourceProj_);this.transformInv_=function(_){var p=_[0]+"/"+_[1];return s[p]||(s[p]=u(_)),s[p]},this.maxSourceExtent_=n,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&k(n)==k(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?k(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?k(this.targetProj_.getExtent()):null;var l=kt(r),f=Je(r),h=tr(r),c=er(r),g=this.transformInv_(l),v=this.transformInv_(f),A=this.transformInv_(h),P=this.transformInv_(c),m=Si+(a?Math.max(0,Math.ceil(rr(Nt(r)/(a*a*256*256)))):0);if(this.addQuad_(l,f,h,c,g,v,A,P,m),this.wrapsXInSource_){var x=1/0;this.triangles_.forEach(function(_,p,F){x=Math.min(x,_.source[0][0],_.source[1][0],_.source[2][0])}),this.triangles_.forEach(function(_){if(Math.max(_.source[0][0],_.source[1][0],_.source[2][0])-x>this.sourceWorldWidth_/2){var p=[[_.source[0][0],_.source[0][1]],[_.source[1][0],_.source[1][1]],[_.source[2][0],_.source[2][1]]];p[0][0]-x>this.sourceWorldWidth_/2&&(p[0][0]-=this.sourceWorldWidth_),p[1][0]-x>this.sourceWorldWidth_/2&&(p[1][0]-=this.sourceWorldWidth_),p[2][0]-x>this.sourceWorldWidth_/2&&(p[2][0]-=this.sourceWorldWidth_);var F=Math.min(p[0][0],p[1][0],p[2][0]),M=Math.max(p[0][0],p[1][0],p[2][0]);M-F<this.sourceWorldWidth_/2&&(_.source=p)}}.bind(this))}s={}}return i.prototype.addTriangle_=function(e,t,r,n,o,a){this.triangles_.push({source:[n,o,a],target:[e,t,r]})},i.prototype.addQuad_=function(e,t,r,n,o,a,s,u,l){var f=Yt([o,a,s,u]),h=this.sourceWorldWidth_?k(f)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&h>.5&&h<1,v=!1;if(l>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var A=Yt([e,t,r,n]),P=k(A)/this.targetWorldWidth_;v=P>le||v}!g&&this.sourceProj_.isGlobal()&&h&&(v=h>le||v)}if(!(!v&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!ge(f,this.maxSourceExtent_))){var m=0;if(!v&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(u[0])||!isFinite(u[1]))){if(l>0)v=!0;else if(m=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(s[0])||!isFinite(s[1])?2:0)+(!isFinite(u[0])||!isFinite(u[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(l>0){if(!v){var x=[(e[0]+r[0])/2,(e[1]+r[1])/2],_=this.transformInv_(x),p=void 0;if(g){var F=(Ot(o[0],c)+Ot(s[0],c))/2;p=F-Ot(_[0],c)}else p=(o[0]+s[0])/2-_[0];var M=(o[1]+s[1])/2-_[1],E=p*p+M*M;v=E>this.errorThresholdSquared_}if(v){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){var R=[(t[0]+r[0])/2,(t[1]+r[1])/2],C=this.transformInv_(R),I=[(n[0]+e[0])/2,(n[1]+e[1])/2],G=this.transformInv_(I);this.addQuad_(e,t,R,I,o,a,C,G,l-1),this.addQuad_(I,R,r,n,G,C,s,u,l-1)}else{var j=[(e[0]+t[0])/2,(e[1]+t[1])/2],U=this.transformInv_(j),H=[(r[0]+n[0])/2,(r[1]+n[1])/2],X=this.transformInv_(H);this.addQuad_(e,j,H,n,o,U,X,u,l-1),this.addQuad_(j,t,r,H,U,a,s,X,l-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(m&11)==0&&this.addTriangle_(e,r,n,o,s,u),(m&14)==0&&this.addTriangle_(e,r,t,o,s,a),m&&((m&13)==0&&this.addTriangle_(t,n,e,a,u,o),(m&7)==0&&this.addTriangle_(t,n,r,a,u,s))}},i.prototype.calculateSourceExtent=function(){var e=wt();return this.triangles_.forEach(function(t,r,n){var o=t.source;It(e,o[0]),It(e,o[1]),It(e,o[2])}),e},i.prototype.getTriangles=function(){return this.triangles_},i}(),Oi=Ci,fe={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},Gt,Ge=[];function ce(i,e,t,r,n){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(r,n),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,r)+1,Math.max(t,n)),i.restore()}function Dt(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function Pi(){if(Gt===void 0){var i=document.createElement("canvas").getContext("2d");i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",ce(i,4,5,4,0),ce(i,4,5,0,5);var e=i.getImageData(0,0,3,3).data;Gt=Dt(e,0)||Dt(e,4)||Dt(e,8)}return Gt}function he(i,e,t,r){var n=or(t,e,i),o=Jt(e,r,t),a=e.getMetersPerUnit();a!==void 0&&(o*=a);var s=i.getMetersPerUnit();s!==void 0&&(o/=s);var u=i.getExtent();if(!u||me(u,n)){var l=Jt(i,o,n)/o;isFinite(l)&&l>0&&(o/=l)}return o}function Ri(i,e,t,r){var n=de(t),o=he(i,e,n,r);return(!isFinite(o)||o<=0)&&_e(t,function(a){return o=he(i,e,a,r),isFinite(o)&&o>0}),o}function wi(i,e,t,r,n,o,a,s,u,l,f,h){var c=$t(Math.round(t*i),Math.round(t*e),Ge);if(h||lt(c,fe),u.length===0)return c.canvas;c.scale(t,t);function g(p){return Math.round(p*t)/t}c.globalCompositeOperation="lighter";var v=wt();u.forEach(function(p,F,M){ir(v,p.extent)});var A=k(v),P=ft(v),m=$t(Math.round(t*A/r),Math.round(t*P/r));h||lt(m,fe);var x=t/r;u.forEach(function(p,F,M){var E=p.extent[0]-v[0],R=-(p.extent[3]-v[3]),C=k(p.extent),I=ft(p.extent);p.image.width>0&&p.image.height>0&&m.drawImage(p.image,l,l,p.image.width-2*l,p.image.height-2*l,E*x,R*x,C*x,I*x)});var _=kt(a);return s.getTriangles().forEach(function(p,F,M){var E=p.source,R=p.target,C=E[0][0],I=E[0][1],G=E[1][0],j=E[1][1],U=E[2][0],H=E[2][1],X=g((R[0][0]-_[0])/o),D=g(-(R[0][1]-_[1])/o),W=g((R[1][0]-_[0])/o),N=g(-(R[1][1]-_[1])/o),_t=g((R[2][0]-_[0])/o),gt=g(-(R[2][1]-_[1])/o),ct=C,O=I;C=0,I=0,G-=ct,j-=O,U-=ct,H-=O;var at=[[G,j,0,0,W-X],[U,H,0,0,_t-X],[0,0,G,j,N-D],[0,0,U,H,gt-D]],$=nr(at);if(!!$){if(c.save(),c.beginPath(),Pi()||!h){c.moveTo(W,N);for(var K=4,B=X-W,yt=D-N,z=0;z<K;z++)c.lineTo(W+g((z+1)*B/K),N+g(z*yt/(K-1))),z!=K-1&&c.lineTo(W+g((z+1)*B/K),N+g((z+1)*yt/(K-1)));c.lineTo(_t,gt)}else c.moveTo(W,N),c.lineTo(X,D),c.lineTo(_t,gt);c.clip(),c.transform($[0],$[2],$[1],$[3],X,D),c.translate(v[0]-ct,v[3]-O),c.scale(r/t,-r/t),c.drawImage(m.canvas,0,0),c.restore()}}),f&&(c.save(),c.globalCompositeOperation="source-over",c.strokeStyle="black",c.lineWidth=1,s.getTriangles().forEach(function(p,F,M){var E=p.target,R=(E[0][0]-_[0])/o,C=-(E[0][1]-_[1])/o,I=(E[1][0]-_[0])/o,G=-(E[1][1]-_[1])/o,j=(E[2][0]-_[0])/o,U=-(E[2][1]-_[1])/o;c.beginPath(),c.moveTo(I,G),c.lineTo(R,C),c.lineTo(j,U),c.closePath(),c.stroke()}),c.restore()),c.canvas}var Ai=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fi=function(i){Ai(e,i);function e(t,r,n,o,a,s,u,l,f,h,c,g){var v=i.call(this,a,y.IDLE,{interpolate:!!g})||this;v.renderEdges_=c!==void 0?c:!1,v.pixelRatio_=u,v.gutter_=l,v.canvas_=null,v.sourceTileGrid_=r,v.targetTileGrid_=o,v.wrappedTileCoord_=s||a,v.sourceTiles_=[],v.sourcesListenerKeys_=null,v.sourceZ_=0;var A=o.getTileCoordExtent(v.wrappedTileCoord_),P=v.targetTileGrid_.getExtent(),m=v.sourceTileGrid_.getExtent(),x=P?Mt(A,P):A;if(Nt(x)===0)return v.state=y.EMPTY,v;var _=t.getExtent();_&&(m?m=Mt(m,_):m=_);var p=o.getResolution(v.wrappedTileCoord_[0]),F=Ri(t,n,x,p);if(!isFinite(F)||F<=0)return v.state=y.EMPTY,v;var M=h!==void 0?h:xi;if(v.triangulation_=new Oi(t,n,x,m,F*M,p),v.triangulation_.getTriangles().length===0)return v.state=y.EMPTY,v;v.sourceZ_=r.getZForResolution(F);var E=v.triangulation_.calculateSourceExtent();if(m&&(t.canWrapX()?(E[1]=Wt(E[1],m[1],m[3]),E[3]=Wt(E[3],m[1],m[3])):E=Mt(E,m)),!Nt(E))v.state=y.EMPTY;else{for(var R=r.getTileRangeForExtentAndZ(E,v.sourceZ_),C=R.minX;C<=R.maxX;C++)for(var I=R.minY;I<=R.maxY;I++){var G=f(v.sourceZ_,C,I,u);G&&v.sourceTiles_.push(G)}v.sourceTiles_.length===0&&(v.state=y.EMPTY)}return v}return e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(f,h,c){f&&f.getState()==y.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(f.tileCoord),image:f.getImage()})}.bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=y.ERROR;else{var r=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(r),o=typeof n=="number"?n:n[0],a=typeof n=="number"?n:n[1],s=this.targetTileGrid_.getResolution(r),u=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=wi(o,a,this.pixelRatio_,u,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=y.LOADED}this.changed()},e.prototype.load=function(){if(this.state==y.IDLE){this.state=y.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(r,n,o){var a=r.getState();if(a==y.IDLE||a==y.LOADING){t++;var s=Et(r,nt.CHANGE,function(u){var l=r.getState();(l==y.LOADED||l==y.ERROR||l==y.EMPTY)&&(vt(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}.bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(r,n,o){var a=r.getState();a==y.IDLE&&r.load()})}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(vt),this.sourcesListenerKeys_=null},e.prototype.release=function(){this.canvas_&&(Jr(this.canvas_.getContext("2d")),Ge.push(this.canvas_),this.canvas_=null),i.prototype.release.call(this)},e}(we),Ii=Fi,jt={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Mi=[0,0,0],tt=5,Li=function(){function i(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Z(mr(this.resolutions_,function(a,s){return s-a},!0),17);var t;if(!e.origins){for(var r=0,n=this.resolutions_.length-1;r<n;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Z(this.origins_.length==this.resolutions_.length,20));var o=e.extent;o!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=kt(o)),Z(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Z(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Ae,Z(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=o!==void 0?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(a,s){var u=new Me(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(o){var l=this.getTileRangeForExtentAndZ(o,s);u.minX=Math.max(l.minX,u.minX),u.maxX=Math.min(l.maxX,u.maxX),u.minY=Math.max(l.minY,u.minY),u.maxY=Math.min(l.maxY,u.maxY)}return u},this):o&&this.calculateTileRanges_(o)}return i.prototype.forEachTileCoord=function(e,t,r){for(var n=this.getTileRangeForExtentAndZ(e,t),o=n.minX,a=n.maxX;o<=a;++o)for(var s=n.minY,u=n.maxY;s<=u;++s)r([t,o,s])},i.prototype.forEachTileCoordParentTileRange=function(e,t,r,n){var o,a,s,u=null,l=e[0]-1;for(this.zoomFactor_===2?(a=e[1],s=e[2]):u=this.getTileCoordExtent(e,n);l>=this.minZoom;){if(this.zoomFactor_===2?(a=Math.floor(a/2),s=Math.floor(s/2),o=ht(a,a,s,s,r)):o=this.getTileRangeForExtentAndZ(u,l,r),t(l,o))return!0;--l}return!1},i.prototype.getExtent=function(){return this.extent_},i.prototype.getMaxZoom=function(){return this.maxZoom},i.prototype.getMinZoom=function(){return this.minZoom},i.prototype.getOrigin=function(e){return this.origin_?this.origin_:this.origins_[e]},i.prototype.getResolution=function(e){return this.resolutions_[e]},i.prototype.getResolutions=function(){return this.resolutions_},i.prototype.getTileCoordChildTileRange=function(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){var n=e[1]*2,o=e[2]*2;return ht(n,n+1,o,o+1,t)}var a=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e[0]+1,t)}return null},i.prototype.getTileRangeForTileCoordAndZ=function(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;var n=e[0],o=e[1],a=e[2];if(t===n)return ht(o,a,o,a,r);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,t-n),u=Math.floor(o*s),l=Math.floor(a*s);if(t<n)return ht(u,u,l,l,r);var f=Math.floor(s*(o+1))-1,h=Math.floor(s*(a+1))-1;return ht(u,f,l,h,r)}var c=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(c,t,r)},i.prototype.getTileRangeExtent=function(e,t,r){var n=this.getOrigin(e),o=this.getResolution(e),a=rt(this.getTileSize(e),this.tmpSize_),s=n[0]+t.minX*a[0]*o,u=n[0]+(t.maxX+1)*a[0]*o,l=n[1]+t.minY*a[1]*o,f=n[1]+(t.maxY+1)*a[1]*o;return bt(s,l,u,f,r)},i.prototype.getTileRangeForExtentAndZ=function(e,t,r){var n=Mi;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,n);var o=n[1],a=n[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,n),ht(o,n[1],a,n[2],r)},i.prototype.getTileCoordCenter=function(e){var t=this.getOrigin(e[0]),r=this.getResolution(e[0]),n=rt(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*n[0]*r,t[1]-(e[2]+.5)*n[1]*r]},i.prototype.getTileCoordExtent=function(e,t){var r=this.getOrigin(e[0]),n=this.getResolution(e[0]),o=rt(this.getTileSize(e[0]),this.tmpSize_),a=r[0]+e[1]*o[0]*n,s=r[1]-(e[2]+1)*o[1]*n,u=a+o[0]*n,l=s+o[1]*n;return bt(a,s,u,l,t)},i.prototype.getTileCoordForCoordAndResolution=function(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)},i.prototype.getTileCoordForXYAndResolution_=function(e,t,r,n,o){var a=this.getZForResolution(r),s=r/this.getResolution(a),u=this.getOrigin(a),l=rt(this.getTileSize(a),this.tmpSize_),f=s*(e-u[0])/r/l[0],h=s*(u[1]-t)/r/l[1];return n?(f=xt(f,tt)-1,h=xt(h,tt)-1):(f=St(f,tt),h=St(h,tt)),ue(a,f,h,o)},i.prototype.getTileCoordForXYAndZ_=function(e,t,r,n,o){var a=this.getOrigin(r),s=this.getResolution(r),u=rt(this.getTileSize(r),this.tmpSize_),l=(e-a[0])/s/u[0],f=(a[1]-t)/s/u[1];return n?(l=xt(l,tt)-1,f=xt(f,tt)-1):(l=St(l,tt),f=St(f,tt)),ue(r,l,f,o)},i.prototype.getTileCoordForCoordAndZ=function(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)},i.prototype.getTileCoordResolution=function(e){return this.resolutions_[e[0]]},i.prototype.getTileSize=function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]},i.prototype.getFullTileRange=function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null},i.prototype.getZForResolution=function(e,t){var r=gr(this.resolutions_,e,t||0);return Wt(r,this.minZoom,this.maxZoom)},i.prototype.tileCoordIntersectsViewport=function(e,t){return Pe(t,0,t.length,2,this.getTileCoordExtent(e))},i.prototype.calculateTileRanges_=function(e){for(var t=this.resolutions_.length,r=new Array(t),n=this.minZoom;n<t;++n)r[n]=this.getTileRangeForExtentAndZ(e,n);this.fullTileRanges_=r},i}(),De=Li;function je(i){var e=i.getDefaultTileGrid();return e||(e=Xi(i),i.setDefaultTileGrid(e)),e}function Gi(i,e,t){var r=e[0],n=i.getTileCoordCenter(e),o=Xe(t);if(me(o,n))return e;var a=k(o),s=Math.ceil((o[0]-n[0])/a);return n[0]+=a*s,i.getTileCoordForCoordAndZ(n,r)}function Di(i,e,t,r){var n=r!==void 0?r:"top-left",o=ji(i,e,t);return new De({extent:i,origin:sr(i,n),resolutions:o,tileSize:t})}function ji(i,e,t,r){for(var n=e!==void 0?e:vi,o=ft(i),a=k(i),s=rt(t!==void 0?t:Ae),u=r>0?r:Math.max(a/s[0],o/s[1]),l=n+1,f=new Array(l),h=0;h<l;++h)f[h]=u/Math.pow(2,h);return f}function Xi(i,e,t,r){var n=Xe(i);return Di(n,e,t,r)}function Xe(i){i=V(i);var e=i.getExtent();if(!e){var t=180*ar[ve.DEGREES]/i.getMetersPerUnit();e=bt(-t,-t,t,t)}return e}var Ne=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ni=function(i){Ne(e,i);function e(t){var r=i.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate})||this;r.on,r.once,r.un,r.opaque_=t.opaque!==void 0?t.opaque:!1,r.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,r.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;var n=[256,256];return r.tileGrid&&rt(r.tileGrid.getTileSize(r.tileGrid.getMinZoom()),n),r.tileCache=new Ie(t.cacheSize||0),r.tmpSize=[0,0],r.key_=t.key||"",r.tileOptions={transition:t.transition,interpolate:t.interpolate},r.zDirection=t.zDirection?t.zDirection:0,r}return e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,r){var n=this.getTileCacheForProjection(t);n&&n.expireCache(r)},e.prototype.forEachLoadedTile=function(t,r,n,o){var a=this.getTileCacheForProjection(t);if(!a)return!1;for(var s=!0,u,l,f,h=n.minX;h<=n.maxX;++h)for(var c=n.minY;c<=n.maxY;++c)l=Ft(r,h,c),f=!1,a.containsKey(l)&&(u=a.get(l),f=u.getState()===y.LOADED,f&&(f=o(u)!==!1)),f||(s=!1);return s},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},e.prototype.getTile=function(t,r,n,o,a){return L()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:je(t)},e.prototype.getTileCacheForProjection=function(t){var r=this.getProjection();return Z(r===null||et(r,t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,r,n){var o=this.getTileGridForProjection(n),a=this.getTilePixelRatio(r),s=rt(o.getTileSize(t),this.tmpSize);return a==1?s:Qr(s,a,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,r){var n=r!==void 0?r:this.getProjection(),o=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=Gi(o,t,n)),mi(t,o)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),i.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,r){var n=this.getTileCacheForProjection(r);t>n.highWaterMark&&(n.highWaterMark=t)},e.prototype.useTile=function(t,r,n,o){},e}(ai),Yi=function(i){Ne(e,i);function e(t,r){var n=i.call(this,t)||this;return n.tile=r,n}return e}(Vt),Wi=Ni;function bi(i,e){var t=/\{z\}/g,r=/\{x\}/g,n=/\{y\}/g,o=/\{-y\}/g;return function(a,s,u){if(a)return i.replace(t,a[0].toString()).replace(r,a[1].toString()).replace(n,a[2].toString()).replace(o,function(){var l=a[0],f=e.getFullTileRange(l);Z(f,55);var h=f.getHeight()-a[2]-1;return h.toString()})}}function Ui(i,e){for(var t=i.length,r=new Array(t),n=0;n<t;++n)r[n]=bi(i[n],e);return Zt(r)}function Zt(i){return i.length===1?i[0]:function(e,t,r){if(e){var n=yi(e),o=Ot(n,i.length);return i[o](e,t,r)}else return}}function Ye(i){var e=[],t=/\{([a-z])-([a-z])\}/.exec(i);if(t){var r=t[1].charCodeAt(0),n=t[2].charCodeAt(0),o=void 0;for(o=r;o<=n;++o)e.push(i.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){for(var a=parseInt(t[2],10),s=parseInt(t[1],10);s<=a;s++)e.push(i.replace(t[0],s.toString()));return e}return e.push(i),e}var $i=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zi=function(i){$i(e,i);function e(t){var r=i.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return r.generateTileUrlFunction_=r.tileUrlFunction===e.prototype.tileUrlFunction,r.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(r.tileUrlFunction=t.tileUrlFunction),r.urls=null,t.urls?r.setUrls(t.urls):t.url&&r.setUrl(t.url),r.tileLoadingKeys_={},r}return e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var r=t.target,n=Tt(r),o=r.getState(),a;o==y.LOADING?(this.tileLoadingKeys_[n]=!0,a=jt.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],a=o==y.ERROR?jt.TILELOADERROR:o==y.LOADED?jt.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new Yi(a,r))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,r){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof r!="undefined"?this.setKey(r):this.changed()},e.prototype.setUrl=function(t){var r=Ye(t);this.urls=r,this.setUrls(r)},e.prototype.setUrls=function(t){this.urls=t;var r=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Ui(t,this.tileGrid),r):this.setKey(r)},e.prototype.tileUrlFunction=function(t,r,n){},e.prototype.useTile=function(t,r,n){var o=Ft(t,r,n);this.tileCache.containsKey(o)&&this.tileCache.get(o)},e}(Wi),Ki=Zi,zi=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ki=function(i){zi(e,i);function e(t){var r=this,n=t.imageSmoothing!==void 0?t.imageSmoothing:!0;return t.interpolate!==void 0&&(n=t.interpolate),r=i.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Vi,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:n,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this,r.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,r.tileClass=t.tileClass!==void 0?t.tileClass:pi,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,r.renderReprojectionEdges_=!1,r}return e.prototype.canExpireCache=function(){if(!Q)return i.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,r){if(!Q){i.prototype.expireCache.call(this,t,r);return}var n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?r:{});for(var o in this.tileCacheForProjection){var a=this.tileCacheForProjection[o];a.expireCache(a==n?r:{})}},e.prototype.getGutterForProjection=function(t){return Q&&this.getProjection()&&t&&!et(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){var t=i.prototype.getKey.call(this);return this.getInterpolate()||(t+=":disable-interpolation"),t},e.prototype.getOpaque=function(t){return Q&&this.getProjection()&&t&&!et(this.getProjection(),t)?!1:i.prototype.getOpaque.call(this,t)},e.prototype.getTileGridForProjection=function(t){if(!Q)return i.prototype.getTileGridForProjection.call(this,t);var r=this.getProjection();if(this.tileGrid&&(!r||et(r,t)))return this.tileGrid;var n=Tt(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=je(t)),this.tileGridForProjection[n]},e.prototype.getTileCacheForProjection=function(t){if(!Q)return i.prototype.getTileCacheForProjection.call(this,t);var r=this.getProjection();if(!r||et(r,t))return this.tileCache;var n=Tt(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Ie(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.createTile_=function(t,r,n,o,a,s){var u=[t,r,n],l=this.getTileCoordForTileUrlFunction(u,a),f=l?this.tileUrlFunction(l,o,a):void 0,h=new this.tileClass(u,f!==void 0?y.IDLE:y.EMPTY,f!==void 0?f:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=s,h.addEventListener(nt.CHANGE,this.handleTileChange.bind(this)),h},e.prototype.getTile=function(t,r,n,o,a){var s=this.getProjection();if(!Q||!s||!a||et(s,a))return this.getTileInternal(t,r,n,o,s||a);var u=this.getTileCacheForProjection(a),l=[t,r,n],f=void 0,h=Fe(l);u.containsKey(h)&&(f=u.get(h));var c=this.getKey();if(f&&f.key==c)return f;var g=this.getTileGridForProjection(s),v=this.getTileGridForProjection(a),A=this.getTileCoordForTileUrlFunction(l,a),P=new Ii(s,g,a,v,l,A,this.getTilePixelRatio(o),this.getGutter(),function(m,x,_,p){return this.getTileInternal(m,x,_,p,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return P.key=c,f?(P.interimTile=f,P.refreshInterimChain(),u.replace(h,P)):u.set(h,P),P},e.prototype.getTileInternal=function(t,r,n,o,a){var s=null,u=Ft(t,r,n),l=this.getKey();if(!this.tileCache.containsKey(u))s=this.createTile_(t,r,n,o,a,l),this.tileCache.set(u,s);else if(s=this.tileCache.get(u),s.key!=l){var f=s;s=this.createTile_(t,r,n,o,a,l),f.getState()==y.IDLE?s.interimTile=f.interimTile:s.interimTile=f,s.refreshInterimChain(),this.tileCache.replace(u,s)}return s},e.prototype.setRenderReprojectionEdges=function(t){if(!(!Q||this.renderReprojectionEdges_==t)){this.renderReprojectionEdges_=t;for(var r in this.tileCacheForProjection)this.tileCacheForProjection[r].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,r){if(Q){var n=V(t);if(n){var o=Tt(n);o in this.tileGridForProjection||(this.tileGridForProjection[o]=r)}}},e}(Ki);function Vi(i,e){i.getImage().src=e}var qi=ki;function pe(i,e){var t=[];Object.keys(e).forEach(function(n){e[n]!==null&&e[n]!==void 0&&t.push(n+"="+encodeURIComponent(e[n]))});var r=t.join("&");return i=i.replace(/[?&]$/,""),i=i.indexOf("?")===-1?i+"?":i+"&",i+r}var Hi=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bi=function(i){Hi(e,i);function e(t){var r=i.call(this,{extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes})||this;return r.matrixIds_=t.matrixIds,r}return e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(De);function Qi(i,e,t){var r=[],n=[],o=[],a=[],s=[],u=t!==void 0?t:[],l="SupportedCRS",f="TileMatrix",h="Identifier",c="ScaleDenominator",g="TopLeftCorner",v="TileWidth",A="TileHeight",P=i[l],m=V(P),x=m.getMetersPerUnit(),_=m.getAxisOrientation().substr(0,2)=="ne";return i[f].sort(function(p,F){return F[c]-p[c]}),i[f].forEach(function(p){var F;if(u.length>0?F=pt(u,function(C){return p[h]==C[f]?!0:p[h].indexOf(":")===-1?i[h]+":"+p[h]===C[f]:!1}):F=!0,F){n.push(p[h]);var M=p[c]*28e-5/x,E=p[v],R=p[A];_?o.push([p[g][1],p[g][0]]):o.push(p[g]),r.push(M),a.push(E==R?E:[E,R]),s.push([p.MatrixWidth,p.MatrixHeight])}}),new Bi({extent:e,origins:o,resolutions:r,matrixIds:n,tileSizes:a,sizes:s})}var Ji=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tn=function(i){Ji(e,i);function e(t){var r=this,n=t.imageSmoothing!==void 0?t.imageSmoothing:!0;t.interpolate!==void 0&&(n=t.interpolate);var o=t.requestEncoding!==void 0?t.requestEncoding:"KVP",a=t.tileGrid,s=t.urls;return s===void 0&&t.url!==void 0&&(s=Ye(t.url)),r=i.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:n,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:a,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:s,wrapX:t.wrapX!==void 0?t.wrapX:!1,transition:t.transition,zDirection:t.zDirection})||this,r.version_=t.version!==void 0?t.version:"1.0.0",r.format_=t.format!==void 0?t.format:"image/jpeg",r.dimensions_=t.dimensions!==void 0?t.dimensions:{},r.layer_=t.layer,r.matrixSet_=t.matrixSet,r.style_=t.style,r.requestEncoding_=o,r.setKey(r.getKeyForDimensions_()),s&&s.length>0&&(r.tileUrlFunction=Zt(s.map(r.createFromWMTSTemplate.bind(r)))),r}return e.prototype.setUrls=function(t){this.urls=t;var r=t.join(`
`);this.setTileUrlFunction(Zt(t.map(this.createFromWMTSTemplate.bind(this))),r)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,r=[];for(var n in this.dimensions_)r[t++]=n+"-"+this.dimensions_[n];return r.join("/")},e.prototype.updateDimensions=function(t){lt(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e.prototype.createFromWMTSTemplate=function(t){var r=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};r=="KVP"&&lt(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=r=="KVP"?pe(t,n):t.replace(/\{(\w+?)\}/g,function(s,u){return u.toLowerCase()in n?n[u.toLowerCase()]:s});var o=this.tileGrid,a=this.dimensions_;return function(s,u,l){if(s){var f={TileMatrix:o.getMatrixId(s[0]),TileCol:s[1],TileRow:s[2]};lt(f,a);var h=t;return r=="KVP"?h=pe(h,f):h=h.replace(/\{(\w+?)\}/g,function(c,g){return f[g]}),h}else return}},e}(qi),en=tn;function rn(i,e){var t=i.Contents.Layer,r=pt(t,function(O,at,$){return O.Identifier==e.layer});if(r===null)return null;var n=i.Contents.TileMatrixSet,o;r.TileMatrixSetLink.length>1?"projection"in e?o=Lt(r.TileMatrixSetLink,function(O,at,$){var K=pt(n,function($e){return $e.Identifier==O.TileMatrixSet}),B=K.SupportedCRS,yt=V(B),z=V(e.projection);return yt&&z?et(yt,z):B==e.projection}):o=Lt(r.TileMatrixSetLink,function(O,at,$){return O.TileMatrixSet==e.matrixSet}):o=0,o<0&&(o=0);var a=r.TileMatrixSetLink[o].TileMatrixSet,s=r.TileMatrixSetLink[o].TileMatrixSetLimits,u=r.Format[0];"format"in e&&(u=e.format),o=Lt(r.Style,function(O,at,$){return"style"in e?O.Title==e.style:O.isDefault}),o<0&&(o=0);var l=r.Style[o].Identifier,f={};"Dimension"in r&&r.Dimension.forEach(function(O,at,$){var K=O.Identifier,B=O.Default;B===void 0&&(B=O.Value[0]),f[K]=B});var h=i.Contents.TileMatrixSet,c=pt(h,function(O,at,$){return O.Identifier==a}),g,v=c.SupportedCRS;if(v&&(g=V(v)),"projection"in e){var A=V(e.projection);A&&(!g||et(A,g))&&(g=A)}var P=!1,m=g.getAxisOrientation().substr(0,2)=="ne",x=c.TileMatrix[0],_={MinTileCol:0,MinTileRow:0,MaxTileCol:x.MatrixWidth-1,MaxTileRow:x.MatrixHeight-1};if(s){_=s[s.length-1];var p=pt(c.TileMatrix,function(O){return O.Identifier===_.TileMatrix||c.Identifier+":"+O.Identifier===_.TileMatrix});p&&(x=p)}var F=x.ScaleDenominator*28e-5/g.getMetersPerUnit(),M=m?[x.TopLeftCorner[1],x.TopLeftCorner[0]]:x.TopLeftCorner,E=x.TileWidth*F,R=x.TileHeight*F,C=c.BoundingBox;C&&m&&(C=[C[1],C[0],C[3],C[2]]);var I=[M[0]+E*_.MinTileCol,M[1]-R*(1+_.MaxTileRow),M[0]+E*(1+_.MaxTileCol),M[1]-R*_.MinTileRow];if(C!==void 0&&!ye(C,I)){var G=r.WGS84BoundingBox,j=V("EPSG:4326").getExtent();if(I=C,G)P=G[0]===j[0]&&G[2]===j[2];else{var U=ur(C,c.SupportedCRS,"EPSG:4326");P=U[0]-1e-10<=j[0]&&U[2]+1e-10>=j[2]}}var H=Qi(c,I,s),X=[],D=e.requestEncoding;if(D=D!==void 0?D:"","OperationsMetadata"in i&&"GetTile"in i.OperationsMetadata)for(var W=i.OperationsMetadata.GetTile.DCP.HTTP.Get,N=0,_t=W.length;N<_t;++N)if(W[N].Constraint){var gt=pt(W[N].Constraint,function(O){return O.name=="GetEncoding"}),ct=gt.AllowedValues.Value;if(D===""&&(D=ct[0]),D==="KVP")_r(ct,"KVP")&&X.push(W[N].href);else break}else W[N].href&&(D="KVP",X.push(W[N].href));return X.length===0&&(D="REST",r.ResourceURL.forEach(function(O){O.resourceType==="tile"&&(u=O.format,X.push(O.template))})),{urls:X,layer:e.layer,matrixSet:a,format:u,projection:g,requestEncoding:D,tileGrid:H,style:l,dimensions:f,wrapX:P,crossOrigin:e.crossOrigin}}function Bt(i,e){return We(i,e,[]).join("")}function We(i,e,t){if(i.nodeType==Node.CDATA_SECTION_NODE||i.nodeType==Node.TEXT_NODE)e?t.push(String(i.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(i.nodeValue);else{var r=void 0;for(r=i.firstChild;r;r=r.nextSibling)We(r,e,t)}return t}function nn(i){return"documentElement"in i}function on(i){return new DOMParser().parseFromString(i,"application/xml")}function Kt(i,e){return function(t,r){var n=i.call(e!==void 0?e:this,t,r);if(n!==void 0){var o=r[r.length-1];o.push(n)}}}function b(i,e,t){return function(r,n){var o=i.call(t!==void 0?t:this,r,n);if(o!==void 0){var a=n[n.length-1],s=e!==void 0?e:r.localName,u=void 0;s in a?u=a[s]:(u=[],a[s]=u),u.push(o)}}}function d(i,e,t){return function(r,n){var o=i.call(t!==void 0?t:this,r,n);if(o!==void 0){var a=n[n.length-1],s=e!==void 0?e:r.localName;a[s]=o}}}function S(i,e,t){var r=t!==void 0?t:{},n,o;for(n=0,o=i.length;n<o;++n)r[i[n]]=e;return r}function an(i,e,t,r){var n;for(n=e.firstElementChild;n;n=n.nextElementSibling){var o=i[n.namespaceURI];if(o!==void 0){var a=o[n.localName];a!==void 0&&a.call(r,n,t)}}}function w(i,e,t,r,n){return r.push(i),an(e,t,r,n),r.pop()}function sn(i){var e=Bt(i,!1);return un(e)}function un(i){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);if(e)return parseFloat(e[1])}function it(i){var e=Bt(i,!1);return ln(e)}function ln(i){var e=/^\s*(\d+)\s*$/.exec(i);if(e)return parseInt(e[1],10)}function T(i){return Bt(i,!1).trim()}var fn=function(){function i(){}return i.prototype.read=function(e){if(e)if(typeof e=="string"){var t=on(e);return this.readFromDocument(t)}else return nn(e)?this.readFromDocument(e):this.readFromNode(e);else return null},i.prototype.readFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null},i.prototype.readFromNode=function(e){},i}(),be=fn,cn="http://www.w3.org/1999/xlink";function Qt(i){return i.getAttributeNS(cn,"href")}var hn=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Y=[null,"http://www.opengis.net/ows/1.1"],pn=S(Y,{ServiceIdentification:d(Nn),ServiceProvider:d(Wn),OperationsMetadata:d(jn)}),vn=function(i){hn(e,i);function e(){return i.call(this)||this}return e.prototype.readFromNode=function(t){var r=w({},pn,t,[]);return r||null},e}(be),dn=S(Y,{DeliveryPoint:d(T),City:d(T),AdministrativeArea:d(T),PostalCode:d(T),Country:d(T),ElectronicMailAddress:d(T)}),_n=S(Y,{Value:b(bn)}),gn=S(Y,{AllowedValues:d(An)}),yn=S(Y,{Phone:d(Xn),Address:d(wn)}),mn=S(Y,{HTTP:d(Gn)}),Tn=S(Y,{Get:b(Ln),Post:void 0}),En=S(Y,{DCP:d(Mn)}),xn=S(Y,{Operation:Dn}),Sn=S(Y,{Voice:d(T),Facsimile:d(T)}),Cn=S(Y,{Constraint:b(Fn)}),On=S(Y,{IndividualName:d(T),PositionName:d(T),ContactInfo:d(In)}),Pn=S(Y,{Abstract:d(T),AccessConstraints:d(T),Fees:d(T),Title:d(T),ServiceTypeVersion:d(T),ServiceType:d(T)}),Rn=S(Y,{ProviderName:d(T),ProviderSite:d(Qt),ServiceContact:d(Yn)});function wn(i,e){return w({},dn,i,e)}function An(i,e){return w({},_n,i,e)}function Fn(i,e){var t=i.getAttribute("name");if(!!t)return w({name:t},gn,i,e)}function In(i,e){return w({},yn,i,e)}function Mn(i,e){return w({},mn,i,e)}function Ln(i,e){var t=Qt(i);if(!!t)return w({href:t},Cn,i,e)}function Gn(i,e){return w({},Tn,i,e)}function Dn(i,e){var t=i.getAttribute("name"),r=w({},En,i,e);if(!!r){var n=e[e.length-1];n[t]=r}}function jn(i,e){return w({},xn,i,e)}function Xn(i,e){return w({},Sn,i,e)}function Nn(i,e){return w({},Pn,i,e)}function Yn(i,e){return w({},On,i,e)}function Wn(i,e){return w({},Rn,i,e)}function bn(i,e){return T(i)}var Un=vn,$n=globalThis&&globalThis.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),q=[null,"http://www.opengis.net/wmts/1.0"],dt=[null,"http://www.opengis.net/ows/1.1"],Zn=S(q,{Contents:d(ro)}),Kn=function(i){$n(e,i);function e(){var t=i.call(this)||this;return t.owsParser_=new Un,t}return e.prototype.readFromNode=function(t){var r=t.getAttribute("version");r&&(r=r.trim());var n=this.owsParser_.readFromNode(t);return n?(n.version=r,n=w(n,Zn,t,[]),n||null):null},e}(be),zn=S(q,{Layer:b(io),TileMatrixSet:b(no)}),kn=S(q,{Style:b(oo),Format:b(T),TileMatrixSetLink:b(ao),Dimension:b(so),ResourceURL:b(uo)},S(dt,{Title:d(T),Abstract:d(T),WGS84BoundingBox:d(Ue),Identifier:d(T)})),Vn=S(q,{LegendURL:b(lo)},S(dt,{Title:d(T),Identifier:d(T)})),qn=S(q,{TileMatrixSet:d(T),TileMatrixSetLimits:d(co)}),Hn=S(q,{TileMatrixLimits:Kt(ho)}),Bn=S(q,{TileMatrix:d(T),MinTileRow:d(it),MaxTileRow:d(it),MinTileCol:d(it),MaxTileCol:d(it)}),Qn=S(q,{Default:d(T),Value:b(T)},S(dt,{Identifier:d(T)})),Jn=S(dt,{LowerCorner:Kt(zt),UpperCorner:Kt(zt)}),to=S(q,{WellKnownScaleSet:d(T),TileMatrix:b(fo)},S(dt,{SupportedCRS:d(T),Identifier:d(T),BoundingBox:d(Ue)})),eo=S(q,{TopLeftCorner:d(zt),ScaleDenominator:d(sn),TileWidth:d(it),TileHeight:d(it),MatrixWidth:d(it),MatrixHeight:d(it)},S(dt,{Identifier:d(T)}));function ro(i,e){return w({},zn,i,e)}function io(i,e){return w({},kn,i,e)}function no(i,e){return w({},to,i,e)}function oo(i,e){var t=w({},Vn,i,e);if(!!t){var r=i.getAttribute("isDefault")==="true";return t.isDefault=r,t}}function ao(i,e){return w({},qn,i,e)}function so(i,e){return w({},Qn,i,e)}function uo(i,e){var t=i.getAttribute("format"),r=i.getAttribute("template"),n=i.getAttribute("resourceType"),o={};return t&&(o.format=t),r&&(o.template=r),n&&(o.resourceType=n),o}function Ue(i,e){var t=w([],Jn,i,e);if(t.length==2)return Yt(t)}function lo(i,e){var t={};return t.format=i.getAttribute("format"),t.href=Qt(i),t}function zt(i,e){var t=T(i).split(/\s+/);if(!(!t||t.length!=2)){var r=+t[0],n=+t[1];if(!(isNaN(r)||isNaN(n)))return[r,n]}}function fo(i,e){return w({},eo,i,e)}function co(i,e){return w([],Hn,i,e)}function ho(i,e){return w({},Bn,i,e)}var po=Kn;const vo={props:{layer:Object},setup(){const i=Le();return{layerRef:Ut(null),mapStore:i}},async mounted(){await(async(e,t)=>{const r=new po,o=await(await fetch(e.url)).text(),a=r.read(o),s=rn(a,{layer:e.layerName}),u={projection:e.projection,...s,attributions:[e.attributes],crossOrigin:"anonymous"};this.wmtsSource=new en(u),t.tileLayer.setVisible(this.layer.active),t.tileLayer.setSource(this.wmtsSource)})(this.layer,this.layerRef)},watch:{layer:{deep:!0,handler:function(i,e){this.layerRef.tileLayer.setVisible(i.active)}}}};function _o(i,e,t,r,n,o){const a=mt("ol-tile-layer");return Pt(),Ee(a,{ref:"layerRef"},null,512)}var go=Te(vo,[["render",_o]]);const yo={components:{CustomWMTSLayer:go},setup(){const i=Le(),e=Ut(null),t=Ut(null),{isSkyViewActive:r,isOrthoPhotoActive:n,getOrthoPhoto:o}=lr(i);return{skyViewLayer:e,orthoPhotoLayer:t,isSkyViewActive:r,isOrthoPhotoActive:n,mapStore:i,getOrthoPhoto:o}},watch:{isSkyViewActive(i,e){this.skyViewLayer.tileLayer.setVisible(i)}}};function mo(i,e,t,r,n,o){const a=mt("ol-source-osm"),s=mt("ol-tile-layer"),u=mt("CustomWMTSLayer"),l=mt("ol-source-xyz");return Pt(),te(re,null,[Ct(s,null,{default:ee(()=>[Ct(a)]),_:1}),(Pt(!0),te(re,null,fr(r.mapStore.getLayers,f=>(Pt(),Ee(u,{key:f.name,layer:f},null,8,["layer"]))),128)),Ct(s,null,{default:ee(()=>[Ct(l,{url:"https://services7.arcgis.com/V2VriwTjJDabpGg6/ArcGIS/rest/services/2022_marec_export_ekataster_tile_layer/MapServer/WMTS/tile/1.0.0/2022_marec_export_ekataster_tile_layer/default/default028mm/{z}/{y}/{x}.png"})]),_:1})],64)}var Fo=Te(yo,[["render",mo]]);export{Ht as B,Fo as C,Vt as E,Ro as F,J as G,pr as O,Po as P,Ur as S,Co as T,ie as V,Oo as a,xo as b,Oe as c,Zr as d,So as e,Br as f,cr as g,Et as h,Ao as i,nt as j,Eo as k,wo as l,ai as m,Se as n,Le as o,vt as u};
