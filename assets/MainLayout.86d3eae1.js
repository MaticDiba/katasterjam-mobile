import{s as pe,ac as De,H as xe,ad as Qe,J as Me,ae as We,i as Pe,$ as Z,a0 as Ie,r as $,c as r,af as Ae,ag as Ve,w as s,o as ze,A as re,a1 as Fe,ah as fe,h as A,ai as ie,x as He,g as je,aj as Ne,_ as Re,ak as Ue,L as Ke,al as Ee,j as se,P as de,Q as o,d as u,Z as Je,R as C,U as O,am as x,an as Xe}from"./index.18ea7970.js";import{Q as Ze,a as Ge,b as Ye,c as ea,d as aa}from"./QLayout.4a24ba34.js";import{T as G,b as V,Q as ta,a as Q,c as M,d as h}from"./format.85b5a3f8.js";import"./QResizeObserver.7628afe8.js";const ce=150;var la=pe({name:"QDrawer",inheritAttrs:!1,props:{...De,...xe,side:{type:String,default:"left",validator:a=>["left","right"].includes(a)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:a=>["default","desktop","mobile"].includes(a),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Qe,"onLayout","miniState"],setup(a,{slots:v,emit:y,attrs:z}){const b=je(),{proxy:{$q:m}}=b,F=Me(a,m),{preventBodyScroll:q}=Ne(),{registerTimeout:Y,removeTimeout:ve}=We(),t=Pe(Ie,Z);if(t===Z)return console.error("QDrawer needs to be child of QLayout"),Z;let H,_=null,S;const i=$(a.behavior==="mobile"||a.behavior!=="desktop"&&t.totalWidth.value<=a.breakpoint),L=r(()=>a.mini===!0&&i.value!==!0),c=r(()=>L.value===!0?a.miniWidth:a.width),n=$(a.showIfAbove===!0&&i.value===!1?!0:a.modelValue===!0),ee=r(()=>a.persistent!==!0&&(i.value===!0||be.value===!0));function ae(e,l){if(me(),e!==!1&&t.animate(),f(0),i.value===!0){const d=t.instances[P.value];d!==void 0&&d.belowBreakpoint===!0&&d.hide(!1),g(1),t.isContainer.value!==!0&&q(!0)}else g(0),e!==!1&&E(!1);Y(()=>{e!==!1&&E(!0),l!==!0&&y("show",e)},ce)}function te(e,l){he(),e!==!1&&t.animate(),g(0),f(B.value*c.value),J(),l!==!0?Y(()=>{y("hide",e)},ce):ve()}const{show:j,hide:p}=Ae({showing:n,hideOnRouteChange:ee,handleShow:ae,handleHide:te}),{addToHistory:me,removeFromHistory:he}=Ve(n,p,ee),W={belowBreakpoint:i,hide:p},w=r(()=>a.side==="right"),B=r(()=>(m.lang.rtl===!0?-1:1)*(w.value===!0?1:-1)),le=$(0),T=$(!1),N=$(!1),ue=$(c.value*B.value),P=r(()=>w.value===!0?"left":"right"),R=r(()=>n.value===!0&&i.value===!1&&a.overlay===!1?a.miniToOverlay===!0?a.miniWidth:c.value:0),U=r(()=>a.overlay===!0||a.miniToOverlay===!0||t.view.value.indexOf(w.value?"R":"L")>-1||m.platform.is.ios===!0&&t.isContainer.value===!0),D=r(()=>a.overlay===!1&&n.value===!0&&i.value===!1),be=r(()=>a.overlay===!0&&n.value===!0&&i.value===!1),we=r(()=>"fullscreen q-drawer__backdrop"+(n.value===!1&&T.value===!1?" hidden":"")),ye=r(()=>({backgroundColor:`rgba(0,0,0,${le.value*.4})`})),oe=r(()=>w.value===!0?t.rows.value.top[2]==="r":t.rows.value.top[0]==="l"),ge=r(()=>w.value===!0?t.rows.value.bottom[2]==="r":t.rows.value.bottom[0]==="l"),ke=r(()=>{const e={};return t.header.space===!0&&oe.value===!1&&(U.value===!0?e.top=`${t.header.offset}px`:t.header.space===!0&&(e.top=`${t.header.size}px`)),t.footer.space===!0&&ge.value===!1&&(U.value===!0?e.bottom=`${t.footer.offset}px`:t.footer.space===!0&&(e.bottom=`${t.footer.size}px`)),e}),_e=r(()=>{const e={width:`${c.value}px`,transform:`translateX(${ue.value}px)`};return i.value===!0?e:Object.assign(e,ke.value)}),Ce=r(()=>"q-drawer__content fit "+(t.isContainer.value!==!0?"scroll":"overflow-auto")),$e=r(()=>`q-drawer q-drawer--${a.side}`+(N.value===!0?" q-drawer--mini-animate":"")+(a.bordered===!0?" q-drawer--bordered":"")+(F.value===!0?" q-drawer--dark q-dark":"")+(T.value===!0?" no-transition":n.value===!0?"":" q-layout--prevent-focus")+(i.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${L.value===!0?"mini":"standard"}`+(U.value===!0||D.value!==!0?" fixed":"")+(a.overlay===!0||a.miniToOverlay===!0?" q-drawer--on-top":"")+(oe.value===!0?" q-drawer--top-padding":""))),Be=r(()=>{const e=m.lang.rtl===!0?a.side:P.value;return[[G,Se,void 0,{[e]:!0,mouse:!0}]]}),Te=r(()=>{const e=m.lang.rtl===!0?P.value:a.side;return[[G,ne,void 0,{[e]:!0,mouse:!0}]]}),Oe=r(()=>{const e=m.lang.rtl===!0?P.value:a.side;return[[G,ne,void 0,{[e]:!0,mouse:!0,mouseAllDir:!0}]]});function K(){Le(i,a.behavior==="mobile"||a.behavior!=="desktop"&&t.totalWidth.value<=a.breakpoint)}s(i,e=>{e===!0?(H=n.value,n.value===!0&&p(!1)):a.overlay===!1&&a.behavior!=="mobile"&&H!==!1&&(n.value===!0?(f(0),g(0),J()):j(!1))}),s(()=>a.side,(e,l)=>{t.instances[l]===W&&(t.instances[l]=void 0,t[l].space=!1,t[l].offset=0),t.instances[e]=W,t[e].size=c.value,t[e].space=D.value,t[e].offset=R.value}),s(t.totalWidth,()=>{(t.isContainer.value===!0||document.qScrollPrevented!==!0)&&K()}),s(()=>a.behavior+a.breakpoint,K),s(t.isContainer,e=>{n.value===!0&&q(e!==!0),e===!0&&K()}),s(t.scrollbarWidth,()=>{f(n.value===!0?0:void 0)}),s(R,e=>{k("offset",e)}),s(D,e=>{y("onLayout",e),k("space",e)}),s(w,()=>{f()}),s(c,e=>{f(),X(a.miniToOverlay,e)}),s(()=>a.miniToOverlay,e=>{X(e,c.value)}),s(()=>m.lang.rtl,()=>{f()}),s(()=>a.mini,()=>{a.modelValue===!0&&(qe(),t.animate())}),s(L,e=>{y("miniState",e)});function f(e){e===void 0?re(()=>{e=n.value===!0?0:c.value,f(B.value*e)}):(t.isContainer.value===!0&&w.value===!0&&(i.value===!0||Math.abs(e)===c.value)&&(e+=B.value*t.scrollbarWidth.value),ue.value=e)}function g(e){le.value=e}function E(e){const l=e===!0?"remove":t.isContainer.value!==!0?"add":"";l!==""&&document.body.classList[l]("q-body--drawer-toggle")}function qe(){_!==null&&clearTimeout(_),b.proxy&&b.proxy.$el&&b.proxy.$el.classList.add("q-drawer--mini-animate"),N.value=!0,_=setTimeout(()=>{_=null,N.value=!1,b&&b.proxy&&b.proxy.$el&&b.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function Se(e){if(n.value!==!1)return;const l=c.value,d=V(e.distance.x,0,l);if(e.isFinal===!0){d>=Math.min(75,l)===!0?j():(t.animate(),g(0),f(B.value*l)),T.value=!1;return}f((m.lang.rtl===!0?w.value!==!0:w.value)?Math.max(l-d,0):Math.min(0,d-l)),g(V(d/l,0,1)),e.isFirst===!0&&(T.value=!0)}function ne(e){if(n.value!==!0)return;const l=c.value,d=e.direction===a.side,I=(m.lang.rtl===!0?d!==!0:d)?V(e.distance.x,0,l):0;if(e.isFinal===!0){Math.abs(I)<Math.min(75,l)===!0?(t.animate(),g(1),f(0)):p(),T.value=!1;return}f(B.value*I),g(V(1-I/l,0,1)),e.isFirst===!0&&(T.value=!0)}function J(){q(!1),E(!0)}function k(e,l){t.update(a.side,e,l)}function Le(e,l){e.value!==l&&(e.value=l)}function X(e,l){k("size",e===!0?a.miniWidth:l)}return t.instances[a.side]=W,X(a.miniToOverlay,c.value),k("space",D.value),k("offset",R.value),a.showIfAbove===!0&&a.modelValue!==!0&&n.value===!0&&a["onUpdate:modelValue"]!==void 0&&y("update:modelValue",!0),ze(()=>{y("onLayout",D.value),y("miniState",L.value),H=a.showIfAbove===!0;const e=()=>{(n.value===!0?ae:te)(!1,!0)};if(t.totalWidth.value!==0){re(e);return}S=s(t.totalWidth,()=>{S(),S=void 0,n.value===!1&&a.showIfAbove===!0&&i.value===!1?j(!1):e()})}),Fe(()=>{S!==void 0&&S(),_!==null&&(clearTimeout(_),_=null),n.value===!0&&J(),t.instances[a.side]===W&&(t.instances[a.side]=void 0,k("size",0),k("offset",0),k("space",!1))}),()=>{const e=[];i.value===!0&&(a.noSwipeOpen===!1&&e.push(fe(A("div",{key:"open",class:`q-drawer__opener fixed-${a.side}`,"aria-hidden":"true"}),Be.value)),e.push(ie("div",{ref:"backdrop",class:we.value,style:ye.value,"aria-hidden":"true",onClick:p},void 0,"backdrop",a.noSwipeBackdrop!==!0&&n.value===!0,()=>Oe.value)));const l=L.value===!0&&v.mini!==void 0,d=[A("div",{...z,key:""+l,class:[Ce.value,z.class]},l===!0?v.mini():He(v.default))];return a.elevated===!0&&n.value===!0&&d.push(A("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(ie("aside",{ref:"content",class:$e.value,style:_e.value},d,"contentclose",a.noSwipeClose!==!0&&i.value===!0,()=>Te.value)),A("div",{class:"q-drawer-container"},e)}}});const ua=Ue({name:"MainLayout",components:{},setup(){const a=Ke(),v=$(!1);return{store:a,leftDrawerOpen:v,toggleLeftDrawer(){v.value=!v.value}}},methods:{async logOutButton(){try{await this.store.logOut()}finally{this.$router.replace("/login")}}}});function oa(a,v,y,z,b,m){const F=Ee("router-view");return se(),de(Ze,{view:"lHh Lpr lFf"},{default:o(()=>[u(ea,{elevated:""},{default:o(()=>[u(Ge,null,{default:o(()=>[u(Je,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:a.toggleLeftDrawer},null,8,["onClick"]),u(Ye,null,{default:o(()=>[C(" Kataster jam ")]),_:1})]),_:1})]),_:1}),u(la,{modelValue:a.leftDrawerOpen,"onUpdate:modelValue":v[0]||(v[0]=q=>a.leftDrawerOpen=q),"show-if-above":"",bordered:""},{default:o(()=>[u(ta,null,{default:o(()=>[u(Q,{header:""},{default:o(()=>[C(O(a.$t("menu")),1)]),_:1}),u(M,{clickable:"",to:{name:"home"},exact:""},{default:o(()=>[u(h,{avatar:""},{default:o(()=>[u(x,{name:"home"})]),_:1}),u(h,null,{default:o(()=>[u(Q,null,{default:o(()=>[C(O(a.$t("home")),1)]),_:1})]),_:1})]),_:1}),u(M,{clickable:"",to:{name:"caves"}},{default:o(()=>[u(h,{avatar:""},{default:o(()=>[u(x,{name:"egg_alt"})]),_:1}),u(h,null,{default:o(()=>[u(Q,null,{default:o(()=>[C(O(a.$t("caves")),1)]),_:1})]),_:1})]),_:1}),u(M,{clickable:"",to:{name:"trips"}},{default:o(()=>[u(h,{avatar:""},{default:o(()=>[u(x,{name:"hiking"})]),_:1}),u(h,null,{default:o(()=>[u(Q,null,{default:o(()=>[C(O(a.$t("trips")),1)]),_:1})]),_:1})]),_:1}),u(M,{clickable:"",to:{name:"custom-locations"}},{default:o(()=>[u(h,{avatar:""},{default:o(()=>[u(x,{name:"place"})]),_:1}),u(h,null,{default:o(()=>[u(Q,null,{default:o(()=>[C(O(a.$t("customLocations")),1)]),_:1})]),_:1})]),_:1}),fe((se(),de(M,{clickable:"",onClickOnce:a.logOutButton},{default:o(()=>[u(h,{avatar:""},{default:o(()=>[u(x,{name:"logout"})]),_:1}),u(h,null,{default:o(()=>[C(O(a.$t("logOut")),1)]),_:1})]),_:1},8,["onClickOnce"])),[[Xe]])]),_:1})]),_:1},8,["modelValue"]),u(aa,null,{default:o(()=>[u(F)]),_:1})]),_:1})}var ca=Re(ua,[["render",oa]]);export{ca as default};
