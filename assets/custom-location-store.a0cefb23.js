import{aJ as s,bt as a,am as o,aK as A}from"./index.f9934e58.js";var i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAC4jAAAuIwF4pT92AAABaUlEQVR4nGVSPU8CQRCdudv1Do6PWsORQPAjihZaWKOCvZV2tlZ2dhbGzt9i+AMGSbSyAGNhhzEBhMJEw2kihsuNsysHZ5xuZt57+97uivZL6ggQz5GgAYF3kMkEbxCp576TlSSrgDBPBMcCES94nuBBBYzUVbdrlEPSU89xLZR13uVVjwhnggAeEWBTyyGsh6QhxuO2wWD4BaviE5oCfH8PhHnN6MUJyUzf2kAx7nITMMCd/+0dCtf97LXbyZIhDUVaGq+Xozk0eOjt5nLBQKhBNvvRZ9KWKc0bXhaiYDZ+738NNFi1YjonjkKG8vSniOTITsqw1YROJzGHwqwTYB7+VzEGWGu10juFwuBVsJVZQ5o1Vl6Y2oAHVrbCTHzmmuVo0rbgsNVpWJ2wQb5XHo0SciaGfBGwMiat2g5esiUsRsBNfu2K6wbvqmXFklJW4PF+QxDRif4aoMH70a+hPCsbSlmB+QZPfwDKY4LMYmtopwAAAABJRU5ErkJggg==",n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAC4jAAAuIwF4pT92AAABcElEQVR4nF1SO0sDQRCevZu93F3yBxQUDL7QaKGFdcxLLG2iKeQUAlrZ2VlIOv+C4BOEA0mtMTGglUUUC/+CFoIimAd5rbNeLiyZ4nZm5/u+/W528dwp7mqM5YQQlVats7HtJr9AiUunNMo0yAOwCSr3kDF2REmI1qQRxLuTdCHhk84yhRHdxDKl4R7/EBnAGyVLvY0FnySMrh0wDRUs4xlbje4aN9k9HTnlkwIhfBRdZgGIMQX8VK8KB7eu4u/Hm7dRCzmRYFp2hIAZYAIGwKmsG/tBWWUvUh9EWrY5fyDwuIok3kut5oFljX4D2zoDDhoMhJC7WOd9nPycZorD3NTKpB4eJFBELMMunaVv4o678olkZcgyeYkak4qRV9IO+P8EDOb1oCFJMTSR5/sNz0Tlt9lIhHTOQdfk9GY9Dsyhza+lpYg652a1k9xxV79lQYpRqSzB3klsEelJ7NMt5zxwe119GtLzvw1SlmCa98EftyaBt4HVWuUAAAAASUVORK5CYII=",c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAC4jAAAuIwF4pT92AAABcklEQVR4nGVSPU8CQRCdOfZ2OSTEVhNNJH4QRQstrFGBoAWJIVFiY2tlZ2dh7PwfFsQLnRI1QKKVBRgL/4IWJhoFDnJ8rLNwJ0fcat/Me2/e3C1rX6WPUMK5BFmx0M6GMoVP8JyWmZ7WAfN0neuBPGYIcAEIQQRMjAG//zFTcVfUyqWmdI2XqR9WWAM8YyDhlQrrAz9cdUW6rQU4F2Uqht1plKLK7F5zl/uMEuGFoUg8AgeDwAwM2U91bB4yY+/2zbrcjgnOSzQp4rQXvXsocg2t5Hjm7pspHDi4eSfRhhD8geDsCBnhuQYDsoLsr866tLfUQOIIn9x11jF0F/YFzVxykvYoUzMM/0/U8GGxbu5sBTPXH4yiTAhuFKkx78nxQtMEGUScWCsG6Eq0ySi3+ikRj2Ol0e7Efd227hd+9SGWnPoyiUwVKeoJXG2AnQhlC18KkWNMOSuyQ1hjEuCk/zQQqhbY+96noTKrGMpZkaWUp7+JPX5AtbtJqAAAAABJRU5ErkJggg==",h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAC4jAAAuIwF4pT92AAABbElEQVR4nF2SPU8CQRCGZ2/nvuA0tppoIvErihZaWKOCvZU2hOS4wsrOzsLY+ReAhtCQGP6AARKtLMBY+Be0MBEQURpunSF35GSSvdvZed7Zd+8WR553LoS4AYBW3/fPZguFT4jEMJdbMk2zRtNVBXCBBN8KAIcWMjOadv/leelQNHTdRdMwmlRPBPprpMcrjX3OqLAbinQhYhZiFOZo43A0OrE0rUE7rU9EUj6CUjbNl0OS7Dz1ut0c2sXi2082m7Jtu0HAxlik1Gb0HAF8PFet9tgSxMrldxIdkOiBRCv/YCGee53OGOYcw4IwDAFCaGQFpkJHRD1MxoLffH7BkrJJVhLTNK0l445T/3bdI6dU+kCyMk9W6mRlLeL5hV7m5EwAO3FEFh0iwbWwEMCt/mCQllLqMcviD7EViLZJdMeWkhG4TX87M1updDinjinuzHCA7KFS6hL4aijV7it1Gr0a7JltcGeGle9f/QFdiYDoSWX/jwAAAABJRU5ErkJggg==";const g=s("custom-locations",{state:()=>({customLocations:[],customLocationsForMap:[],searchParameters:{query:"",pageNumber:1,x:null,y:null,sort:null,sortDirection:null},locationIcons:{1:n,2:i,3:c,4:h},totalPages:0,searching:!1,searchAbort:new AbortController}),getters:{getCustomLocations(e){return e.customLocations},getCustomLocationsForMap(e){return e.customLocationsForMap},getSearchParameters(e){return e.searchParameters},getTotalPages(e){return e.totalPages},getQuery(e){return e.searchParameters.query},getPageNumber(e){return e.searchParameters.pageNumber},getCurrentSort(e){return e.searchParameters.sort},getSearchingStatus(e){return e.searching}},actions:{clearLocationParameters(){this.searchParameters={query:this.searchParameters.query,pageNumber:1}},addQueryParameter(e){this.searchParameters.query=e},incrementPageNumber(){this.searchParameters.pageNumber++},setLocationParameters(e){this.searchParameters=e},async search(){this.searching&&this.searchAbort.abort(),this.searching=!0,this.searchAbort=new AbortController;try{const e=await a.get("/api/customlocations",{params:this.searchParameters,signal:this.searchAbort.signal});this.totalPages=JSON.parse(e.headers.pagination).totalPages,this.searchParameters.pageNumber>1?e.data.map(r=>this.customLocations.push(r)):this.customLocations=e.data}catch(e){console.error(e)}finally{this.searching=!1}},async searchForNearby(){this.searching=!0,o.is.cordova?window.BackgroundGeolocation.getCurrentLocation(async e=>{this.query="",this.setLocationParameters({...this.getSearchParameters,query:this.query,y:e.latitude,x:e.longitude,sort:"distance",sortDirection:"asc",pageNumber:1}),await this.search()},(e,r)=>{console.error("Error when trying to fetch location",e,r)},{enableHighAccuracy:!0}):navigator.geolocation.getCurrentPosition(async e=>{this.query="",this.setLocationParameters({...this.getSearchParameters,query:this.query,y:e.coords.latitude,x:e.coords.longitude,sort:"distance",sortDirection:"asc",pageNumber:1},(r,t)=>{console.error("Error when trying to fetch location",r,t)},{enableHighAccuracy:!0}),await this.search()},e=>{console.log(e)})},async loadForMap(){try{const e=await a.get("/api/customlocations/map",{params:{},signal:this.searchAbort.signal});this.customLocationsForMap=e.data.map(r=>(r.latLng=A([r.lng,r.lat]),r.icon=this.locationIcons[r.typeId],r))}catch(e){console.error(e)}finally{this.searching=!1}}}});export{g as u};
