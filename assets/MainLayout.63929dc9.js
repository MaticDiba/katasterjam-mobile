import{s as Le,ad as De,a8 as xe,ae as Me,aa as Qe,af as We,i as Pe,N as J,O as Ie,r as B,c as r,ag as Ve,ah as Ae,w as s,o as ze,a5 as re,P as Fe,ai as ce,h as V,aj as ie,M as He,g as Ne,ak as je,_ as Re,al as Ue,x as Ee,am as Ke,j as se,C as de,D as o,d as l,L as Xe,E as _,H as $,an as q,ao as Ge}from"./index.833812ab.js";import{Q as Je,a as Ye,b as Ze,c as ea,d as aa}from"./QLayout.19e58876.js";import{Q as S,a as p,b as v}from"./QItem.5cdc8a91.js";import{T as Y,b as A,Q as ta}from"./format.feecb03e.js";import"./QResizeObserver.adf79c1b.js";const fe=150;var la=Le({name:"QDrawer",inheritAttrs:!1,props:{...De,...xe,side:{type:String,default:"left",validator:a=>["left","right"].includes(a)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:a=>["default","desktop","mobile"].includes(a),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Me,"onLayout","miniState"],setup(a,{slots:m,emit:y,attrs:z}){const b=Ne(),{proxy:{$q:h}}=b,F=Qe(a,h),{preventBodyScroll:L}=je(),{registerTimeout:Z,removeTimeout:ve}=We(),t=Pe(Ie,J);if(t===J)return console.error("QDrawer needs to be child of QLayout"),J;let H,C=null,D;const i=B(a.behavior==="mobile"||a.behavior!=="desktop"&&t.totalWidth.value<=a.breakpoint),x=r(()=>a.mini===!0&&i.value!==!0),f=r(()=>x.value===!0?a.miniWidth:a.width),n=B(a.showIfAbove===!0&&i.value===!1?!0:a.modelValue===!0),ee=r(()=>a.persistent!==!0&&(i.value===!0||be.value===!0));function ae(e,u){if(me(),e!==!1&&t.animate(),c(0),i.value===!0){const d=t.instances[P.value];d!==void 0&&d.belowBreakpoint===!0&&d.hide(!1),g(1),t.isContainer.value!==!0&&L(!0)}else g(0),e!==!1&&K(!1);Z(()=>{e!==!1&&K(!0),u!==!0&&y("show",e)},fe)}function te(e,u){he(),e!==!1&&t.animate(),g(0),c(O.value*f.value),X(),u!==!0?Z(()=>{y("hide",e)},fe):ve()}const{show:N,hide:M}=Ve({showing:n,hideOnRouteChange:ee,handleShow:ae,handleHide:te}),{addToHistory:me,removeFromHistory:he}=Ae(n,M,ee),W={belowBreakpoint:i,hide:M},w=r(()=>a.side==="right"),O=r(()=>(h.lang.rtl===!0?-1:1)*(w.value===!0?1:-1)),le=B(0),T=B(!1),j=B(!1),ue=B(f.value*O.value),P=r(()=>w.value===!0?"left":"right"),R=r(()=>n.value===!0&&i.value===!1&&a.overlay===!1?a.miniToOverlay===!0?a.miniWidth:f.value:0),U=r(()=>a.overlay===!0||a.miniToOverlay===!0||t.view.value.indexOf(w.value?"R":"L")>-1||h.platform.is.ios===!0&&t.isContainer.value===!0),Q=r(()=>a.overlay===!1&&n.value===!0&&i.value===!1),be=r(()=>a.overlay===!0&&n.value===!0&&i.value===!1),we=r(()=>"fullscreen q-drawer__backdrop"+(n.value===!1&&T.value===!1?" hidden":"")),ye=r(()=>({backgroundColor:`rgba(0,0,0,${le.value*.4})`})),oe=r(()=>w.value===!0?t.rows.value.top[2]==="r":t.rows.value.top[0]==="l"),ge=r(()=>w.value===!0?t.rows.value.bottom[2]==="r":t.rows.value.bottom[0]==="l"),ke=r(()=>{const e={};return t.header.space===!0&&oe.value===!1&&(U.value===!0?e.top=`${t.header.offset}px`:t.header.space===!0&&(e.top=`${t.header.size}px`)),t.footer.space===!0&&ge.value===!1&&(U.value===!0?e.bottom=`${t.footer.offset}px`:t.footer.space===!0&&(e.bottom=`${t.footer.size}px`)),e}),_e=r(()=>{const e={width:`${f.value}px`,transform:`translateX(${ue.value}px)`};return i.value===!0?e:Object.assign(e,ke.value)}),Ce=r(()=>"q-drawer__content fit "+(t.isContainer.value!==!0?"scroll":"overflow-auto")),$e=r(()=>`q-drawer q-drawer--${a.side}`+(j.value===!0?" q-drawer--mini-animate":"")+(a.bordered===!0?" q-drawer--bordered":"")+(F.value===!0?" q-drawer--dark q-dark":"")+(T.value===!0?" no-transition":n.value===!0?"":" q-layout--prevent-focus")+(i.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${x.value===!0?"mini":"standard"}`+(U.value===!0||Q.value!==!0?" fixed":"")+(a.overlay===!0||a.miniToOverlay===!0?" q-drawer--on-top":"")+(oe.value===!0?" q-drawer--top-padding":""))),Be=r(()=>{const e=h.lang.rtl===!0?a.side:P.value;return[[Y,Se,void 0,{[e]:!0,mouse:!0}]]}),Oe=r(()=>{const e=h.lang.rtl===!0?P.value:a.side;return[[Y,ne,void 0,{[e]:!0,mouse:!0}]]}),Te=r(()=>{const e=h.lang.rtl===!0?P.value:a.side;return[[Y,ne,void 0,{[e]:!0,mouse:!0,mouseAllDir:!0}]]});function E(){pe(i,a.behavior==="mobile"||a.behavior!=="desktop"&&t.totalWidth.value<=a.breakpoint)}s(i,e=>{e===!0?(H=n.value,n.value===!0&&M(!1)):a.overlay===!1&&a.behavior!=="mobile"&&H!==!1&&(n.value===!0?(c(0),g(0),X()):N(!1))}),s(()=>a.side,(e,u)=>{t.instances[u]===W&&(t.instances[u]=void 0,t[u].space=!1,t[u].offset=0),t.instances[e]=W,t[e].size=f.value,t[e].space=Q.value,t[e].offset=R.value}),s(t.totalWidth,()=>{(t.isContainer.value===!0||document.qScrollPrevented!==!0)&&E()}),s(()=>a.behavior+a.breakpoint,E),s(t.isContainer,e=>{n.value===!0&&L(e!==!0),e===!0&&E()}),s(t.scrollbarWidth,()=>{c(n.value===!0?0:void 0)}),s(R,e=>{k("offset",e)}),s(Q,e=>{y("onLayout",e),k("space",e)}),s(w,()=>{c()}),s(f,e=>{c(),G(a.miniToOverlay,e)}),s(()=>a.miniToOverlay,e=>{G(e,f.value)}),s(()=>h.lang.rtl,()=>{c()}),s(()=>a.mini,()=>{a.modelValue===!0&&(qe(),t.animate())}),s(x,e=>{y("miniState",e)});function c(e){e===void 0?re(()=>{e=n.value===!0?0:f.value,c(O.value*e)}):(t.isContainer.value===!0&&w.value===!0&&(i.value===!0||Math.abs(e)===f.value)&&(e+=O.value*t.scrollbarWidth.value),ue.value=e)}function g(e){le.value=e}function K(e){const u=e===!0?"remove":t.isContainer.value!==!0?"add":"";u!==""&&document.body.classList[u]("q-body--drawer-toggle")}function qe(){C!==null&&clearTimeout(C),b.proxy&&b.proxy.$el&&b.proxy.$el.classList.add("q-drawer--mini-animate"),j.value=!0,C=setTimeout(()=>{C=null,j.value=!1,b&&b.proxy&&b.proxy.$el&&b.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function Se(e){if(n.value!==!1)return;const u=f.value,d=A(e.distance.x,0,u);if(e.isFinal===!0){d>=Math.min(75,u)===!0?N():(t.animate(),g(0),c(O.value*u)),T.value=!1;return}c((h.lang.rtl===!0?w.value!==!0:w.value)?Math.max(u-d,0):Math.min(0,d-u)),g(A(d/u,0,1)),e.isFirst===!0&&(T.value=!0)}function ne(e){if(n.value!==!0)return;const u=f.value,d=e.direction===a.side,I=(h.lang.rtl===!0?d!==!0:d)?A(e.distance.x,0,u):0;if(e.isFinal===!0){Math.abs(I)<Math.min(75,u)===!0?(t.animate(),g(1),c(0)):M(),T.value=!1;return}c(O.value*I),g(A(1-I/u,0,1)),e.isFirst===!0&&(T.value=!0)}function X(){L(!1),K(!0)}function k(e,u){t.update(a.side,e,u)}function pe(e,u){e.value!==u&&(e.value=u)}function G(e,u){k("size",e===!0?a.miniWidth:u)}return t.instances[a.side]=W,G(a.miniToOverlay,f.value),k("space",Q.value),k("offset",R.value),a.showIfAbove===!0&&a.modelValue!==!0&&n.value===!0&&a["onUpdate:modelValue"]!==void 0&&y("update:modelValue",!0),ze(()=>{y("onLayout",Q.value),y("miniState",x.value),H=a.showIfAbove===!0;const e=()=>{(n.value===!0?ae:te)(!1,!0)};if(t.totalWidth.value!==0){re(e);return}D=s(t.totalWidth,()=>{D(),D=void 0,n.value===!1&&a.showIfAbove===!0&&i.value===!1?N(!1):e()})}),Fe(()=>{D!==void 0&&D(),C!==null&&(clearTimeout(C),C=null),n.value===!0&&X(),t.instances[a.side]===W&&(t.instances[a.side]=void 0,k("size",0),k("offset",0),k("space",!1))}),()=>{const e=[];i.value===!0&&(a.noSwipeOpen===!1&&e.push(ce(V("div",{key:"open",class:`q-drawer__opener fixed-${a.side}`,"aria-hidden":"true"}),Be.value)),e.push(ie("div",{ref:"backdrop",class:we.value,style:ye.value,"aria-hidden":"true",onClick:M},void 0,"backdrop",a.noSwipeBackdrop!==!0&&n.value===!0,()=>Te.value)));const u=x.value===!0&&m.mini!==void 0,d=[V("div",{...z,key:""+u,class:[Ce.value,z.class]},u===!0?m.mini():He(m.default))];return a.elevated===!0&&n.value===!0&&d.push(V("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(ie("aside",{ref:"content",class:$e.value,style:_e.value},d,"contentclose",a.noSwipeClose!==!0&&i.value===!0,()=>Oe.value)),V("div",{class:"q-drawer-container"},e)}}});const ua=Ue({name:"MainLayout",components:{},setup(){const a=Ee(),m=B(!1);return{store:a,leftDrawerOpen:m,toggleLeftDrawer(){m.value=!m.value}}},methods:{async logOutButton(){try{await this.store.logOut()}finally{this.$router.replace("/login")}}}});function oa(a,m,y,z,b,h){const F=Ke("router-view");return se(),de(Je,{view:"lHh Lpr lFf"},{default:o(()=>[l(ea,{elevated:""},{default:o(()=>[l(Ye,null,{default:o(()=>[l(Xe,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:a.toggleLeftDrawer},null,8,["onClick"]),l(Ze,null,{default:o(()=>[_(" Kataster jam ")]),_:1})]),_:1})]),_:1}),l(la,{modelValue:a.leftDrawerOpen,"onUpdate:modelValue":m[0]||(m[0]=L=>a.leftDrawerOpen=L),"show-if-above":"",bordered:""},{default:o(()=>[l(ta,null,{default:o(()=>[l(S,{header:""},{default:o(()=>[_($(a.$t("menu")),1)]),_:1}),l(p,{clickable:"",to:{name:"home"},exact:""},{default:o(()=>[l(v,{avatar:""},{default:o(()=>[l(q,{name:"home"})]),_:1}),l(v,null,{default:o(()=>[l(S,null,{default:o(()=>[_($(a.$t("home")),1)]),_:1})]),_:1})]),_:1}),l(p,{clickable:"",to:{name:"caves"}},{default:o(()=>[l(v,{avatar:""},{default:o(()=>[l(q,{name:"egg_alt"})]),_:1}),l(v,null,{default:o(()=>[l(S,null,{default:o(()=>[_($(a.$t("caves")),1)]),_:1})]),_:1})]),_:1}),l(p,{clickable:"",to:{name:"trips"}},{default:o(()=>[l(v,{avatar:""},{default:o(()=>[l(q,{name:"hiking"})]),_:1}),l(v,null,{default:o(()=>[l(S,null,{default:o(()=>[_($(a.$t("trips")),1)]),_:1})]),_:1})]),_:1}),l(p,{clickable:"",to:{name:"custom-locations"}},{default:o(()=>[l(v,{avatar:""},{default:o(()=>[l(q,{name:"place"})]),_:1}),l(v,null,{default:o(()=>[l(S,null,{default:o(()=>[_($(a.$t("customLocations")),1)]),_:1})]),_:1})]),_:1}),l(p,{clickable:"",to:{name:"offline-data-list"}},{default:o(()=>[l(v,{avatar:""},{default:o(()=>[l(q,{name:"wifi_off"})]),_:1}),l(v,null,{default:o(()=>[l(S,null,{default:o(()=>[_($(a.$t("offlinedata")),1)]),_:1})]),_:1})]),_:1}),ce((se(),de(p,{clickable:"",onClickOnce:a.logOutButton},{default:o(()=>[l(v,{avatar:""},{default:o(()=>[l(q,{name:"logout"})]),_:1}),l(v,null,{default:o(()=>[_($(a.$t("logOut")),1)]),_:1})]),_:1},8,["onClickOnce"])),[[Ge]])]),_:1})]),_:1},8,["modelValue"]),l(aa,null,{default:o(()=>[l(F)]),_:1})]),_:1})}var ca=Re(ua,[["render",oa]]);export{ca as default};
