import{s as xe,a5 as De,a6 as pe,a7 as Me,a8 as Qe,a9 as We,i as Ie,W as J,X as Pe,r as C,c as r,aa as Ae,ab as Ve,w as s,o as ze,A as re,S as Fe,ac as ce,h as W,ad as ie,x as He,g as Ne,ae as je,_ as Re,af as Ue,G as Ke,ag as Xe,j as se,H as de,I as o,d as u,P as Ee,J as T,L as D,ah as I,ai as Ge}from"./index.c223e8cd.js";import{Q as Je,a as Ye,b as Ze,c as ea,d as aa}from"./QLayout.3165c1f2.js";import{T as Y,b as P,Q as ta,a as A,c as V,d as k}from"./format.c2dcb3f1.js";const ve=150;var la=xe({name:"QDrawer",inheritAttrs:!1,props:{...De,...pe,side:{type:String,default:"left",validator:a=>["left","right"].includes(a)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:a=>["default","desktop","mobile"].includes(a),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Me,"onLayout","miniState"],setup(a,{slots:f,emit:w,attrs:z}){const h=Ne(),{proxy:{$q:m}}=h,F=Qe(a,m),{preventBodyScroll:O}=je(),{registerTimeout:Z,removeTimeout:fe}=We(),t=Ie(Pe,J);if(t===J)return console.error("QDrawer needs to be child of QLayout"),J;let H,_=null,S;const i=C(a.behavior==="mobile"||a.behavior!=="desktop"&&t.totalWidth.value<=a.breakpoint),q=r(()=>a.mini===!0&&i.value!==!0),v=r(()=>q.value===!0?a.miniWidth:a.width),n=C(a.showIfAbove===!0&&i.value===!1?!0:a.modelValue===!0),ee=r(()=>a.persistent!==!0&&(i.value===!0||be.value===!0));function ae(e,l){if(me(),e!==!1&&t.animate(),c(0),i.value===!0){const d=t.instances[M.value];d!==void 0&&d.belowBreakpoint===!0&&d.hide(!1),y(1),t.isContainer.value!==!0&&O(!0)}else y(0),e!==!1&&X(!1);Z(()=>{e!==!1&&X(!0),l!==!0&&w("show",e)},ve)}function te(e,l){he(),e!==!1&&t.animate(),y(0),c(B.value*v.value),E(),l!==!0?Z(()=>{w("hide",e)},ve):fe()}const{show:N,hide:L}=Ae({showing:n,hideOnRouteChange:ee,handleShow:ae,handleHide:te}),{addToHistory:me,removeFromHistory:he}=Ve(n,L,ee),p={belowBreakpoint:i,hide:L},b=r(()=>a.side==="right"),B=r(()=>(m.lang.rtl===!0?-1:1)*(b.value===!0?1:-1)),le=C(0),$=C(!1),j=C(!1),ue=C(v.value*B.value),M=r(()=>b.value===!0?"left":"right"),R=r(()=>n.value===!0&&i.value===!1&&a.overlay===!1?a.miniToOverlay===!0?a.miniWidth:v.value:0),U=r(()=>a.overlay===!0||a.miniToOverlay===!0||t.view.value.indexOf(b.value?"R":"L")>-1||m.platform.is.ios===!0&&t.isContainer.value===!0),x=r(()=>a.overlay===!1&&n.value===!0&&i.value===!1),be=r(()=>a.overlay===!0&&n.value===!0&&i.value===!1),we=r(()=>"fullscreen q-drawer__backdrop"+(n.value===!1&&$.value===!1?" hidden":"")),ye=r(()=>({backgroundColor:`rgba(0,0,0,${le.value*.4})`})),oe=r(()=>b.value===!0?t.rows.value.top[2]==="r":t.rows.value.top[0]==="l"),ge=r(()=>b.value===!0?t.rows.value.bottom[2]==="r":t.rows.value.bottom[0]==="l"),ke=r(()=>{const e={};return t.header.space===!0&&oe.value===!1&&(U.value===!0?e.top=`${t.header.offset}px`:t.header.space===!0&&(e.top=`${t.header.size}px`)),t.footer.space===!0&&ge.value===!1&&(U.value===!0?e.bottom=`${t.footer.offset}px`:t.footer.space===!0&&(e.bottom=`${t.footer.size}px`)),e}),_e=r(()=>{const e={width:`${v.value}px`,transform:`translateX(${ue.value}px)`};return i.value===!0?e:Object.assign(e,ke.value)}),Ce=r(()=>"q-drawer__content fit "+(t.isContainer.value!==!0?"scroll":"overflow-auto")),Be=r(()=>`q-drawer q-drawer--${a.side}`+(j.value===!0?" q-drawer--mini-animate":"")+(a.bordered===!0?" q-drawer--bordered":"")+(F.value===!0?" q-drawer--dark q-dark":"")+($.value===!0?" no-transition":n.value===!0?"":" q-layout--prevent-focus")+(i.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${q.value===!0?"mini":"standard"}`+(U.value===!0||x.value!==!0?" fixed":"")+(a.overlay===!0||a.miniToOverlay===!0?" q-drawer--on-top":"")+(oe.value===!0?" q-drawer--top-padding":""))),$e=r(()=>{const e=m.lang.rtl===!0?a.side:M.value;return[[Y,qe,void 0,{[e]:!0,mouse:!0}]]}),Te=r(()=>{const e=m.lang.rtl===!0?M.value:a.side;return[[Y,ne,void 0,{[e]:!0,mouse:!0}]]}),Oe=r(()=>{const e=m.lang.rtl===!0?M.value:a.side;return[[Y,ne,void 0,{[e]:!0,mouse:!0,mouseAllDir:!0}]]});function K(){Le(i,a.behavior==="mobile"||a.behavior!=="desktop"&&t.totalWidth.value<=a.breakpoint)}s(i,e=>{e===!0?(H=n.value,n.value===!0&&L(!1)):a.overlay===!1&&a.behavior!=="mobile"&&H!==!1&&(n.value===!0?(c(0),y(0),E()):N(!1))}),s(()=>a.side,(e,l)=>{t.instances[l]===p&&(t.instances[l]=void 0,t[l].space=!1,t[l].offset=0),t.instances[e]=p,t[e].size=v.value,t[e].space=x.value,t[e].offset=R.value}),s(t.totalWidth,()=>{(t.isContainer.value===!0||document.qScrollPrevented!==!0)&&K()}),s(()=>a.behavior+a.breakpoint,K),s(t.isContainer,e=>{n.value===!0&&O(e!==!0),e===!0&&K()}),s(t.scrollbarWidth,()=>{c(n.value===!0?0:void 0)}),s(R,e=>{g("offset",e)}),s(x,e=>{w("onLayout",e),g("space",e)}),s(b,()=>{c()}),s(v,e=>{c(),G(a.miniToOverlay,e)}),s(()=>a.miniToOverlay,e=>{G(e,v.value)}),s(()=>m.lang.rtl,()=>{c()}),s(()=>a.mini,()=>{a.modelValue===!0&&(Se(),t.animate())}),s(q,e=>{w("miniState",e)});function c(e){e===void 0?re(()=>{e=n.value===!0?0:v.value,c(B.value*e)}):(t.isContainer.value===!0&&b.value===!0&&(i.value===!0||Math.abs(e)===v.value)&&(e+=B.value*t.scrollbarWidth.value),ue.value=e)}function y(e){le.value=e}function X(e){const l=e===!0?"remove":t.isContainer.value!==!0?"add":"";l!==""&&document.body.classList[l]("q-body--drawer-toggle")}function Se(){_!==null&&clearTimeout(_),h.proxy&&h.proxy.$el&&h.proxy.$el.classList.add("q-drawer--mini-animate"),j.value=!0,_=setTimeout(()=>{_=null,j.value=!1,h&&h.proxy&&h.proxy.$el&&h.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function qe(e){if(n.value!==!1)return;const l=v.value,d=P(e.distance.x,0,l);if(e.isFinal===!0){d>=Math.min(75,l)===!0?N():(t.animate(),y(0),c(B.value*l)),$.value=!1;return}c((m.lang.rtl===!0?b.value!==!0:b.value)?Math.max(l-d,0):Math.min(0,d-l)),y(P(d/l,0,1)),e.isFirst===!0&&($.value=!0)}function ne(e){if(n.value!==!0)return;const l=v.value,d=e.direction===a.side,Q=(m.lang.rtl===!0?d!==!0:d)?P(e.distance.x,0,l):0;if(e.isFinal===!0){Math.abs(Q)<Math.min(75,l)===!0?(t.animate(),y(1),c(0)):L(),$.value=!1;return}c(B.value*Q),y(P(1-Q/l,0,1)),e.isFirst===!0&&($.value=!0)}function E(){O(!1),X(!0)}function g(e,l){t.update(a.side,e,l)}function Le(e,l){e.value!==l&&(e.value=l)}function G(e,l){g("size",e===!0?a.miniWidth:l)}return t.instances[a.side]=p,G(a.miniToOverlay,v.value),g("space",x.value),g("offset",R.value),a.showIfAbove===!0&&a.modelValue!==!0&&n.value===!0&&a["onUpdate:modelValue"]!==void 0&&w("update:modelValue",!0),ze(()=>{w("onLayout",x.value),w("miniState",q.value),H=a.showIfAbove===!0;const e=()=>{(n.value===!0?ae:te)(!1,!0)};if(t.totalWidth.value!==0){re(e);return}S=s(t.totalWidth,()=>{S(),S=void 0,n.value===!1&&a.showIfAbove===!0&&i.value===!1?N(!1):e()})}),Fe(()=>{S!==void 0&&S(),_!==null&&(clearTimeout(_),_=null),n.value===!0&&E(),t.instances[a.side]===p&&(t.instances[a.side]=void 0,g("size",0),g("offset",0),g("space",!1))}),()=>{const e=[];i.value===!0&&(a.noSwipeOpen===!1&&e.push(ce(W("div",{key:"open",class:`q-drawer__opener fixed-${a.side}`,"aria-hidden":"true"}),$e.value)),e.push(ie("div",{ref:"backdrop",class:we.value,style:ye.value,"aria-hidden":"true",onClick:L},void 0,"backdrop",a.noSwipeBackdrop!==!0&&n.value===!0,()=>Oe.value)));const l=q.value===!0&&f.mini!==void 0,d=[W("div",{...z,key:""+l,class:[Ce.value,z.class]},l===!0?f.mini():He(f.default))];return a.elevated===!0&&n.value===!0&&d.push(W("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(ie("aside",{ref:"content",class:Be.value,style:_e.value},d,"contentclose",a.noSwipeClose!==!0&&i.value===!0,()=>Te.value)),W("div",{class:"q-drawer-container"},e)}}});const ua=Ue({name:"MainLayout",components:{},setup(){const a=Ke(),f=C(!1);return{store:a,leftDrawerOpen:f,toggleLeftDrawer(){f.value=!f.value}}},methods:{async logOutButton(){try{await this.store.logOut()}finally{this.$router.replace("/login")}}}});function oa(a,f,w,z,h,m){const F=Xe("router-view");return se(),de(Je,{view:"lHh Lpr lFf"},{default:o(()=>[u(ea,{elevated:""},{default:o(()=>[u(Ye,null,{default:o(()=>[u(Ee,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:a.toggleLeftDrawer},null,8,["onClick"]),u(Ze,null,{default:o(()=>[T(" Kataster jam ")]),_:1})]),_:1})]),_:1}),u(la,{modelValue:a.leftDrawerOpen,"onUpdate:modelValue":f[0]||(f[0]=O=>a.leftDrawerOpen=O),"show-if-above":"",bordered:""},{default:o(()=>[u(ta,null,{default:o(()=>[u(A,{header:""},{default:o(()=>[T(D(a.$t("menu")),1)]),_:1}),u(V,{clickable:"",to:{name:"home"},exact:""},{default:o(()=>[u(k,{avatar:""},{default:o(()=>[u(I,{name:"home"})]),_:1}),u(k,null,{default:o(()=>[u(A,null,{default:o(()=>[T(D(a.$t("home")),1)]),_:1})]),_:1})]),_:1}),u(V,{clickable:"",to:{name:"caves"}},{default:o(()=>[u(k,{avatar:""},{default:o(()=>[u(I,{name:"egg_alt"})]),_:1}),u(k,null,{default:o(()=>[u(A,null,{default:o(()=>[T(D(a.$t("caves")),1)]),_:1})]),_:1})]),_:1}),u(V,{clickable:"",to:{name:"trips"}},{default:o(()=>[u(k,{avatar:""},{default:o(()=>[u(I,{name:"hiking"})]),_:1}),u(k,null,{default:o(()=>[u(A,null,{default:o(()=>[T(D(a.$t("trips")),1)]),_:1})]),_:1})]),_:1}),ce((se(),de(V,{clickable:"",onClickOnce:a.logOutButton},{default:o(()=>[u(k,{avatar:""},{default:o(()=>[u(I,{name:"logout"})]),_:1}),u(k,null,{default:o(()=>[T(D(a.$t("logOut")),1)]),_:1})]),_:1},8,["onClickOnce"])),[[Ge]])]),_:1})]),_:1},8,["modelValue"]),u(aa,null,{default:o(()=>[u(F)]),_:1})]),_:1})}var da=Re(ua,[["render",oa]]);export{da as default};
