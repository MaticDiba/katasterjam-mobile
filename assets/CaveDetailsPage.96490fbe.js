import{Q as C,a as d}from"./QFab.799a9197.js";import{_ as F,r as n,bx as u,aE as D,ag as b,j as f,H as L,I as c,Q as O,d as l,K as t,L as e,ah as Q,M,bA as N,k as w,aK as z,F as S}from"./index.315eb3dd.js";import{Q as $}from"./QMarkupTable.1cd5f2fb.js";import{u as I}from"./use-quasar.f252f1be.js";import{F as T,P as E}from"./CartoLayers.bc669010.js";import{O as P}from"./OrganizationsList.9df873da.js";import{f as q}from"./date.3d23ecb2.js";import{S as B}from"./SimpleHeaderMap.9e07fb37.js";const H={name:"CaveDetailsPage",components:{OrganizationsList:P,SimpleHeaderMap:B},setup(){const{dialog:a}=I(),s=n([1637531,5766419]),i=n([]),o=n(null),v=n(null);return{confirmDialog:a,center:s,confirm:n(!1),markLocations:i,cave:o,confirmRef:v,formatDate:q}},computed:{favouriteIcon(){return this.cave.isFavourite?"favorite":"favorite_border"},selectedName(){var a,s;return`[${(a=this.cave)==null?void 0:a.caveNumber}] ${(s=this.cave)==null?void 0:s.name}`}},methods:{goTo(){var s,i;this.confirm=!0;const a=`[${(s=this.cave)==null?void 0:s.caveNumber}] ${(i=this.cave)==null?void 0:i.name}`;this.confirmDialog({title:`${this.$t("confirm")}`,message:`${this.$t("navigateToCave")}: ${a}`,cancel:!0,persistent:!0}).onOk(()=>{this.$router.push({path:"/",query:{lat:this.cave.lat,lng:this.cave.lng,navigate:!0,name:a}})})},showOnMap(){this.$router.push({path:"/",query:{lat:this.cave.lat,lng:this.cave.lng}})},async toggleFavourite(){if(this.cave.isFavourite)try{await u.delete("/api/favorites/",{data:{caveId:this.cave.caveNumber}}),this.cave.isFavourite=!1}catch(a){console.error(a)}else try{await u.post("/api/favorites",{caveId:this.cave.caveNumber}),this.cave.isFavourite=!0}catch(a){console.error(a)}}},created(){this.cave=this.$route.meta.cave;const a=D([this.cave.lng,this.cave.lat]);this.center=a;const s=new T(new E(a));this.markLocations=[s]}},A={class:"text-overline text-orange-9"},K={class:"row no-wrap items-center"},R={class:"col text-h6 ellipsis"},V={class:"col-auto text-grey text-caption q-pt-md row no-wrap items-center"},Y={class:"row no-wrap items-center"},j={class:"col-auto text-grey text-caption q-pt-md row no-wrap items-center"},G={class:"text-left table-row-fit"},J={class:"text-left table-row-fit"},U={class:"text-left table-row-fit"},W={class:"text-left table-row-fit"},X={class:"text-left table-row-fit"},Z={class:"text-left table-row-fit"},tt={class:"text-left table-row-fit"},et={class:"text-left table-row-fit"},at={class:"text-left table-row-fit"},ot={class:"text-left table-row-fit"},st={class:"text-left table-row-fit"},lt={class:"text-left table-row-fit"},it={class:"text-left table-row-fit"},rt={class:"text-left table-row-fit"},nt={class:"text-left table-row-fit"},ct={class:"text-left table-row-fit"},dt={class:"text-left table-row-fit"},ft={class:"text-left table-row-fit"},vt={class:"text-left table-row-fit"},ht={class:"text-left table-row-fit"},mt={class:"text-left table-row-fit"},_t={class:"text-left table-row-fit"},ut={class:"text-left table-row-fit"},bt={class:"text-left table-row-fit"},wt={class:"text-left table-row-fit"},gt={class:"text-left table-row-fit"},pt={class:"text-left table-row-fit"},xt={class:"text-left table-row-fit"};function yt(a,s,i,o,v,r){const g=b("SimpleHeaderMap"),p=b("OrganizationsList");return f(),L(O,{class:"cave-top"},{default:c(()=>[l(g,{center:o.center,markLocations:o.markLocations},null,8,["center","markLocations"]),l(M,null,{default:c(()=>[l(C,{class:"absolute",style:{top:"0",right:"12px",transform:"translateY(-50%)"},"vertical-actions-align":"right",color:"primary",glossy:"",icon:"keyboard_arrow_up",direction:"up"},{default:c(()=>[l(d,{"label-position":"left",color:"green",icon:"map",label:a.$t("mainMap"),onClick:r.showOnMap},null,8,["label","onClick"]),l(d,{"label-position":"left",color:"red",icon:r.favouriteIcon,label:a.$t("favourite"),onClick:r.toggleFavourite},null,8,["icon","label","onClick"]),l(d,{"label-position":"left",color:"orange",icon:"assist_walker",label:a.$t("navigate"),onClick:r.goTo},null,8,["label","onClick"])]),_:1}),t("div",A,e(a.$t("caveDetails")),1),t("div",K,[t("div",R,e(o.cave.caveNumber)+" - "+e(o.cave.name),1),t("div",V,[l(Q,{name:r.favouriteIcon,color:o.cave.isFavourite?"red":"default",size:"sm"},null,8,["name","color"])])]),t("div",Y,[t("div",j,e(a.$t("length"))+": "+e(o.cave.length)+" m, "+e(a.$t("depth"))+": "+e(o.cave.depth)+" m ",1)])]),_:1}),l(N),l($,null,{default:c(()=>{var h,m,_;return[t("tbody",null,[t("tr",null,[t("td",G,e(a.$t("organizations")),1),t("td",J,[l(p,{organizations:o.cave.organizations},null,8,["organizations"])])]),t("tr",null,[t("td",U,e(a.$t("dateOfDiscovery")),1),t("td",W,e(o.formatDate(o.cave.dateOfExcursion)),1)]),t("tr",null,[t("td",X,e(a.$t("authorsOfReport")),1),t("td",Z,e(o.cave.author),1)]),t("tr",null,[t("td",tt,e(a.$t("discoverers")),1),t("td",et,e(o.cave.team),1)]),t("tr",null,[t("td",at,e(a.$t("importDate")),1),t("td",ot,e(o.formatDate(o.cave.dateOfSubmission)),1)]),t("tr",null,[t("td",st,e(a.$t("note")),1),t("td",lt,e(o.cave.notes),1)]),t("tr",null,[t("td",it,e(a.$t("showCave")),1),t("td",rt,e(o.cave.turisticCave?"Yes":"No"),1)]),t("tr",null,[t("td",nt,e(a.$t("type")),1),t("td",ct,[(f(!0),w(S,null,z(o.cave.caveTypes,({name:x,description:y},k)=>(f(),w("span",{key:k},e(x)+" - "+e(a.$t(`caveTypes.${y}`)),1))),128))])]),t("tr",null,[t("td",dt,e(a.$t("dk48")),1),t("td",ft,e(o.cave.xcoordinate)+", "+e(o.cave.ycoordinate),1)]),t("tr",null,[t("td",vt,e(a.$t("wgs84")),1),t("td",ht,e(o.cave.lng.toFixed(5))+", "+e(o.cave.lat.toFixed(5)),1)]),t("tr",null,[t("td",mt,e(a.$t("entranceElevation")),1),t("td",_t,e(o.cave.entranceElevation)+" m",1)]),t("tr",null,[t("td",ut,e(a.$t("closestTown")),1),t("td",bt,e((h=o.cave.settlement)==null?void 0:h.name),1)]),t("tr",null,[t("td",wt,e(a.$t("municipality")),1),t("td",gt,e((m=o.cave.settlement)==null?void 0:m.municipality),1)]),t("tr",null,[t("td",pt,e(a.$t("kadasterMunicipality")),1),t("td",xt,e((_=o.cave.kadasterMunicipality)==null?void 0:_.name),1)])])]}),_:1})]),_:1})}var Nt=F(H,[["render",yt]]);export{Nt as default};
